[{"content":"","date":"5 February 2025","externalUrl":null,"permalink":"/douoduublog/tags/docker/","section":"Tags","summary":"","title":"Docker","type":"tags"},{"content":"","date":"5 February 2025","externalUrl":null,"permalink":"/douoduublog/tags/flask/","section":"Tags","summary":"","title":"Flask","type":"tags"},{"content":"","date":"5 February 2025","externalUrl":null,"permalink":"/douoduublog/tags/macosm1/","section":"Tags","summary":"","title":"MacOSM1","type":"tags"},{"content":"","date":"5 February 2025","externalUrl":null,"permalink":"/douoduublog/categories/python/","section":"åˆ†é¡","summary":"","title":"python","type":"categories"},{"content":"","date":"5 February 2025","externalUrl":null,"permalink":"/douoduublog/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":"","date":"5 February 2025","externalUrl":null,"permalink":"/douoduublog/","section":"å°ç‘œçš„éƒ¨è½æ ¼","summary":"","title":"å°ç‘œçš„éƒ¨è½æ ¼","type":"page"},{"content":"","date":"5 February 2025","externalUrl":null,"permalink":"/douoduublog/categories/","section":"åˆ†é¡","summary":"","title":"åˆ†é¡","type":"categories"},{"content":"","date":"5 February 2025","externalUrl":null,"permalink":"/douoduublog/posts/","section":"æ–‡ç« ","summary":"","title":"æ–‡ç« ","type":"posts"},{"content":"å‰è¨€ # åœ¨ macOS M1ï¼ˆApple Siliconï¼‰ ä¸Šé‹è¡Œ Docker å¯èƒ½æœƒé‡åˆ°èˆ‡å‚³çµ± x86 æ¶æ§‹ä¸åŒçš„æŒ‘æˆ°ï¼Œä¾‹å¦‚éœ€è¦ç‰¹å®šçš„æ¶æ§‹æ”¯æ´ã€‚æœ¬ç¯‡æ–‡ç« å°‡ä»‹ç´¹å¦‚ä½•ä½¿ç”¨ Docker éƒ¨ç½² Flask æ‡‰ç”¨ç¨‹å¼ï¼Œä¸¦é€æ­¥è§£æ Dockerfile çš„å…§å®¹ï¼Œç¢ºä¿å…¶å¯åœ¨ macOS M1 ä¸Šé †åˆ©é‹è¡Œã€‚\nä¸€ã€å»ºç«‹ Dockerfile # æˆ‘å€‘å°‡ä½¿ç”¨ Docker ä¾†å°è£ä¸€å€‹ç°¡å–®çš„ Flask æ‡‰ç”¨ç¨‹å¼ï¼Œä¸¦ç¢ºä¿å®ƒèƒ½å¤ åœ¨ macOS M1ï¼ˆARM64 æ¶æ§‹ï¼‰ ä¸Šæ­£å¸¸é‹è¡Œã€‚\n1.1 Dockerfile å…§å®¹ # # é©ç”¨æ–¼ macOS M1 FROM --platform=linux/arm64 python:3.9 # è¨­å®šå·¥ä½œç›®éŒ„ WORKDIR /app # è¤‡è£½æ‰€æœ‰æª”æ¡ˆåˆ°å·¥ä½œç›®éŒ„ COPY . . # å®‰è£ Flask RUN pip install --no-cache-dir flask # é–‹å•Ÿ Flask æœå‹™ CMD [\u0026#34;python\u0026#34;, \u0026#34;app.py\u0026#34;] äºŒã€Dockerfile è§£æ # 2.1 æŒ‡å®šåŸºç¤æ˜ åƒèˆ‡æ¶æ§‹ # FROM --platform=linux/arm64 python:3.9 é€™ä¸€è¡ŒæŒ‡å®šäº† Python 3.9 ä½œç‚ºåŸºç¤æ˜ åƒï¼Œä¸¦æ˜ç¢ºæŒ‡å®š arm64 å¹³å°ï¼Œç¢ºä¿åœ¨ macOS M1ï¼ˆApple Siliconï¼‰ ä¸Šé‹è¡Œæ™‚ï¼Œä¸æœƒä¸‹è¼‰èˆ‡ ARM æ¶æ§‹ä¸ç›¸å®¹çš„ x86 ç‰ˆæœ¬ã€‚\n2.2 è¨­å®šå·¥ä½œç›®éŒ„ # WORKDIR /app é€™è¡ŒæŒ‡ä»¤è¨­å®šå®¹å™¨å…§çš„å·¥ä½œç›®éŒ„ç‚º /appï¼Œç¢ºä¿æ‰€æœ‰æ“ä½œï¼ˆå¦‚ COPY å’Œ RUNï¼‰éƒ½åœ¨è©²ç›®éŒ„å…§åŸ·è¡Œï¼Œæé«˜å¯ç¶­è­·æ€§ã€‚\n2.3 è¤‡è£½å°ˆæ¡ˆæ–‡ä»¶ # COPY . . ç¬¬ä¸€å€‹ .ï¼šä»£è¡¨æœ¬æ©Ÿç«¯çš„ç•¶å‰ç›®éŒ„ã€‚ ç¬¬äºŒå€‹ .ï¼šä»£è¡¨å®¹å™¨å…§çš„ /app ç›®éŒ„ã€‚ é€™æ¨£å¯ä»¥ç¢ºä¿ app.py å’Œç›¸é—œæ–‡ä»¶æˆåŠŸè¤‡è£½åˆ°å®¹å™¨å…§ã€‚\n2.4 å®‰è£ Flask # RUN pip install --no-cache-dir flask é€™è¡ŒæŒ‡ä»¤è² è²¬å®‰è£ Flaskï¼Œä¸¦ç¢ºä¿ä¸æœƒåœ¨ Docker é¡åƒä¸­ç•™ä¸‹å®‰è£å¿«å–ï¼Œæ¸›å°‘æœ€çµ‚æ˜ åƒçš„å¤§å°ã€‚\n2.5 è¨­å®šå®¹å™¨å•Ÿå‹•å‘½ä»¤ # CMD [\u0026#34;python\u0026#34;, \u0026#34;app.py\u0026#34;] é€™è¡Œè¨­å®šäº†å®¹å™¨å•Ÿå‹•å¾ŒåŸ·è¡Œçš„é è¨­å‘½ä»¤ï¼Œå³ é‹è¡Œ app.py å•Ÿå‹• Flask ä¼ºæœå™¨ã€‚\næ³¨æ„ï¼šCMD åªèƒ½åœ¨ Dockerfile ä¸­å‡ºç¾ä¸€æ¬¡ï¼Œå¦å‰‡å¾Œé¢çš„ CMD æœƒè¦†è“‹å‰ä¸€å€‹ã€‚\nä¸‰ã€å»ºç½®èˆ‡é‹è¡Œå®¹å™¨ # 3.1 å»ºç«‹ Docker æ˜ åƒ # åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ä¾†å»ºç«‹ Docker æ˜ åƒï¼š\ndocker build -t my-flask-app . -t my-flask-appï¼šæŒ‡å®šæ˜ åƒåç¨±ç‚º my-flask-appã€‚ .ï¼šä»£è¡¨ Dockerfile æ‰€åœ¨çš„ç›®éŒ„ï¼ˆç•¶å‰ç›®éŒ„ï¼‰ã€‚ 3.2 é‹è¡Œ Docker å®¹å™¨ # åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ä¾†å•Ÿå‹• Flask æ‡‰ç”¨ç¨‹å¼ï¼š\ndocker run -p 5000:5000 my-flask-app -p 5000:5000ï¼šå°‡å®¹å™¨å…§çš„ 5000 åŸ  æ˜ å°„åˆ°æœ¬æ©Ÿç«¯çš„ 5000 åŸ ï¼Œé€™æ¨£å¯ä»¥é€é http://localhost:5000 è¨ªå• Flask æœå‹™ã€‚ my-flask-appï¼šæŒ‡å®šè¦é‹è¡Œçš„æ˜ åƒåç¨±ã€‚ 3.3 ç¢ºèª Flask æœå‹™é‹è¡Œ # å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œçµ‚ç«¯æ©Ÿæ‡‰è©²æœƒé¡¯ç¤º Flask ä¼ºæœå™¨æ­£åœ¨é‹è¡Œï¼Œä¸¦ä¸”å¯ä»¥é–‹å•Ÿç€è¦½å™¨è¨ªå•ï¼š\nhttp://localhost:5000 æç¤ºï¼šå¦‚æœç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¢ºä¿ app.py å­˜åœ¨ï¼Œä¸” Flask å·²å®‰è£æˆåŠŸã€‚\nå››ã€çµè«– # é€éæœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘å€‘å­¸ç¿’äº†å¦‚ä½•åœ¨ macOS M1 ä¸Šä½¿ç”¨ Docker éƒ¨ç½² Flask æ‡‰ç”¨ç¨‹å¼ï¼Œä¸¦è§£æäº† Dockerfile çš„æ¯å€‹æ­¥é©Ÿã€‚\nå›é¡§å­¸ç¿’é‡é» # FROM --platform=linux/arm64 python:3.9 ç¢ºä¿èˆ‡ macOS M1 ç›¸å®¹ã€‚ WORKDIR /app è¨­å®šå·¥ä½œç›®éŒ„ï¼Œæ–¹ä¾¿ç®¡ç†æ–‡ä»¶ã€‚ COPY . . å°‡å°ˆæ¡ˆæ–‡ä»¶è¤‡è£½åˆ°å®¹å™¨å…§ã€‚ RUN pip install --no-cache-dir flask å®‰è£ Flaskã€‚ CMD [\u0026quot;python\u0026quot;, \u0026quot;app.py\u0026quot;] å•Ÿå‹• Flask æ‡‰ç”¨ç¨‹å¼ã€‚ docker build -t my-flask-app . å»ºç«‹æ˜ åƒã€‚ docker run -p 5000:5000 my-flask-app å•Ÿå‹• Flask æœå‹™ã€‚ é€™äº›æ­¥é©Ÿä¸åƒ…é©ç”¨æ–¼ Flaskï¼Œä¹Ÿå¯ä»¥ç”¨ä¾†å°è£å…¶ä»– Python æ‡‰ç”¨ç¨‹å¼ï¼Œè®“ä½ åœ¨ macOS M1 ä¸Šè¼•é¬†éƒ¨ç½²è‡ªå·±çš„æ‡‰ç”¨ï¼ğŸš€\n","date":"5 February 2025","externalUrl":null,"permalink":"/douoduublog/posts/%E4%BD%BF%E7%94%A8-docker-%E9%81%8B%E8%A1%8C-flask/","section":"æ–‡ç« ","summary":"\u003ch2 class=\"relative group\"\u003eå‰è¨€ \n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\n    \n    \u003cspan\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å®šä½é»\"\u003e#\u003c/a\u003e\n    \u003c/span\u003e        \n    \n\u003c/h2\u003e\n\u003cp\u003eåœ¨ \u003cstrong\u003emacOS M1ï¼ˆApple Siliconï¼‰\u003c/strong\u003e ä¸Šé‹è¡Œ Docker å¯èƒ½æœƒé‡åˆ°èˆ‡å‚³çµ± x86 æ¶æ§‹ä¸åŒçš„æŒ‘æˆ°ï¼Œä¾‹å¦‚éœ€è¦ç‰¹å®šçš„æ¶æ§‹æ”¯æ´ã€‚æœ¬ç¯‡æ–‡ç« å°‡ä»‹ç´¹å¦‚ä½•ä½¿ç”¨ \u003cstrong\u003eDocker\u003c/strong\u003e éƒ¨ç½² Flask æ‡‰ç”¨ç¨‹å¼ï¼Œä¸¦é€æ­¥è§£æ \u003ccode\u003eDockerfile\u003c/code\u003e çš„å…§å®¹ï¼Œç¢ºä¿å…¶å¯åœ¨ \u003cstrong\u003emacOS M1\u003c/strong\u003e ä¸Šé †åˆ©é‹è¡Œã€‚\u003c/p\u003e","title":"åœ¨ macOS M1 ä¸Šä½¿ç”¨ Docker é‹è¡Œ Flask æ‡‰ç”¨ç¨‹å¼","type":"posts"},{"content":"","date":"5 February 2025","externalUrl":null,"permalink":"/douoduublog/categories/%E8%BB%9F%E9%AB%94%E6%95%99%E5%AD%B8/","section":"åˆ†é¡","summary":"","title":"è»Ÿé«”æ•™å­¸","type":"categories"},{"content":"","date":"1 February 2025","externalUrl":null,"permalink":"/douoduublog/series/selemium%E7%88%AC%E5%8F%96youtube%E6%A8%99%E9%A1%8C/","section":"Series","summary":"","title":"Selemiumçˆ¬å–Youtubeæ¨™é¡Œ","type":"series"},{"content":"","date":"1 February 2025","externalUrl":null,"permalink":"/douoduublog/tags/selenium/","section":"Tags","summary":"","title":"Selenium","type":"tags"},{"content":"å‰è¨€ # Selenium ä¸­çš„å°èˆªèˆ‡å…ƒç´ é¸å–ï¼ŒåŒ…æ‹¬ driver.back()ã€driver.forward()ã€WebDriverWait åŠ XPath ã€‚\nåœ¨é€™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å€‘å°‡ä½¿ç”¨ Selenium ä¾†æœå°‹ YouTube ä¸Šçš„æ¯”ç‰¹å¹£ç›¸é—œå½±ç‰‡ï¼Œä¸¦è©³ç´°è§£æ ç¶²é å°èˆª èˆ‡ å…ƒç´ é¸å– çš„é—œéµå‡½å¼ã€‚\nåŒ…æ‹¬ï¼š\ndriver.back() èˆ‡ driver.forward() ç”¨æ–¼ç€è¦½å™¨å°èˆª time.sleep(5) æ§åˆ¶é é¢è¼‰å…¥æ™‚é–“ XPath èªæ³•ä¾†é¸å–ç‰¹å®šå…ƒç´ ï¼Œå¦‚ first_video = driver.find_element(By.XPATH, '(//a[@id=\u0026quot;video-title\u0026quot;])[1]') WebDriverWait(driver, 10).until(EC.presence_of_element_located(...)) ä¾†ç¢ºä¿å…ƒç´ å·²ç¶“è¼‰å…¥ ä¸€ã€å®Œæ•´ç¨‹å¼ç¢¼ # from selenium import webdriver from selenium.webdriver.chrome.service import Service from selenium.webdriver.common.keys import Keys import selenium from selenium.webdriver.common.by import By from selenium.webdriver.support.wait import WebDriverWait from selenium.webdriver.support import expected_conditions as EC import time # è¨­å®š ChromeDriver è·¯å¾‘ PATH = \u0026#34;/Users/doudouu0504/Desktop/chromedriver-mac-arm64/chromedriver\u0026#34; driver = webdriver.Chrome(service=Service(PATH)) driver.get(\u0026#34;https://www.youtube.com/\u0026#34;) # æœå°‹é—œéµå­— \u0026#34;æ¯”ç‰¹å¹£\u0026#34; search = driver.find_element(By.NAME, \u0026#34;search_query\u0026#34;) search.clear() search.send_keys(\u0026#34;æ¯”ç‰¹å¹£\u0026#34;) search.send_keys(Keys.RETURN) # ç­‰å¾…æœå°‹çµæœè¼‰å…¥ WebDriverWait(driver, 10).until( EC.presence_of_element_located((By.XPATH, \u0026#39;//a[@id=\u0026#34;video-title\u0026#34;]\u0026#39;)) ) # å–å¾—æ‰€æœ‰æœå°‹çµæœçš„æ¨™é¡Œ titles = driver.find_elements(By.XPATH, \u0026#39;//a[@id=\u0026#34;video-title\u0026#34;]\u0026#39;) for title in titles: print(title.text) # é¸å–ç¬¬ä¸€å€‹æœå°‹çµæœ first_video = driver.find_element(By.XPATH, \u0026#39;(//a[@id=\u0026#34;video-title\u0026#34;])[1]\u0026#39;) print(\u0026#34;å³å°‡é»æ“Šå½±ç‰‡:\u0026#34;, first_video.text) first_video.click() # ç­‰å¾…å½±ç‰‡è¼‰å…¥ time.sleep(5) # è¿”å›ä¸Šä¸€é  driver.back() time.sleep(2) # ç­‰å¾…è¿”å›é é¢è¼‰å…¥ # å‰é€²è‡³å½±ç‰‡é é¢ driver.forward() time.sleep(2) # ç­‰å¾…å‰é€²é é¢è¼‰å…¥ input(\u0026#34;æŒ‰ Enter éµçµæŸç¨‹å¼ä¸¦é—œé–‰ç€è¦½å™¨...\u0026#34;) driver.quit() äºŒã€ç¨‹å¼ç¢¼è§£æ # 2.1 WebDriverWait(driver, 10).until(\u0026hellip;) # é€™æ®µç¨‹å¼ç¢¼ç¢ºä¿æœå°‹çµæœå·²ç¶“è¼‰å…¥ï¼Œé¿å… find_element æ‰¾ä¸åˆ°å…ƒç´ å°è‡´éŒ¯èª¤ï¼š\nWebDriverWait(driver, 10).until( EC.presence_of_element_located((By.XPATH, \u0026#39;//a[@id=\u0026#34;video-title\u0026#34;]\u0026#39;)) ) WebDriverWait(driver, 10): æœ€å¤šç­‰å¾… 10 ç§’ã€‚ EC.presence_of_element_located((By.XPATH, '//a[@id=\u0026quot;video-title\u0026quot;]')): ç¢ºèªè©²å…ƒç´ å·²ç¶“å‡ºç¾åœ¨ DOM ä¸­ï¼Œä½†ä¸ä¸€å®šå¯è¦‹ã€‚ 2.2 driver.find_element() # é€™è¡Œç¨‹å¼ç¢¼é¸å– ç¬¬ä¸€å€‹æœå°‹çµæœ ä¸¦å°å‡ºå…¶æ¨™é¡Œï¼š\nç•¶æˆ‘å€‘æ‰“é–‹ YouTube æœå°‹çµæœé é¢ï¼ŒæŒ‰ä¸‹ F12 é€²å…¥é–‹ç™¼è€…å·¥å…·ï¼Œä½¿ç”¨ Elements æª¢è¦–ç¶²é çš„ HTML çµæ§‹æ™‚ï¼Œå¯ä»¥ç™¼ç¾å½±ç‰‡æ¨™é¡Œçš„é€£çµ \u0026lt;a\u0026gt; å…ƒç´ å…·æœ‰ id=\u0026quot;video-title\u0026quot;ï¼Œé€™è¡¨ç¤ºæˆ‘å€‘å¯ä»¥é€é XPath //a[@id=\u0026quot;video-title\u0026quot;] ä¾†é¸å–æ‰€æœ‰å½±ç‰‡æ¨™é¡Œã€‚\nfirst_video = driver.find_element(By.XPATH, \u0026#39;(//a[@id=\u0026#34;video-title\u0026#34;])[1]\u0026#39;) print(\u0026#34;å³å°‡é»æ“Šå½±ç‰‡:\u0026#34;, first_video.text) (//a[@id=\u0026quot;video-title\u0026quot;])[1]ï¼šé¸å– ç¬¬ä¸€å€‹å½±ç‰‡æ¨™é¡Œé€£çµã€‚ print(first_video.text)ï¼šé¡¯ç¤ºå½±ç‰‡æ¨™é¡Œï¼Œè®“ä½¿ç”¨è€…ç¢ºèªå³å°‡é»æ“Šçš„å…§å®¹ã€‚ é€™æ¨£çš„ XPath è¡¨é”å¼èƒ½å¹«åŠ©æˆ‘å€‘é–å®š YouTube å½±ç‰‡æœå°‹çµæœä¸­çš„ç¬¬ä¸€å€‹å½±ç‰‡ï¼Œç¢ºä¿è‡ªå‹•åŒ–è…³æœ¬èƒ½å¤ é»æ“Šæ­£ç¢ºçš„å½±ç‰‡ã€‚\n2.3 driver.back() èˆ‡ driver.forward() # é€™å…©è¡Œç¨‹å¼ç¢¼è² è²¬ æ¨¡æ“¬ç€è¦½å™¨çš„è¿”å›èˆ‡å‰é€²æ“ä½œï¼š\ndriver.back() time.sleep(2) # ç­‰å¾…è¿”å›é é¢è¼‰å…¥ driver.forward() time.sleep(2) # ç­‰å¾…å‰é€²é é¢è¼‰å…¥ driver.back()ï¼šè¿”å›ä¸Šä¸€é ï¼ˆæœå°‹çµæœé ï¼‰ã€‚ time.sleep(2)ï¼šç­‰å¾…é é¢è¼‰å…¥å®Œæˆã€‚ driver.forward()ï¼šå‰é€²åˆ°å½±ç‰‡æ’­æ”¾é é¢ã€‚ æç¤ºï¼štime.sleep() æ˜¯å¼·åˆ¶ç­‰å¾…ï¼Œè¼ƒä½³åšæ³•æ˜¯ä½¿ç”¨ WebDriverWait ç¢ºä¿é é¢è¼‰å…¥ã€‚\nä¸‰ã€çµè«– # é€™ç¯‡æ–‡ç« ç¤ºç¯„äº†å¦‚ä½•ä½¿ç”¨ Selenium è‡ªå‹•æœå°‹ YouTube å½±ç‰‡ï¼Œä¸¦è§£æäº†å¹¾å€‹é‡è¦çš„åŠŸèƒ½ï¼š\nWebDriverWait(driver, 10).until(...) ç¢ºä¿æœå°‹çµæœå·²è¼‰å…¥ã€‚ first_video = driver.find_element(By.XPATH, '(//a[@id=\u0026quot;video-title\u0026quot;])[1]') é¸å–ç¬¬ä¸€å€‹æœå°‹çµæœã€‚ driver.back() èˆ‡ driver.forward() ç”¨æ–¼ç¶²é å°èˆªã€‚ time.sleep(5) ç­‰å¾…é é¢è¼‰å…¥ï¼Œä½†å¯ç”¨ WebDriverWait å„ªåŒ–ã€‚ é€™äº›æŠ€è¡“å°æ–¼çˆ¬èŸ²é–‹ç™¼èˆ‡è‡ªå‹•åŒ–æ¸¬è©¦éƒ½ååˆ†é‡è¦ï¼Œå»ºè­°è®€è€…å¯ä»¥é€²ä¸€æ­¥å˜—è©¦ä¸åŒçš„é—œéµå­—æœå°‹ï¼Œæˆ–çµåˆå…¶ä»– Selenium æ–¹æ³•ä¾†æå‡çˆ¬å–æ•ˆç‡ã€‚\n","date":"1 February 2025","externalUrl":null,"permalink":"/douoduublog/posts/selenium-%E6%93%8D%E4%BD%9C-youtube%E8%A7%A3%E6%9E%90%E5%B0%8E%E8%88%AA%E8%88%87%E5%85%83%E7%B4%A0%E9%81%B8%E5%8F%96/","section":"æ–‡ç« ","summary":"\u003ch2 class=\"relative group\"\u003eå‰è¨€ \n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\n    \n    \u003cspan\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å®šä½é»\"\u003e#\u003c/a\u003e\n    \u003c/span\u003e        \n    \n\u003c/h2\u003e\n\u003cp\u003eSelenium ä¸­çš„å°èˆªèˆ‡å…ƒç´ é¸å–ï¼ŒåŒ…æ‹¬ driver.back()ã€driver.forward()ã€WebDriverWait åŠ XPath ã€‚\u003cbr\u003e\nåœ¨é€™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å€‘å°‡ä½¿ç”¨ \u003ccode\u003eSelenium\u003c/code\u003e ä¾†æœå°‹ YouTube ä¸Šçš„æ¯”ç‰¹å¹£ç›¸é—œå½±ç‰‡ï¼Œä¸¦è©³ç´°è§£æ \u003cstrong\u003eç¶²é å°èˆª\u003c/strong\u003e èˆ‡ \u003cstrong\u003eå…ƒç´ é¸å–\u003c/strong\u003e çš„é—œéµå‡½å¼ã€‚\u003c/p\u003e","title":"Selenium æ“ä½œ YouTubeï¼šè§£æå°èˆªèˆ‡å…ƒç´ é¸å–","type":"posts"},{"content":"","date":"1 February 2025","externalUrl":null,"permalink":"/douoduublog/series/","section":"Series","summary":"","title":"Series","type":"series"},{"content":"","date":"1 February 2025","externalUrl":null,"permalink":"/douoduublog/tags/%E7%88%AC%E8%9F%B2/","section":"Tags","summary":"","title":"çˆ¬èŸ²","type":"tags"},{"content":"å‰è¨€ # åœ¨é€™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°‡åˆ†äº«å¦‚ä½•ä½¿ç”¨ Selenium è‡ªå‹•æœå°‹ YouTube å½±ç‰‡ï¼Œä¸¦æŠ“å–æœå°‹çµæœçš„å½±ç‰‡æ¨™é¡Œã€‚é€™å°æ–¼æ•¸æ“šåˆ†æã€å…§å®¹æ•´ç†ï¼Œç”šè‡³æ˜¯è‡ªå‹•åŒ–å·¥å…·é–‹ç™¼éƒ½ç›¸ç•¶æœ‰å¹«åŠ©ã€‚\nä¸€ã€ç’°å¢ƒæº–å‚™ # å¦‚æœä½ æƒ³ç­è§£å¦‚ä½•å®‰è£ Selenium ä»¥åŠä¸‹è¼‰å°æ‡‰çš„ ChromeDriverï¼Œå¯ä»¥åƒè€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ï¼šä½¿ç”¨ Poetry å®‰è£ Selenium ä¸¦ä¸‹è¼‰ ChromeDriverã€‚\näºŒã€ç¨‹å¼ç¢¼è§£æ # 2.1 å®Œæ•´ç¨‹å¼ç¢¼ # ä»¥ä¸‹æ˜¯å®Œæ•´çš„ Python ç¨‹å¼ç¢¼ï¼Œè² è²¬é–‹å•Ÿ YouTubeï¼Œè¼¸å…¥é—œéµå­— \u0026ldquo;æ¯”ç‰¹å¹£\u0026rdquo;ï¼Œä¸¦åˆ—å‡ºæœå°‹çµæœä¸­çš„å½±ç‰‡æ¨™é¡Œã€‚\nfrom selenium import webdriver from selenium.webdriver.chrome.service import Service from selenium.webdriver.common.keys import Keys import selenium from selenium.webdriver.common.by import By from selenium.webdriver.support.wait import WebDriverWait from selenium.webdriver.support import expected_conditions as EC # è¨­å®š ChromeDriver è·¯å¾‘ PATH = \u0026#34;/Users/doudouu0504/Desktop/chromedriver-mac-arm64/chromedriver\u0026#34; # å»ºç«‹ WebDriver ç‰©ä»¶ if selenium.__version__.startswith(\u0026#34;4\u0026#34;): driver = webdriver.Chrome(service=Service(PATH)) else: driver = webdriver.Chrome(executable_path=PATH) # é–‹å•Ÿ YouTube driver.get(\u0026#34;https://www.youtube.com/\u0026#34;) # æ‰¾åˆ°æœå°‹æ¡†ä¸¦è¼¸å…¥é—œéµå­— search = driver.find_element(By.NAME, \u0026#34;search_query\u0026#34;) search.send_keys(\u0026#34;æ¯”ç‰¹å¹£\u0026#34;) search.send_keys(Keys.RETURN) # ç­‰å¾…æœå°‹çµæœè¼‰å…¥ WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.ID, \u0026#34;container\u0026#34;))) # å–å¾—å½±ç‰‡æ¨™é¡Œ titles = driver.find_elements(By.ID, \u0026#34;video-title\u0026#34;) for title in titles: print(title.text) # ä¿æŒç€è¦½å™¨é–‹å•Ÿï¼Œç­‰å¾…ä½¿ç”¨è€…æŒ‰ Enter éµçµæŸ input(\u0026#34;æŒ‰ Enter éµçµæŸç¨‹å¼ä¸¦é—œé–‰ç€è¦½å™¨...\u0026#34;) driver.quit() ä¸‰ã€ç¨‹å¼ç¢¼èªªæ˜ # 3.1 å•Ÿå‹• WebDriver # ç¨‹å¼æœƒæ ¹æ“š Selenium ç‰ˆæœ¬ä¾†æ±ºå®š webdriver.Chrome() çš„å‘¼å«æ–¹å¼ï¼Œç¢ºä¿ç›¸å®¹æ€§ã€‚\n3.2 é–‹å•Ÿ YouTube ä¸¦æœå°‹é—œéµå­— # ä½¿ç”¨ driver.get() æ–¹æ³•é–‹å•Ÿ YouTubeï¼Œç„¶å¾Œé€é find_element(By.NAME, \u0026quot;search_query\u0026quot;) æ‰¾åˆ°æœå°‹æ¡†ï¼Œä¸¦è¼¸å…¥ \u0026ldquo;æ¯”ç‰¹å¹£\u0026rdquo;ï¼Œæœ€å¾Œä½¿ç”¨ send_keys(Keys.RETURN) åŸ·è¡Œæœå°‹ã€‚\n3.3 ç­‰å¾…æœå°‹çµæœè¼‰å…¥ # ä½¿ç”¨ WebDriverWait ç¢ºä¿æœå°‹çµæœå·²è¼‰å…¥ï¼Œé¿å… find_elements åŸ·è¡Œæ™‚æ‰¾ä¸åˆ°ç›®æ¨™å…ƒç´ ã€‚\nWebDriverWait(driver, 10): è¨­å®šç­‰å¾…æ™‚é–“æœ€é•· 10 ç§’ã€‚ until(EC.presence_of_element_located((By.ID, \u0026quot;container\u0026quot;))): ç›´åˆ° ID ç‚º container çš„å…ƒç´ å‡ºç¾æ‰ç¹¼çºŒåŸ·è¡Œã€‚ å…¶ä»–æ¢ä»¶å¦‚ï¼š visibility_of_element_located(locator): ç¢ºä¿å…ƒç´ å¯è¦‹ã€‚ element_to_be_clickable(locator): ç¢ºä¿å…ƒç´ å¯è¢«é»æ“Šã€‚ 3.4 å–å¾—å½±ç‰‡æ¨™é¡Œ # ä½¿ç”¨ find_elements(By.ID, \u0026quot;video-title\u0026quot;) æ‰¾åˆ°æ‰€æœ‰å½±ç‰‡æ¨™é¡Œä¸¦å°å‡ºã€‚\nå››ã€æ³¨æ„äº‹é … # 4.1 ChromeDriver ç‰ˆæœ¬ # è«‹ç¢ºä¿ Chrome ç€è¦½å™¨èˆ‡ chromedriver ç‰ˆæœ¬ç›¸ç¬¦ï¼Œå¦å‰‡å¯èƒ½æœƒå‡ºéŒ¯ã€‚\n4.2 YouTube é™åˆ¶ # YouTube å¯èƒ½æœƒæª¢æ¸¬æ©Ÿå™¨äººè¡Œç‚ºï¼Œå»ºè­°é©ç•¶èª¿æ•´ WebDriverWait ä¾†æ¨¡æ“¬äººé¡æ“ä½œã€‚\näº”ã€çµè«– # é€™ç¯‡æ–‡ç« ä»‹ç´¹äº†å¦‚ä½•ä½¿ç”¨ Selenium è‡ªå‹•åŒ– YouTube æœå°‹èˆ‡çˆ¬å–å½±ç‰‡æ¨™é¡Œçš„æ–¹å¼ï¼Œé©åˆç”¨æ–¼ç ”ç©¶ç†±é–€é—œéµå­—æˆ–æ˜¯å»ºç«‹å€‹äººåŒ–çš„å½±ç‰‡æ¨è–¦ç³»çµ±ã€‚\n","date":"1 February 2025","externalUrl":null,"permalink":"/douoduublog/posts/%E4%BD%BF%E7%94%A8-selenium-%E8%87%AA%E5%8B%95%E5%8C%96-youtube-%E6%90%9C%E5%B0%8B%E8%88%87%E7%88%AC%E5%8F%96%E5%BD%B1%E7%89%87%E6%A8%99%E9%A1%8C/","section":"æ–‡ç« ","summary":"\u003ch2 class=\"relative group\"\u003eå‰è¨€ \n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\n    \n    \u003cspan\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å®šä½é»\"\u003e#\u003c/a\u003e\n    \u003c/span\u003e        \n    \n\u003c/h2\u003e\n\u003cp\u003eåœ¨é€™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°‡åˆ†äº«å¦‚ä½•ä½¿ç”¨ \u003ccode\u003eSelenium\u003c/code\u003e è‡ªå‹•æœå°‹ YouTube å½±ç‰‡ï¼Œä¸¦æŠ“å–æœå°‹çµæœçš„å½±ç‰‡æ¨™é¡Œã€‚é€™å°æ–¼æ•¸æ“šåˆ†æã€å…§å®¹æ•´ç†ï¼Œç”šè‡³æ˜¯è‡ªå‹•åŒ–å·¥å…·é–‹ç™¼éƒ½ç›¸ç•¶æœ‰å¹«åŠ©ã€‚\u003c/p\u003e","title":"ä½¿ç”¨ Selenium è‡ªå‹•åŒ– YouTube æœå°‹èˆ‡çˆ¬å–å½±ç‰‡æ¨™é¡Œ","type":"posts"},{"content":"","date":"31 January 2025","externalUrl":null,"permalink":"/douoduublog/tags/poetry/","section":"Tags","summary":"","title":"Poetry","type":"tags"},{"content":"å‰è¨€ # åœ¨é€™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°‡ä»‹ç´¹å¦‚ä½•ä½¿ç”¨ Poetry ä¾†ç®¡ç† Python ç’°å¢ƒï¼Œä¸¦å®‰è£ Selenium ä»¥é€²è¡Œç¶²é è‡ªå‹•åŒ–æ¸¬è©¦ã€‚æ­¤å¤–ï¼Œæˆ‘å€‘ä¹Ÿæœƒä¸‹è¼‰ä¸¦è¨­å®š ChromeDriverï¼Œä½¿å…¶èƒ½å¤ èˆ‡ Selenium æ­é…é‹è¡Œã€‚\nä¸€ã€å®‰è£èˆ‡åˆå§‹åŒ– Poetry # 1.1 å®‰è£ Poetryï¼ˆè‹¥å°šæœªå®‰è£ï¼‰ # å¦‚æœä½ é‚„æ²’æœ‰å®‰è£ Poetryï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ä¾†å®‰è£ï¼š\ncurl -sSL https://install.python-poetry.org | python3 - å®‰è£å®Œæˆå¾Œï¼Œä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ç¢ºèªæ˜¯å¦æˆåŠŸå®‰è£ï¼š\npoetry --version 1.2 åˆå§‹åŒ– Poetry å°ˆæ¡ˆ # ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ä¾†åˆå§‹åŒ–ä¸€å€‹æ–°çš„ Poetry å°ˆæ¡ˆï¼š\npoetry init é€™å€‹æŒ‡ä»¤æœƒå¼•å°ä½ è¼¸å…¥ä¸€äº›å°ˆæ¡ˆè³‡è¨Šï¼ˆåç¨±ã€ç‰ˆæœ¬ã€æè¿°ç­‰ï¼‰ï¼Œä½ å¯ä»¥æ ¹æ“šéœ€æ±‚å¡«å¯«ï¼Œæˆ–ç›´æ¥æŒ‰ Enter è·³éã€‚\näºŒã€å•Ÿå‹•è™›æ“¬ç’°å¢ƒä¸¦å®‰è£ Selenium # 2.1 å•Ÿå‹•è™›æ“¬ç’°å¢ƒ # åœ¨ Poetry åˆå§‹åŒ–å®Œæˆå¾Œï¼Œä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤é€²å…¥è™›æ“¬ç’°å¢ƒï¼š\npoetry shell 2.2 å®‰è£ Selenium # å®‰è£ Selenium ä¸¦å°‡å…¶è¨˜éŒ„åˆ° pyproject.toml å…§ï¼Œç¢ºä¿ç’°å¢ƒçš„å¯é‡ç¾æ€§ï¼š\npoetry add selenium ä¸‰ã€ä¸‹è¼‰ä¸¦è¨­å®š ChromeDriver # 3.1 ç¢ºèª Chrome ç‰ˆæœ¬ # é–‹å•Ÿ Chrome ç€è¦½å™¨ã€‚ åœ¨ç¶²å€åˆ—è¼¸å…¥ï¼š chrome://settings/help è¨˜ä¸‹ Chrome çš„ç‰ˆæœ¬è™Ÿï¼Œä¾‹å¦‚ 120.0.6099.129ã€‚ 3.2 ä¸‹è¼‰ ChromeDriver # å‰å¾€ Chrome for Testing å®˜æ–¹ç¶²ç«™ï¼Œä¸‹è¼‰èˆ‡ä½ çš„ Chrome ç‰ˆæœ¬ç›¸ç¬¦çš„ chromedriverã€‚\nApple Silicon (M1/M2/M3)ï¼šä¸‹è¼‰ chromedriver-mac-arm64.zip Intel Macï¼šä¸‹è¼‰ chromedriver-mac-x64.zip 3.3 è§£å£“ç¸®ä¸¦è¨­å®š ChromeDriver # ä¸‹è¼‰å¾Œï¼Œæ‰“é–‹çµ‚ç«¯æ©Ÿä¸¦è¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤ä¾†è§£å£“ç¸®ï¼š\ncd ~/Downloads unzip chromedriver-mac-arm64.zip -d ~/Desktop/ ç¢ºä¿å®ƒæœ‰åŸ·è¡Œæ¬Šé™ï¼š\nchmod +x ~/Desktop/chromedriver å››ã€æ’°å¯« Selenium æ¸¬è©¦ç¨‹å¼ # 4.1 é–‹å•Ÿç€è¦½å™¨ # å»ºç«‹ä¸€å€‹ practice.pyï¼Œä¸¦å¯«å…¥ä»¥ä¸‹ç¨‹å¼ç¢¼ä¾†é–‹å•Ÿä¸€å€‹ç©ºç™½çš„ Chrome ç€è¦½å™¨ï¼š\nfrom selenium import webdriver from selenium.webdriver.chrome.service import Service import selenium PATH = \u0026#34;/Users/doudouu0504/Desktop/chromedriver\u0026#34; driver = webdriver.Chrome(service=Service(PATH)) driver.get(\u0026#34;about:blank\u0026#34;) input(\u0026#34;æŒ‰ Enter éµä»¥çµæŸç¨‹å¼ä¸¦é—œé–‰ç€è¦½å™¨...\u0026#34;)#é€™æ¨£é é¢å°±ä¸æœƒä¸€é–ƒè€Œé driver.quit() 4.2 åŸ·è¡Œæ¸¬è©¦ # åŸ·è¡Œç¨‹å¼ï¼š\npython practice.py å¦‚æœæ²’æœ‰éŒ¯èª¤ï¼Œå‰‡è¡¨ç¤ºä½ çš„ Selenium å’Œ ChromeDriver éƒ½å·²æˆåŠŸå®‰è£ï¼\nè«‹è¨˜å¾—è¦åœ¨çµ‚ç«¯æ©ŸæŒ‰ä¸‹ Enter éµï¼Œä¸ç„¶æœƒä¸€ç›´é–‹è‘—ç€è¦½å™¨ã€‚\näº”ã€æŠ“å–ç¶²é æ¨™é¡Œ # 5.1 æ’°å¯«æŠ“å–æ¨™é¡Œç¨‹å¼ç¢¼ # å¦‚æœä½ æƒ³è¦æŠ“å–æŸå€‹ç¶²é çš„æ¨™é¡Œï¼Œä¾‹å¦‚ Dcard é¦–é ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š\nfrom selenium import webdriver from selenium.webdriver.chrome.service import Service import selenium PATH = \u0026#34;/Users/doudouu0504/Desktop/chromedriver\u0026#34; driver = webdriver.Chrome(service=Service(PATH)) driver.get(\u0026#34;https://www.dcard.tw/f\u0026#34;) print(driver.title) # input(\u0026#34;æŒ‰ Enter éµä»¥çµæŸç¨‹å¼ä¸¦é—œé–‰ç€è¦½å™¨...\u0026#34;) driver.quit() 5.2 åŸ·è¡Œä¸¦é©—è­‰ # åŸ·è¡Œå¾Œï¼Œçµ‚ç«¯æ©Ÿæ‡‰è©²æœƒé¡¯ç¤º Dcard çš„æ¨™é¡Œã€‚\næç¤ºï¼šinput(\u0026quot;æŒ‰ Enter éµä»¥çµæŸç¨‹å¼ä¸¦é—œé–‰ç€è¦½å™¨...\u0026quot;) é€™ä¸€è¡Œå¯ä»¥é¸æ“‡æ€§ä¿ç•™ï¼Œç•¶ä½ å¸Œæœ›æ‰‹å‹•é—œé–‰ç€è¦½å™¨æ™‚æ‰ä½¿ç”¨ã€‚\nå…­ã€çµè«– # é€é Poetryï¼Œæˆ‘å€‘å¯ä»¥æ–¹ä¾¿åœ°ç®¡ç† Python å°ˆæ¡ˆçš„ç’°å¢ƒèˆ‡ä¾è³´ï¼Œè€Œ Selenium å‰‡è®“æˆ‘å€‘èƒ½å¤ è¼•é¬†åœ°è‡ªå‹•åŒ–æ“ä½œç¶²é ã€‚æ­¤å¤–ï¼Œæˆ‘å€‘å­¸ç¿’äº†å¦‚ä½•ä¸‹è¼‰ä¸¦è§£å£“ç¸® ChromeDriver åˆ°æ¡Œé¢ï¼Œä¸¦ä½¿ç”¨ Selenium ä¾†æŠ“å–ç¶²é æ¨™é¡Œã€‚\nå¸Œæœ›é€™ç¯‡æ–‡ç« èƒ½å¹«åŠ©ä½ é †åˆ©å®Œæˆ Selenium çš„å®‰è£èˆ‡æ¸¬è©¦ï¼\n","date":"31 January 2025","externalUrl":null,"permalink":"/douoduublog/posts/%E4%BD%BF%E7%94%A8-poetry-%E5%AE%89%E8%A3%9D-selenium-%E4%B8%A6%E4%B8%8B%E8%BC%89-chromedriver/","section":"æ–‡ç« ","summary":"\u003ch2 class=\"relative group\"\u003eå‰è¨€ \n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\n    \n    \u003cspan\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å®šä½é»\"\u003e#\u003c/a\u003e\n    \u003c/span\u003e        \n    \n\u003c/h2\u003e\n\u003cp\u003eåœ¨é€™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°‡ä»‹ç´¹å¦‚ä½•ä½¿ç”¨ Poetry ä¾†ç®¡ç† Python ç’°å¢ƒï¼Œä¸¦å®‰è£ Selenium ä»¥é€²è¡Œç¶²é è‡ªå‹•åŒ–æ¸¬è©¦ã€‚æ­¤å¤–ï¼Œæˆ‘å€‘ä¹Ÿæœƒä¸‹è¼‰ä¸¦è¨­å®š ChromeDriverï¼Œä½¿å…¶èƒ½å¤ èˆ‡ Selenium æ­é…é‹è¡Œã€‚\u003c/p\u003e","title":"ä½¿ç”¨ Poetry å®‰è£ Selenium ä¸¦ä¸‹è¼‰ ChromeDriver","type":"posts"},{"content":"","date":"8 January 2025","externalUrl":null,"permalink":"/douoduublog/tags/django/","section":"Tags","summary":"","title":"Django","type":"tags"},{"content":"å‰è¨€ # æœ¬æ–‡å°‡è©³ç´°è¬›è§£å¦‚ä½•åœ¨ Django ä¸­å¯¦ç¾å¿˜è¨˜å¯†ç¢¼åŠŸèƒ½ï¼Œä¸¦å®Œæ•´æ¼”ç¤º Gmail SMTP é…ç½®çš„æ¯ä¸€æ­¥é©Ÿï¼Œå¹«åŠ©æ‚¨å¿«é€Ÿéƒ¨ç½²ä¿¡ä»¶æœå‹™ã€‚é€™å€‹åŠŸèƒ½æœƒåˆ©ç”¨ Gmail ä½œç‚ºä¿¡ä»¶ä¼ºæœï¼Œä¸¦ä½¿ç”¨ Google æ‡‰ç”¨å°ˆç”¨å¯†ç¢¼é€²è¡Œä¼ºæœå™¨å¸³è™Ÿçš„ç™»å…¥ä¸²æ¥ã€‚\nSMTP è§£èªª # æ­¤ç¯‡æ–‡ç« æ˜¯ä½¿ç”¨ SMTPï¼ˆSimple Mail Transfer Protocolï¼‰ä¾†å¯¦ç¾é›»å­éƒµä»¶åŠŸèƒ½çš„æ‡‰ç”¨ã€‚SMTP æ˜¯ä¸€ç¨®å‚³é€é›»å­éƒµä»¶çš„é€šè¨Šå”è­°ã€‚åœ¨é€™å€‹å¯¦ç¾ä¸­ï¼Œæˆ‘å€‘ä½¿ç”¨äº† Gmail çš„ SMTP æœå‹™ï¼Œé€šé Django çš„å…§å»ºéƒµä»¶å¾Œç«¯å°‡å¯†ç¢¼é‡ç½®ç›¸é—œçš„é›»å­éƒµä»¶ç™¼é€çµ¦ç”¨æˆ¶ã€‚\nå…·é«”ä¾†èªªï¼Œé€™è£¡çš„è¨­å®šåŒ…æ‹¬ï¼š\nä½¿ç”¨ Gmail çš„ SMTP æœå‹™å™¨ (smtp.gmail.com)ã€‚ å•Ÿç”¨ TLS åŠ å¯†ï¼ˆåœ¨ 587 ç«¯å£ä¸Šï¼‰ä¾†ä¿è­·å‚³è¼¸éç¨‹ã€‚ ä½¿ç”¨ Google çš„æ‡‰ç”¨å°ˆç”¨å¯†ç¢¼ï¼ˆEMAIL_HOST_PASSWORDï¼‰ä¾†é€²è¡Œèº«ä»½é©—è­‰ã€‚ SMTP æ˜¯é€™å€‹åŠŸèƒ½çš„åŸºç¤å”è­°ï¼Œè€Œ Google æ‡‰ç”¨å°ˆç”¨å¯†ç¢¼ç¢ºä¿äº† Gmail è³¬æˆ¶çš„å®‰å…¨æ€§ï¼Œå› ç‚ºå®ƒå…è¨±æ‚¨åœ¨ä¸æš´éœ²ä¸»å¯†ç¢¼çš„æƒ…æ³ä¸‹ç‚ºç‰¹å®šæ‡‰ç”¨ç”Ÿæˆå°ˆç”¨å¯†ç¢¼ã€‚\nä¸€ã€Django å¿˜è¨˜å¯†ç¢¼åŠŸèƒ½å®Œæ•´æ•™å­¸ï¼ˆåŒ…å« SMTP é…ç½®æŒ‡å—ï¼‰ # 1.1 è¨­å®š Google æ‡‰ç”¨å°ˆç”¨å¯†ç¢¼ # åœ¨ä½¿ç”¨ Gmail ç™¼é€ä¿¡ä»¶å‰ï¼Œæ‚¨éœ€è¦åœ¨ Google å¸³è™Ÿä¸­ç”Ÿæˆæ‡‰ç”¨å°ˆç”¨å¯†ç¢¼ï¼š\nå‰å¾€ Google å®‰å…¨è¨­å®š \u0026gt; å•Ÿç”¨ \u0026ldquo;é›»å­éƒµä»¶çš„å…¥å£\u0026quot;åŠŸèƒ½ã€‚ å®Œæˆé©—è­‰å¾Œï¼Œå‘ä¸‹æ²å‹•åˆ° \u0026ldquo;æ‡‰ç”¨ç¨‹å¼å¯†ç¢¼\u0026rdquo; å€åŸŸï¼Œé»é¸ \u0026ldquo;ç”Ÿæˆå¯†ç¢¼\u0026rdquo;ã€‚ï¼ˆä¹Ÿå¯ä»¥åœ¨æœå°‹æ¬„æœå°‹é—œéµå­—ï¼‰ é¸æ“‡æ‡‰ç”¨é¡å‹ç‚º \u0026ldquo;é›»å­éƒµä»¶\u0026rdquo; å’Œè£½å‚™å­—è»Ÿé«”ç‚º \u0026ldquo;åŒæ­¥é›»å­éƒµä»¶\u0026rdquo; ã€‚ è¼¸å…¥æ‡‰ç”¨ç¨‹å¼åç¨±ï¼Œæœƒç”Ÿæˆä¸€çµ„å¯†ç¢¼è«‹è¨˜ä½å®ƒã€‚ å°‡ç”Ÿæˆçš„å¯†ç¢¼å¡«å…¥ .env æª”æ¡ˆé€²è¡Œç‰ˆæ§ã€‚ 1.2 å°ˆæ¡ˆè¨­ç½® # åœ¨ settings.py é…ç½® Django çš„ Gmail SMTP ä¿¡ä»¶æœå‹™ï¼š\nimport os from dotenv import load_dotenv # è¨­ç½® Gmail ç™¼é€ä¿¡ä»¶ EMAIL_BACKEND = \u0026#34;django.core.mail.backends.smtp.EmailBackend\u0026#34; # ä½¿ç”¨ SMTP æœå‹™ç™¼é€éƒµä»¶ EMAIL_HOST = \u0026#34;smtp.gmail.com\u0026#34; # æŒ‡å®š Gmail SMTP æœå‹™å™¨ EMAIL_PORT = 587 # Gmail SMTP ä½¿ç”¨çš„ç«¯å£ EMAIL_USE_TLS = True # å•Ÿç”¨ TLS åŠ å¯† EMAIL_USE_SSL = False # ä¸ä½¿ç”¨ SSL åŠ å¯† EMAIL_HOST_USER = os.getenv(\u0026#34;EMAIL_HOST_USER\u0026#34;) # Gmail åœ°å€ EMAIL_HOST_PASSWORD = os.getenv(\u0026#34;EMAIL_HOST_PASSWORD\u0026#34;) # Gmail å¯†ç¢¼ DEFAULT_FROM_EMAIL = \u0026#34;ä¸‰åˆå¹³å° \u0026lt;youremail@gmail.com\u0026gt;\u0026#34; # æŒ‡å®šåŸºç¤åŸŸå # æ›¿æ› `DEFAULT_DOMAIN` å’Œ `PROTOCOL` ç‚ºæ‚¨çš„é–‹ç™¼ç’°å¢ƒ DEFAULT_DOMAIN = os.getenv(\u0026#34;DEFAULT_DOMAIN\u0026#34;, \u0026#34;localhost:8000\u0026#34;) PROTOCOL = os.getenv(\u0026#34;PROTOCOL\u0026#34;, \u0026#34;http\u0026#34;) LANGUAGE_CODE = \u0026#34;zh-hant\u0026#34; #è¨­ç½®ç‚ºä¸­æ–‡ EMAIL_HOST_USER èˆ‡ EMAIL_HOST_PASSWORDå·²ç¶“æ¥å—ç‰ˆæœ¬æ§åˆ¶ï¼Œ.env å…§å®¹å‰è€…ç‚ºæ‚¨çš„ Emailï¼Œå¾Œè€…ç‚º Gmail æä¾›çµ¦æ‚¨çš„å¯†ç¢¼ã€‚ DEFAULT_DOMAINèˆ‡PROTOCOLï¼Œåœ¨æ¸¬è©¦ç’°å¢ƒä¸‹ï¼ŒåŸºç¤è¨­ç½®ï¼Œ.env å…§å®¹å‰è€…ç‚º 127.0.0.1:8000ï¼Œå¾Œè€…ç‚º httpã€‚ .env æª”æ¡ˆçš„ç¯„ä¾‹ï¼š\nEMAIL_HOST_USER=your_email@gmail.com\nEMAIL_HOST_PASSWORD=your_app_password\nDEFAULT_DOMAIN=127.0.0.1:8000\näºŒã€ä½¿ç”¨è·¯å¾‘èˆ‡è¨­è¨ˆè§€å¿µ # å¿˜è¨˜å¯†ç¢¼åŠŸèƒ½ä¾è³´ Django çš„å…§å»ºåŠŸèƒ½ï¼ŒåŒ…æ‹¬äº†ä»¥ä¸‹è·¯ç”±å’Œè§€å¿µå¯¦ç¾ï¼š\n2.2 é…ç½® URLs # åœ¨ users/urls.py ä¸­é…ç½®ç›¸é—œè·¯ç”±ï¼š\nfrom .views import ( CustomPasswordResetView, CustomPasswordResetDoneView, CustomPasswordResetConfirmView, CustomPasswordResetCompleteView, ) urlpatterns = [ path(\u0026#34;password_reset/\u0026#34;, CustomPasswordResetView.as_view(), name=\u0026#34;password_reset\u0026#34;), path(\u0026#34;password_reset_done/\u0026#34;, CustomPasswordResetDoneView.as_view(), name=\u0026#34;password_reset_done\u0026#34;), path(\u0026#34;reset/\u0026lt;uidb64\u0026gt;/\u0026lt;token\u0026gt;/\u0026#34;, CustomPasswordResetConfirmView.as_view(), name=\u0026#34;password_reset_confirm\u0026#34;), path(\u0026#34;reset_done/\u0026#34;, CustomPasswordResetCompleteView.as_view(), name=\u0026#34;password_reset_complete\u0026#34;), ] 2.3 æ ¹ç›®éŒ„çš„ URL é…ç½®ï¼šç‚º Django å¿˜è¨˜å¯†ç¢¼åŠŸèƒ½è¨­ç½®è·¯å¾‘ # åœ¨æ ¹ç›®éŒ„core/urls.py ä¸­å¢åŠ è·¯å¾‘ï¼š\npath(\u0026#34;users/\u0026#34;, include(\u0026#34;users.urls\u0026#34;, namespace=\u0026#34;users\u0026#34;)), ä¸‰ã€å®šç¾©æµç¨‹æ§åˆ¶ View # åœ¨ users/views.py åŸ·è¡Œï¼Œä»¥ä¸‹è‡ªå®šç¾©çš„ View å…§å®¹ï¼š\n3.1 CustomPasswordResetView # from django.conf import settings from django.contrib.auth import views as auth_views from django.utils.encoding import force_bytes from django.contrib.auth.tokens import default_token_generator from django.core.mail import EmailMessage from django.template.loader import render_to_string from django.utils.http import urlsafe_base64_encode class CustomPasswordResetView(auth_views.PasswordResetView): template_name = \u0026#34;users/password_reset.html\u0026#34; email_template_name = \u0026#34;users/password_reset_email.html\u0026#34; subject_template_name = \u0026#34;users/password_reset_subject.txt\u0026#34; # è‡ªå®šç¾©éƒµä»¶æ¨™é¡Œæ¨¡æ¿ success_url = \u0026#34;/users/password_reset_done/\u0026#34; extra_context = { \u0026#34;protocol\u0026#34;: settings.PROTOCOL, \u0026#34;domain\u0026#34;: settings.DEFAULT_DOMAIN, } def form_valid(self, form): \u0026#34;\u0026#34;\u0026#34;è¦†è“‹éƒµä»¶ç™¼é€é‚è¼¯ï¼Œé¿å…é‡è¤‡ç™¼é€\u0026#34;\u0026#34;\u0026#34; email = form.cleaned_data[\u0026#34;email\u0026#34;] for user in form.get_users(email): context = { \u0026#34;email\u0026#34;: email, \u0026#34;domain\u0026#34;: settings.DEFAULT_DOMAIN, \u0026#34;protocol\u0026#34;: settings.PROTOCOL, \u0026#34;uid\u0026#34;: urlsafe_base64_encode(force_bytes(user.pk)), \u0026#34;token\u0026#34;: default_token_generator.make_token(user), } subject = render_to_string(self.subject_template_name, context).strip() html_message = render_to_string(self.email_template_name, context) # ç™¼é€éƒµä»¶ email_msg = EmailMessage( subject=subject, body=html_message, from_email=settings.DEFAULT_FROM_EMAIL, to=[email], ) email_msg.content_subtype = \u0026#34;html\u0026#34; # è¨­ç½®å…§å®¹é¡å‹ç‚º HTML email_msg.send() # ä¸å†èª¿ç”¨çš„éƒµä»¶ç™¼é€é‚è¼¯ return super(auth_views.PasswordResetView, self).form_valid(form) 3.2 CustomPasswordResetDoneView # class CustomPasswordResetDoneView(auth_views.PasswordResetDoneView): template_name = \u0026#34;users/password_reset_done.html\u0026#34; 3.3 CustomPasswordResetConfirmView # class CustomPasswordResetConfirmView(auth_views.PasswordResetConfirmView): template_name = \u0026#34;users/password_reset_confirm.html\u0026#34; success_url = \u0026#34;/users/reset_done/\u0026#34; 3.4 CustomPasswordResetCompleteView # class CustomPasswordResetCompleteView(auth_views.PasswordResetCompleteView): template_name = \u0026#34;users/password_reset_complete.html\u0026#34; å››ã€ä¿¡ä»¶æ¨£æ¿ # åœ¨ users/templates/users åº•ä¸‹ï¼Œè¨­ç½®ä»¥ä¸‹æ‰€æœ‰ html ä¿¡ä»¶æ¨£æ¿\n4.1 é»é¸å¿˜è¨˜å¯†ç¢¼ç¬¬ä¸€æ­¥ # æ­¤ç‚ºç”¨æˆ¶å¿˜è¨˜å¯†ç¢¼å¯„ä»¶å‰çš„èªªæ˜ï¼Œè®“ç”¨æˆ¶å¯ä»¥è¼¸å…¥è‡ªå·±çš„ Emailï¼Œä½¿å¾—å¾Œå°å¯ä»¥å»åšç™¼ä¿¡çš„ä½œæ¥­ï¼Œåœ¨password_reset.htmlåº•ä¸‹è¼¸å…¥ï¼š\n\u0026lt;div class=\u0026#34;flex flex-col items-center justify-center min-h-screen bg-gray-100\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;w-full max-w-md p-8 bg-white rounded-lg shadow-md\u0026#34;\u0026gt; \u0026lt;h2 class=\u0026#34;mb-4 text-2xl font-semibold text-center text-gray-700\u0026#34;\u0026gt; å¿˜è¨˜å¯†ç¢¼ï¼Ÿ \u0026lt;/h2\u0026gt; \u0026lt;p class=\u0026#34;mb-6 text-center text-gray-500\u0026#34;\u0026gt; è«‹è¼¸å…¥æ‚¨çš„é›»å­éƒµä»¶åœ°å€ï¼Œæˆ‘å€‘å°‡å‘æ‚¨ç™¼é€é‡ç½®å¯†ç¢¼çš„æŒ‡ç¤ºã€‚ \u0026lt;/p\u0026gt; \u0026lt;form method=\u0026#34;post\u0026#34; class=\u0026#34;space-y-6\u0026#34;\u0026gt; {% csrf_token %} \u0026lt;div class=\u0026#34;mt-1\u0026#34;\u0026gt;{{ form.as_p }}\u0026lt;/div\u0026gt; \u0026lt;button type=\u0026#34;submit\u0026#34; class=\u0026#34;w-full px-4 py-2 text-white bg-blue-500 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\u0026#34; \u0026gt; ç™¼é€é‡ç½®é€£çµ \u0026lt;/button\u0026gt; \u0026lt;/form\u0026gt; \u0026lt;p class=\u0026#34;mt-4 text-sm text-center text-gray-600\u0026#34;\u0026gt; è¨˜å¾—å¯†ç¢¼äº†å—ï¼Ÿ \u0026lt;a href=\u0026#34;{% url \u0026#39;users:login\u0026#39; %}\u0026#34; class=\u0026#34;text-blue-500 hover:underline\u0026#34; \u0026gt;å›åˆ°ç™»å…¥é é¢\u0026lt;/a \u0026gt; \u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; 4.2 ç™¼é€ä¿¡ä»¶å‘ŠçŸ¥ # æ­¤ç‚ºå‘ŠçŸ¥ç”¨æˆ¶ç™¼é€ä¿¡ä»¶äº†ï¼Œåœ¨password_reset_done.htmlè¼¸å…¥ï¼š\n\u0026lt;div class=\u0026#34;flex flex-col items-center justify-center min-h-screen bg-gray-100\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;w-full max-w-md p-8 bg-white rounded-lg shadow-md\u0026#34;\u0026gt; \u0026lt;h2 class=\u0026#34;mb-4 text-2xl font-semibold text-center text-gray-700\u0026#34;\u0026gt; å¯†ç¢¼é‡ç½®é€£çµå·²ç™¼é€ \u0026lt;/h2\u0026gt; \u0026lt;p class=\u0026#34;mb-6 text-center text-gray-500\u0026#34;\u0026gt; æˆ‘å€‘å·²ç¶“å°‡é‡ç½®å¯†ç¢¼çš„æŒ‡ç¤ºç™¼é€åˆ°æ‚¨çš„é›»å­éƒµä»¶åœ°å€ï¼Œè«‹æª¢æŸ¥æ‚¨çš„ä¿¡ç®±ã€‚ \u0026lt;/p\u0026gt; \u0026lt;a href=\u0026#34;{% url \u0026#39;users:login\u0026#39; %}\u0026#34; class=\u0026#34;block w-full px-4 py-2 text-center text-white bg-blue-500 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\u0026#34; \u0026gt; è¿”å›ç™»å…¥é é¢ \u0026lt;/a\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; 4.3 ç™¼é€çš„ä¿¡ä»¶å…§å®¹ # ç”¨æˆ¶æœƒæ”¶åˆ°çš„æ–°å»ºå…§å®¹ï¼Œåœ¨password_reset_email.htmlè¼¸å…¥ï¼š\n\u0026lt;p\u0026gt;è¦ªæ„›çš„ç”¨æˆ¶ï¼Œæ‚¨å¥½ï¼é€™è£¡æ˜¯ä¸‰åˆæ¥æ¡ˆå¹³å°ã€‚\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt; æˆ‘å€‘æ”¶åˆ°æ‚¨é‡ç½®å¯†ç¢¼çš„ç”³è«‹ï¼Œç‚ºäº†ç¢ºä¿æ‚¨çš„å¸³è™Ÿå®‰å…¨ï¼Œè«‹é»æ“Šä»¥ä¸‹é€£çµå®Œæˆå¯†ç¢¼é‡ç½®ï¼š \u0026lt;/p\u0026gt; \u0026lt;p\u0026gt; \u0026lt;a href=\u0026#34;{{ protocol }}://{{ domain }}{% url \u0026#39;users:password_reset_confirm\u0026#39; uidb64=uid token=token %}\u0026#34; style=\u0026#34;color: #007bff; text-decoration: none; font-weight: bold\u0026#34; \u0026gt; é‡ç½®å¯†ç¢¼ \u0026lt;/a\u0026gt; \u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;è«‹æ³¨æ„ï¼šè©²é€£çµåƒ…åœ¨ä¸€æ®µæ™‚é–“å…§æœ‰æ•ˆï¼ŒéæœŸå¾Œå°‡ç„¡æ³•ä½¿ç”¨ã€‚\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;å¦‚æœæ‚¨ä¸¦æœªç™¼èµ·æ­¤æ“ä½œï¼Œè«‹å¿½ç•¥æ­¤éƒµä»¶ï¼Œç„¡éœ€é€²è¡Œä»»ä½•æ“ä½œã€‚\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt; æ„Ÿè¬æ‚¨ä½¿ç”¨ã€Œä¸‰åˆã€æ¥æ¡ˆå¹³å°ï¼å¦‚æœ‰ä»»ä½•ç–‘å•æˆ–éœ€è¦å¹«åŠ©ï¼Œè«‹éš¨æ™‚è¯ç¹«æˆ‘å€‘çš„å®¢æœåœ˜éšŠï¼Œæˆ‘å€‘å°‡ç«­èª ç‚ºæ‚¨æœå‹™ã€‚ \u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;ç¥é †åˆ©ï¼\u0026lt;br /\u0026gt;ä¸‰åˆåœ˜éšŠ\u0026lt;/p\u0026gt; 4.4 é‡ç½®å¯†ç¢¼ # ç”¨æˆ¶é»æ“Šä¿¡ä»¶å…§å®¹çš„ã€Œ é‡ç½®å¯†ç¢¼ ã€å¾Œï¼Œæœƒéœ€è¦è¼¸å…¥æ–°çš„å¯†ç¢¼åšç¢ºèªï¼Œåœ¨password_reset_confirm.htmlè¼¸å…¥ï¼š\n\u0026lt;div class=\u0026#34;flex flex-col items-center justify-center min-h-screen bg-gray-100\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;w-full max-w-md p-8 bg-white rounded-lg shadow-md\u0026#34;\u0026gt; \u0026lt;h2 class=\u0026#34;mb-4 text-2xl font-semibold text-center text-gray-700\u0026#34;\u0026gt; é‡ç½®æ‚¨çš„å¯†ç¢¼ \u0026lt;/h2\u0026gt; \u0026lt;form method=\u0026#34;post\u0026#34; class=\u0026#34;space-y-6\u0026#34;\u0026gt; {% csrf_token %} \u0026lt;div class=\u0026#34;space-y-4\u0026#34;\u0026gt; \u0026lt;div\u0026gt; \u0026lt;label for=\u0026#34;id_new_password1\u0026#34; class=\u0026#34;block text-sm font-medium text-gray-700 break-words\u0026#34; \u0026gt; æ–°å¯†ç¢¼ï¼š\u0026lt;/label \u0026gt; \u0026lt;input type=\u0026#34;password\u0026#34; name=\u0026#34;new_password1\u0026#34; id=\u0026#34;id_new_password1\u0026#34; class=\u0026#34;block w-full px-3 py-2 mt-1 text-gray-700 placeholder-gray-400 bg-white border border- gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm\u0026#34; placeholder=\u0026#34;è«‹è¼¸å…¥æ–°å¯†ç¢¼\u0026#34; /\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div\u0026gt; \u0026lt;label for=\u0026#34;id_new_password2\u0026#34; class=\u0026#34;block text-sm font-medium text-gray-700 break-words\u0026#34; \u0026gt; æ–°å¯†ç¢¼ç¢ºèªï¼š\u0026lt;/label \u0026gt; \u0026lt;input type=\u0026#34;password\u0026#34; name=\u0026#34;new_password2\u0026#34; id=\u0026#34;id_new_password2\u0026#34; class=\u0026#34;block w-full px-3 py-2 mt-1 text-gray-700 placeholder-gray-400 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm\u0026#34; placeholder=\u0026#34;è«‹å†æ¬¡è¼¸å…¥æ–°å¯†ç¢¼\u0026#34; /\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;button type=\u0026#34;submit\u0026#34; class=\u0026#34;w-full px-4 py-2 text-white bg-blue-500 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\u0026#34; \u0026gt; ä¿®æ”¹å¯†ç¢¼ \u0026lt;/button\u0026gt; \u0026lt;/form\u0026gt; \u0026lt;p class=\u0026#34;mt-4 text-sm text-center text-gray-600\u0026#34;\u0026gt; æƒ³èµ·å¯†ç¢¼äº†å—ï¼Ÿ \u0026lt;a href=\u0026#34;{% url \u0026#39;users:login\u0026#39; %}\u0026#34; class=\u0026#34;text-blue-500 hover:underline\u0026#34;\u0026gt; è¿”å›ç™»å…¥é é¢ \u0026lt;/a\u0026gt; \u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; 4.4 é‡ç½®å¯†ç¢¼ # æœ€å¾Œå®Œæˆé‡ç½®å¯†ç¢¼å¾Œï¼Œæœƒæœ‰çš„å®Œæˆé é¢ï¼Œå¢åŠ ç”¨æˆ¶é«”é©—ï¼Œåœ¨password_reset_complete.htmlè¼¸å…¥ï¼š\n\u0026lt;div class=\u0026#34;flex flex-col items-center justify-center min-h-screen bg-gray-100\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;w-full max-w-md p-8 bg-white rounded-lg shadow-md\u0026#34;\u0026gt; \u0026lt;h1 class=\u0026#34;mb-6 text-2xl font-semibold text-center text-gray-700\u0026#34;\u0026gt; å¯†ç¢¼é‡ç½®æˆåŠŸ \u0026lt;/h1\u0026gt; \u0026lt;p class=\u0026#34;mb-6 text-center text-gray-500\u0026#34;\u0026gt; æ‚¨çš„å¯†ç¢¼å·²ç¶“æˆåŠŸé‡ç½®ï¼Œæ‚¨ç¾åœ¨å¯ä»¥ä½¿ç”¨æ–°å¯†ç¢¼ï¼ \u0026lt;/p\u0026gt; \u0026lt;div class=\u0026#34;text-center\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;{% url \u0026#39;users:login\u0026#39; %}\u0026#34; class=\u0026#34;inline-block px-6 py-2 text-white bg-blue-500 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\u0026#34; \u0026gt; è¿”å›ç™»å…¥é é¢ \u0026lt;/a\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; 4.5 ä¿¡ä»¶æ¨™é¡Œ # æœ€å¾Œï¼Œè‹¥æ˜¯æƒ³å¢åŠ ç”¨æˆ¶é«”é©—ï¼Œä¹Ÿå¯ä»¥æ–°å¢æ¨™é¡Œï¼Œåœ¨password_reset_subject.txtè¼¸å…¥ï¼š\nä¸‰åˆæ¥æ¡ˆå¹³å°ï¼šå¯†ç¢¼é€šçŸ¥ äº”ã€ä¸»è¦çµæ§‹æ¸…å–® # users/ â”œâ”€â”€ urls.py â”œâ”€â”€ views.py â”œâ”€â”€ templates/ â”‚ â”œâ”€â”€ users/ â”‚ â”œâ”€â”€ password_reset.html â”‚ â”œâ”€â”€ password_reset_done.html â”‚ â”œâ”€â”€ password_reset_confirm.html â”‚ â”œâ”€â”€ password_reset_complete.html â”‚ â”œâ”€â”€ password_reset_subject.txt å…­ã€çµè«– # æœ¬æ–‡å®Œæ•´å±•ç¤ºäº† Django å¿˜è¨˜å¯†ç¢¼åŠŸèƒ½çš„å¯¦ç¾éç¨‹ï¼Œå¾ Gmail SMTP é…ç½®åˆ°è·¯ç”±è¨­ç½®èˆ‡ä¿¡ä»¶æ¨¡æ¿ç·¨å¯«ï¼Œå¹«åŠ©æ‚¨å¿«é€Ÿå®Œæˆç›¸é—œåŠŸèƒ½é–‹ç™¼ã€‚å¦‚éœ€é€²ä¸€æ­¥äº†è§£ï¼Œè«‹åƒè€ƒã€ŒDjango éƒµä»¶ç™¼é€æŒ‡å—ã€æˆ–å®˜æ–¹æ–‡æª”ã€‚\nåƒè€ƒæ–‡æª”ï¼š\nDjango å®˜æ–¹æ–‡æª”\n","date":"8 January 2025","externalUrl":null,"permalink":"/douoduublog/posts/django-%E5%BF%98%E8%A8%98%E5%AF%86%E7%A2%BC%E6%95%99%E5%AD%B8%E4%BD%BF%E7%94%A8-gmail-smtp-%E5%AE%8C%E6%95%B4%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97/","section":"æ–‡ç« ","summary":"\u003ch2 class=\"relative group\"\u003eå‰è¨€ \n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\n    \n    \u003cspan\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å®šä½é»\"\u003e#\u003c/a\u003e\n    \u003c/span\u003e        \n    \n\u003c/h2\u003e\n\u003cp\u003eæœ¬æ–‡å°‡è©³ç´°è¬›è§£å¦‚ä½•åœ¨ Django ä¸­å¯¦ç¾å¿˜è¨˜å¯†ç¢¼åŠŸèƒ½ï¼Œä¸¦å®Œæ•´æ¼”ç¤º Gmail SMTP é…ç½®çš„æ¯ä¸€æ­¥é©Ÿï¼Œå¹«åŠ©æ‚¨å¿«é€Ÿéƒ¨ç½²ä¿¡ä»¶æœå‹™ã€‚é€™å€‹åŠŸèƒ½æœƒåˆ©ç”¨ Gmail ä½œç‚ºä¿¡ä»¶ä¼ºæœï¼Œä¸¦ä½¿ç”¨ Google æ‡‰ç”¨å°ˆç”¨å¯†ç¢¼é€²è¡Œä¼ºæœå™¨å¸³è™Ÿçš„ç™»å…¥ä¸²æ¥ã€‚\u003c/p\u003e","title":"Django å¿˜è¨˜å¯†ç¢¼æ•™å­¸ï¼šä½¿ç”¨ Gmail SMTP å®Œæ•´é…ç½®æŒ‡å—","type":"posts"},{"content":"","date":"8 January 2025","externalUrl":null,"permalink":"/douoduublog/tags/smtp%E5%AF%84%E4%BB%B6%E6%95%99%E5%AD%B8/","section":"Tags","summary":"","title":"SMTPå¯„ä»¶æ•™å­¸","type":"tags"},{"content":"","date":"8 January 2025","externalUrl":null,"permalink":"/douoduublog/tags/%E5%BF%98%E8%A8%98%E5%AF%86%E7%A2%BC%E5%8A%9F%E8%83%BD/","section":"Tags","summary":"","title":"å¿˜è¨˜å¯†ç¢¼åŠŸèƒ½","type":"tags"},{"content":"å‰è¨€ # é‡‘æµåŠŸèƒ½æ˜¯ç¾ä»£ç¶²ç«™å¿…ä¸å¯å°‘çš„å•†æ¥­åŒ–åŠŸèƒ½ä¹‹ä¸€ã€‚æœ¬æ–‡ä¸­ï¼Œå°‡æŒ‡å°å¦‚ä½•åœ¨ Django æ¡†æ¶ä¸­ç¶“ç”±ç¶ ç•Œé‡‘æµå®Œæˆæ”¯ä»˜åŠŸèƒ½çš„ä¸²æ¥ã€‚æœ€çµ‚å°‡å¯¦ç¾ä¸€å€‹åŒ…æ‹¬æœå‹™é¸æ“‡ã€è¨‚å–®ç®¡ç†å’Œæ”¯ä»˜æ¸…ç®—çš„å®Œæ•´æµç¨‹ã€‚\næµç¨‹åœ– # ä¸€ã€é‡å°ç¶ ç•Œé‡‘æµé€²è¡Œè¨»å†Š # åœ¨é–‹å§‹å‰ï¼Œæ‚¨éœ€è¦å…ˆåœ¨ç¶ ç•Œé‡‘æµå¹³å°ä¸Šè¨»å†Šä¸€å€‹å¸³è™Ÿã€‚è¨»å†Šæ­¥é©Ÿå¦‚ä¸‹ï¼š\nç™»å…¥ç¶ ç•Œé‡‘æµå¹³å°ï¼Œé€£çµï¼šhttps://www.ecpay.com.tw/ é»æ“Šé é¢ä¸Šæ–¹çš„ã€Œè¨»å†Šã€ï¼Œå¡«å¯«æ‚¨çš„ä¼æ¥­è³‡æ–™å’Œè¯çµ¡æ–¹å¼ã€‚ é€éé©—è­‰å®Œæˆè¨»å†Šå¾Œï¼Œç™»å…¥å¸³è™Ÿã€‚ é€²å…¥ç®¡ç†ä»‹é¢ï¼Œè¨­å®šé‡‘æµç¶²é–±é€£æ¥ï¼ˆå¦‚ ReturnURL å’Œ OrderResultURLï¼‰ã€‚ åœ¨æ‚¨çš„å¸³è™Ÿä¸­å°å‡º MerchantIDã€HashKey å’Œ HashIVï¼Œé€™æ˜¯é‡‘æµä¸²æ¥çš„é‡è¦åƒæ•¸ã€‚ 1.1 æ¸¬è©¦ç’°å¢ƒ # è‹¥æ­£åœ¨é€²è¡Œé–‹ç™¼æˆ–æ¸¬è©¦ï¼Œå¯ä»¥ä½¿ç”¨ç¶ ç•Œæä¾›çš„æ¸¬è©¦ç’°å¢ƒåƒæ•¸ï¼š\nMerchantID: 3002607 HashKey: pwFHCqoQZGmho4w6 HashIV: EkRm7iFT261dpevs ECPay URL: https://payment-stage.ecpay.com.tw/Cashier/AioCheckOut/V5 é€™äº›åƒæ•¸ç‚ºç¶ ç•Œæä¾›çš„æ¸¬è©¦ç”¨è³‡è¨Šï¼Œåƒ…é©ç”¨æ–¼æ¸¬è©¦ç’°å¢ƒã€‚æ­£å¼ä¸Šç·šæ™‚ï¼Œè«‹è¨˜å¾—åˆ‡æ›ç‚ºç¶ ç•Œæä¾›çš„æ­£å¼ç’°å¢ƒåƒæ•¸ã€‚\näºŒã€ç’°å¢ƒè¨­ç½®èˆ‡åŸ·è¡Œæ­¥é©Ÿ # åœ¨æ­£å¼é€²è¡Œé–‹ç™¼ä¹‹å‰ï¼Œè«‹ç¢ºä¿æ‚¨å·²å®Œæˆä»¥ä¸‹ç’°å¢ƒè¨­ç½®æ­¥é©Ÿï¼š\nå®‰è£å¿…è¦çš„ Python å¥—ä»¶ï¼š pip install django å‰µå»ºä¸¦å•Ÿå‹•æ–°çš„ Django å°ˆæ¡ˆï¼š django-admin startproject myproject . python manage.py startapp order python manage.py startapp services ç‚ºä»€éº¼éœ€è¦å»ºç«‹ order å’Œ services æ‡‰ç”¨ï¼Ÿ # æœ¬å°ˆæ¡ˆåˆ†äº«çš„æ˜¯ä¸€å€‹æ¨¡ä»¿åœ‹å¤–æ¥æ¡ˆå¹³å° Fiverr çš„æ¥æ¡ˆå¹³å°ï¼Œä¸»è¦æ˜¯ä¸€å€‹æ¥æ¡ˆè€…å¯ä»¥æœ‰å¤šå€‹æœå‹™æ–¹æ¡ˆï¼Œæ¯å€‹æœå‹™æ–¹æ¡ˆæœ‰ä¸€èˆ¬æ–¹æ¡ˆèˆ‡å°ˆæ¥­æ–¹æ¡ˆï¼Œæ¶ˆè²»è€…å¯ä»¥é¸æ“‡ä¸åŒçš„æœå‹™æ–¹æ¡ˆå»ä¸‹å–®ã€‚\norder å’Œ services æ‡‰ç”¨æ˜¯å…¶æ ¸å¿ƒéƒ¨åˆ†ï¼š\norder è² è²¬ç®¡ç†è¨‚å–®ï¼Œç”¨æˆ¶å¯ä»¥å°æ¯å€‹ service ä¸‹è¨‚å–®ã€‚ services ç”¨æ–¼å®šç¾©å¹³å°ä¸Šçš„æœå‹™ï¼Œä¾‹å¦‚ä¸åŒçš„æ–¹æ¡ˆï¼ˆStandard å’Œ Premiumï¼‰ã€‚\né€šéé€™æ¨£çš„è¨­è¨ˆï¼Œæ¸…æ™°åœ°å°‡è¨‚å–®å’Œæœå‹™é‚è¼¯åˆ†é–‹ï¼Œä¾¿æ–¼å¾ŒçºŒç¶­è­·å’Œæ“´å±•ã€‚ å°‡æ‡‰ç”¨ order å’Œ services æ·»åŠ åˆ° settings.py ä¸­çš„ INSTALLED_APPS åˆ—è¡¨ã€‚\nå»ºç«‹è³‡æ–™åº«é·ç§»æª”ä¸¦åŸ·è¡Œé·ç§»ï¼š\npython manage.py makemigrations python manage.py migrate å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ï¼š python manage.py runserver ä¼ºæœå™¨å•Ÿå‹•å¾Œï¼Œè¨ªå• http://127.0.0.1:8000 ç¢ºä¿é …ç›®é‹è¡Œæ­£å¸¸ã€‚\nä¸‰ã€æ ¸å¿ƒå¯¦ä½œè§£æ # 3.1 è·¯å¾‘éœ€æ±‚ # åœ¨ order æ‡‰ç”¨ä¸­ï¼Œéœ€è¦åœ¨ urls.py ä¸­å®šç¾©å°æ‡‰çš„è·¯å¾‘ã€‚\norder/urls.py\nfrom django.urls import path from . import views app_name = \u0026#34;order\u0026#34; # å®šç¾©æ‡‰ç”¨å‘½åç©ºé–“ urlpatterns = [ path(\u0026#34;failed/\u0026#34;, views.failed, name=\u0026#34;order_failed\u0026#34;), # æ”¯ä»˜å¤±æ•—é é¢ path(\u0026#34;successful/\u0026#34;, views.successful, name=\u0026#34;order_successful\u0026#34;), # æ”¯ä»˜æˆåŠŸé é¢ path(\u0026#34;create/\u0026#34;, views.create_order, name=\u0026#34;create_order\u0026#34;), # å‰µå»ºè¨‚å–® path(\u0026#34;return/\u0026#34;, views.ecpay_return, name=\u0026#34;ecpay_return\u0026#34;), # ç¶ ç•Œå›å‚³é€šçŸ¥è™•ç† path(\u0026#34;result/\u0026#34;, views.ecpay_result, name=\u0026#34;ecpay_result\u0026#34;), # æ”¯ä»˜çµæœé é¢ path(\u0026#34;\u0026lt;int:service_id\u0026gt;/\u0026#34;, views.payment_form_select, name=\u0026#34;payment_form_select\u0026#34;), # é¸æ“‡æ–¹æ¡ˆ ] åœ¨æ ¹ç›®éŒ„ä¹Ÿåˆ¥å¿˜äº†å¢åŠ è·¯å¾‘ã€‚\nmyproject/urls.py\nfrom django.contrib import admin from django.urls import include, path urlpatterns = [ path(\u0026#34;admin/\u0026#34;, admin.site.urls), # å…§å»º path(\u0026#34;order/\u0026#34;, include(\u0026#34;order.urls\u0026#34;)), # åŒ…å« order æ‡‰ç”¨çš„è·¯ç”± ] 3.2 éœ€è¦çš„å¥—ä»¶èˆ‡åŒ¯å…¥é …ç›® # æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½éƒ½åœ¨ order æ‡‰ç”¨çš„ views.py æ–‡ä»¶ä¸­å¯¦ä½œï¼Œä¸¦éœ€è¦ä»¥ä¸‹æ¨¡çµ„çš„åŒ¯å…¥ï¼š\nfrom django.shortcuts import render, get_object_or_404, redirect from django.http import JsonResponse, HttpResponse from .models import Order from services.models import Service from django.views.decorators.csrf import csrf_exempt from django.contrib.auth.decorators import login_required from django.conf import settings from datetime import datetime import hashlib import urllib.parse from django.urls import reverse é€™äº›æ¨¡çµ„ç”¨æ–¼è™•ç† HTTP è«‹æ±‚ã€é©—è­‰ç”¨æˆ¶ã€æ“ä½œæ•¸æ“šåº«æ¨¡å‹ï¼Œä¸¦ç”Ÿæˆå¿…è¦çš„åŠ å¯†å€¼ã€‚\n3.3 è¨­å®šé‡‘æµåƒæ•¸èˆ‡ç”Ÿæˆé©—è­‰ç¢¼ # åœ¨ views.py æ–‡ä»¶é ‚éƒ¨ï¼Œæˆ‘å€‘è¨­ç½®äº†ç¶ ç•Œé‡‘æµæ‰€éœ€çš„åƒæ•¸ï¼Œå¾ settings.py ç²å–ï¼š\nMERCHANT_ID = settings.MERCHANT_ID # ç¶ ç•Œé‡‘æµçš„å•†åº—ä»£è™Ÿ HASH_KEY = settings.HASH_KEY # ç¶ ç•Œé‡‘æµçš„ Hash Key HASH_IV = settings.HASH_IV # ç¶ ç•Œé‡‘æµçš„ Hash IV ECPAY_URL = settings.ECPAY_URL # ç¶ ç•Œé‡‘æµçš„æ”¯ä»˜ç¶²å€ ä¸¦å¯¦ä½œäº†ä¸€å€‹ç”Ÿæˆ CheckMacValue çš„å‡½æ•¸ï¼š\ndef generate_check_mac_value(params, hash_key, hash_iv):#å®šç¾©äº†ä¸€å€‹å‡½æ•¸ generate_check_mac_valueï¼Œç”¨æ–¼ç”Ÿæˆé©—è­‰ç¢¼ã€‚ sorted_params = sorted(params.items()) # å°‡ params å­—å…¸çš„é …ç›®è½‰æ›ç‚º (key, value) çš„åˆ—è¡¨ä¸¦æŒ‰ key é€²è¡Œå­—æ¯é †åºæ’åºã€‚ raw_str = \u0026#34;\u0026amp;\u0026#34;.join([f\u0026#34;{key}={value}\u0026#34; for key, value in sorted_params]) # å°‡æ’åºå¾Œçš„åƒæ•¸åˆ—è¡¨è½‰æ›ç‚º key=value æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œä¸¦ç”¨ \u0026amp; é€£æ¥æ¯ä¸€å°åƒæ•¸ã€‚ raw_str = f\u0026#34;HashKey={hash_key}\u0026amp;{raw_str}\u0026amp;HashIV={hash_iv}\u0026#34; # åœ¨æ‹¼æ¥å¥½çš„åƒæ•¸å­—ç¬¦ä¸²å‰å¾Œåˆ†åˆ¥æ·»åŠ  HashKey å’Œ HashIVã€‚ encoded_str = urllib.parse.quote_plus(raw_str).lower() # URL ç·¨ç¢¼ä¸¦è½‰å°å¯«ï¼Œç¬¦åˆç¶ ç•Œè¦ç¯„ return hashlib.md5(encoded_str.encode(\u0026#34;utf-8\u0026#34;)).hexdigest().upper() # è¨ˆç®— MD5 ä¸¦è½‰ç‚ºå¤§å¯« æ­¤å‡½æ•¸ç”¨æ–¼åŠ å¯†è«‹æ±‚åƒæ•¸ï¼Œç¢ºä¿æ•¸æ“šå‚³è¼¸å®‰å…¨ã€‚\nparams: è¦é€²è¡ŒåŠ å¯†çš„åƒæ•¸å­—å…¸ï¼ˆä¾‹å¦‚é‡‘æµæ‰€éœ€çš„äº¤æ˜“è³‡è¨Šï¼‰ã€‚ raw_str = \u0026ldquo;\u0026amp;\u0026quot;.join([f\u0026rdquo;{key}={value}\u0026quot; for key, value in sorted_params]) é€™è¡Œèˆ‰ä¾‹ï¼š å¦‚æœåƒæ•¸æ˜¯ {\u0026ldquo;Amount\u0026rdquo;: 100, \u0026ldquo;MerchantID\u0026rdquo;: \u0026ldquo;3002607\u0026rdquo;}ï¼Œå‰‡çµæœæ˜¯ï¼š\u0026ldquo;Amount=100\u0026amp;MerchantID=3002607\u0026rdquo;ã€‚\nraw_str = f\u0026quot;HashKey={hash_key}\u0026amp;{raw_str}\u0026amp;HashIV={hash_iv}\u0026quot; é€™è¡Œèˆ‰ä¾‹ï¼š é€™æ˜¯ç¶ ç•Œé‡‘æµçš„åŠ å¯†è¦ç¯„ï¼Œç¢ºä¿ç”Ÿæˆçš„åŠ å¯†å€¼èˆ‡ç¶ ç•Œä¼ºæœå™¨çš„é©—è­‰é‚è¼¯ä¸€è‡´ã€‚\nå‡è¨­ HashKey ç‚º abc123ï¼ŒHashIV ç‚º xyz789ï¼Œçµæœæœƒæ˜¯ï¼š \u0026ldquo;HashKey=abc123\u0026amp;Amount=100\u0026amp;MerchantID=3002607\u0026amp;HashIV=xyz789\u0026rdquo;ã€‚\nencoded_str = urllib.parse.quote_plus(raw_str).lower() é€™è¡Œèˆ‰ä¾‹ï¼š å‡è¨­åŸå­—ç¬¦ä¸²ç‚º HashKey=abc123\u0026amp;Amount=100\u0026amp;MerchantID=3002607\u0026amp;HashIV=xyz789ï¼Œç·¨ç¢¼å¾Œå¯èƒ½æœƒè®Šæˆï¼š \u0026ldquo;hashkey%3Dabc123%26amount%3D100%26merchantid%3D3002607%26hashiv%3Dxyz789\u0026rdquo;\nreturn hashlib.md5(encoded_str.encode(\u0026ldquo;utf-8\u0026rdquo;)).hexdigest().upper() é€™è¡Œèˆ‰ä¾‹ï¼š ä½¿ç”¨ Python çš„ hashlib.md5 å°ç·¨ç¢¼å¾Œçš„å­—ç¬¦ä¸²é€²è¡Œ MD5 å“ˆå¸Œè¨ˆç®—ã€‚\nå°‡çµæœè½‰æ›ç‚º 16 é€²ä½çš„å“ˆå¸Œå€¼ï¼ˆhexdigestï¼‰ï¼Œä¸¦è½‰ç‚ºå¤§å¯«ã€‚\nä¾‹å¦‚ï¼ŒMD5 è¨ˆç®—å¾Œå¯èƒ½å¾—åˆ°é¡ä¼¼çš„çµæœï¼š5F4DCC3B5AA765D61D8327DEB882CF99ã€‚\n3.4 å»ºç«‹è¨‚å–®ä¸¦ç”Ÿæˆé‡‘æµåƒæ•¸ # ä»¥ä¸‹æ˜¯å¯¦ä½œ create_order çš„è©³ç´°ä»£ç¢¼ï¼Œç”¨æ–¼å»ºç«‹è¨‚å–®ä¸¦å‚³éé‡‘æµåƒæ•¸çµ¦å‰ç«¯ï¼š\n@login_required def create_order(request): if request.method == \u0026#34;POST\u0026#34;: service_id = request.POST.get(\u0026#34;service_id\u0026#34;) # å¾å‰ç«¯ç²å– service_id selected_plan = request.POST.get(\u0026#34;plan\u0026#34;) # ç²å–å‰ç«¯å‚³å…¥çš„æ–¹æ¡ˆ payment_method = request.POST.get(\u0026#34;payment_method\u0026#34;) # ç²å–æ”¯ä»˜æ–¹å¼ service = get_object_or_404(Service, id=service_id) # å‹•æ…‹è¨­ç½®é‡‘é¡ if selected_plan == \u0026#34;standard\u0026#34;: total_price = service.standard_price elif selected_plan == \u0026#34;premium\u0026#34;: total_price = service.premium_price else: return JsonResponse({\u0026#34;error\u0026#34;: \u0026#34;Invalid plan selected.\u0026#34;}, status=400) valid_payment_methods = { \u0026#34;credit_card\u0026#34;: \u0026#34;Credit\u0026#34;, \u0026#34;atm\u0026#34;: \u0026#34;ATM\u0026#34;, \u0026#34;linepay\u0026#34;: \u0026#34;LinePay\u0026#34;,#ç­‰ä¸Šç·šé–‹é€šå¾Œæ‰å¯å•Ÿç”¨ï¼Œæ¸¬è©¦ç’°å¢ƒä¸è¡Œ \u0026#34;googlepay\u0026#34;: \u0026#34;GooglePay\u0026#34;,#ç­‰ä¸Šç·šé–‹é€šå¾Œæ‰å¯å•Ÿç”¨ï¼Œæ¸¬è©¦ç’°å¢ƒä¸è¡Œ \u0026#34;barcode\u0026#34;: \u0026#34;BARCODE\u0026#34;, } if payment_method not in valid_payment_methods: return JsonResponse( {\u0026#34;error\u0026#34;: \u0026#34;Invalid payment method selected.\u0026#34;}, status=400 ) # å»ºç«‹è¨‚å–® order = request.user.orders_as_client.create( service=service, total_price=total_price, payment_method=payment_method, ) # ç¶ ç•Œé‡‘æµåƒæ•¸ params = { \u0026#34;MerchantID\u0026#34;: MERCHANT_ID, \u0026#34;MerchantTradeNo\u0026#34;: order.merchant_trade_no, \u0026#34;MerchantTradeDate\u0026#34;: datetime.now().strftime(\u0026#34;%Y/%m/%d %H:%M:%S\u0026#34;), \u0026#34;PaymentType\u0026#34;: \u0026#34;aio\u0026#34;, \u0026#34;TotalAmount\u0026#34;: int(order.total_price), \u0026#34;TradeDesc\u0026#34;: \u0026#34;Payment for Order\u0026#34;, \u0026#34;ItemName\u0026#34;: f\u0026#34;Order {order.id}\u0026#34;, \u0026#34;ReturnURL\u0026#34;: request.build_absolute_uri(reverse(\u0026#34;order:ecpay_return\u0026#34;)), \u0026#34;OrderResultURL\u0026#34;: request.build_absolute_uri(reverse(\u0026#34;order:ecpay_result\u0026#34;)), \u0026#34;ChoosePayment\u0026#34;: valid_payment_methods[payment_method], } params[\u0026#34;CheckMacValue\u0026#34;] = generate_check_mac_value(params, HASH_KEY, HASH_IV) # å‚³éè‡³å‰ç«¯è¡¨å–® return render( request, \u0026#34;order/payment_form.html\u0026#34;, {\u0026#34;ecpay_url\u0026#34;: ECPAY_URL, \u0026#34;params\u0026#34;: params}, ) return JsonResponse({\u0026#34;error\u0026#34;: \u0026#34;Invalid request method.\u0026#34;}, status=405) é—œéµé»è§£é‡‹ # å‹•æ…‹é‡‘é¡è¨­ç½®ï¼šæ ¹æ“šç”¨æˆ¶é¸æ“‡çš„æ–¹æ¡ˆè¨ˆç®—è¨‚å–®é‡‘é¡ã€‚ ç¶ ç•Œé‡‘æµåƒæ•¸ï¼šåŒ…å«å¿…è¦çš„é‡‘æµæ•¸æ“šï¼ˆå¦‚ MerchantIDã€TotalAmountï¼‰ã€‚ é©—è­‰ç¢¼ç”Ÿæˆï¼šé€šé generate_check_mac_value ç¢ºä¿æ•¸æ“šå®‰å…¨ã€‚ 3.5 è™•ç†é‡‘æµå›å‚³çµæœ # ä»¥ä¸‹æ˜¯è™•ç†é‡‘æµå›å‚³çµæœçš„å‡½æ•¸ ecpay_returnï¼š\n@csrf_exempt # å…è¨±è·¨ç«™è«‹æ±‚ def ecpay_return(request): if request.method == \u0026#34;POST\u0026#34;: data = request.POST.dict() # ç²å– POST æ•¸æ“š check_mac = data.pop(\u0026#34;CheckMacValue\u0026#34;, None) # æå– CheckMacValue if check_mac == generate_check_mac_value(data, HASH_KEY, HASH_IV): # é©—è­‰ CheckMacValue merchant_trade_no = data.get(\u0026#34;MerchantTradeNo\u0026#34;) # æå–è¨‚å–®ç·¨è™Ÿ order_id = int(merchant_trade_no.replace(\u0026#34;ORDER\u0026#34;, \u0026#34;\u0026#34;)) # å¾è¨‚å–®ç·¨è™Ÿä¸­æå– ID order = get_object_or_404(Order, id=order_id) # ç¢ºä¿è¨‚å–®å­˜åœ¨ if data.get(\u0026#34;RtnCode\u0026#34;) == \u0026#34;1\u0026#34;: # å¦‚æœæ”¯ä»˜æˆåŠŸ order.status = \u0026#34;Paid\u0026#34; # æ›´æ–°è¨‚å–®ç‹€æ…‹ç‚ºå·²æ”¯ä»˜ order.save() # ä¿å­˜è¨‚å–® return HttpResponse(\u0026#34;OK\u0026#34;) # è¿”å›æˆåŠŸéŸ¿æ‡‰ return HttpResponse(\u0026#34;CheckMacValue Failed\u0026#34;) # è¿”å›é©—è­‰å¤±æ•—éŸ¿æ‡‰ è§£é‡‹ # æ•¸æ“šé©—è­‰ï¼šé€šéæ¯”å° CheckMacValue ç¢ºä¿å›å‚³æ•¸æ“šæœªè¢«ç¯¡æ”¹ã€‚ è¨‚å–®ç‹€æ…‹æ›´æ–°ï¼šæ ¹æ“šé‡‘æµçµæœæ›´æ–°è¨‚å–®ç‹€æ…‹ã€‚ 3.6 è™•ç†é‡‘æµçµæœé é¢ # ä»¥ä¸‹æ˜¯è™•ç†é‡‘æµçµæœã€ŒæˆåŠŸã€å‡½æ•¸ï¼š\n@csrf_exempt # å…è¨±è·¨ç«™è«‹æ±‚ def ecpay_result(request): return render(request, \u0026#34;order/order_successful.html\u0026#34;) # æ¸²æŸ“æ”¯ä»˜æˆåŠŸé é¢ ä»¥ä¸‹æ˜¯è™•ç†é‡‘æµçµæœã€Œå¤±æ•—ã€å‡½æ•¸ï¼š\n@csrf_exempt def failed(request): return render(request, \u0026#34;order/order_failed.html\u0026#34;) # æ¸²æŸ“æ”¯ä»˜å¤±æ•—é é¢ æœ¬ç¯‡æ–‡ç« ä¸æœƒåŠ å…¥ä»˜æ¬¾æˆåŠŸçš„ç•«é¢ã€‚å¯è‡ªè¡Œåœ¨ order/templates/order/order_successful.html ä¸­æ·»åŠ æƒ³è¦çš„å®Œæˆè¨‚å–®ç•«é¢ã€‚\näº¦ä¸æœƒåŠ å…¥ä»˜æ¬¾å¤±æ•—çš„ç•«é¢ã€‚å¯è‡ªè¡Œåœ¨ order/templates/order/order_failed.html ä¸­æ·»åŠ æƒ³è¦çš„å®Œæˆè¨‚å–®ç•«é¢ã€‚\n3.7 è‡ªå‹•æäº¤çš„é‡‘æµè¡¨å–®æ¨¡æ¿ # åœ¨ order/templates/order/payment_formï¼¿select.htmlï¼Œæ·»åŠ  payment_form_select.html æ¨¡æ¿ï¼Œå¿«é€Ÿå°‡ç”¨æˆ¶å°å‘ç¶ ç•Œæ”¯ä»˜é é¢ï¼š\n(æ­¤æ¨¡æ¿ä½¿ç”¨ Tailwind æ¨£å¼è£½ä½œ)\n\u0026lt;form method=\u0026#34;POST\u0026#34; action=\u0026#34;{% url \u0026#39;order:create_order\u0026#39; %}\u0026#34;\u0026gt; {% csrf_token %} \u0026lt;!-- éš±è—çš„æœå‹™ ID --\u0026gt; \u0026lt;input type=\u0026#34;hidden\u0026#34; name=\u0026#34;service_id\u0026#34; value=\u0026#34;{{ service.id }}\u0026#34;\u0026gt; \u0026lt;input type=\u0026#34;hidden\u0026#34; name=\u0026#34;plan\u0026#34; value=\u0026#34;{{ selected_plan }}\u0026#34;\u0026gt; \u0026lt;!-- æ–¹æ¡ˆé¸æ“‡ --\u0026gt; \u0026lt;div class=\u0026#34;mb-6\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;plan\u0026#34; class=\u0026#34;block mb-2 font-medium text-gray-900\u0026#34;\u0026gt;æ–¹æ¡ˆ\u0026lt;/label\u0026gt; \u0026lt;select id=\u0026#34;plan\u0026#34; name=\u0026#34;plan\u0026#34; class=\u0026#34;w-full p-3 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\u0026#34; onchange=\u0026#34;togglePlanView(this.value)\u0026#34; \u0026gt; \u0026lt;option value=\u0026#34;standard\u0026#34; {% if selected_plan == \u0026#34;standard\u0026#34; %}selected{% endif %}\u0026gt; ä¸€èˆ¬æ–¹æ¡ˆ \u0026lt;/option\u0026gt; \u0026lt;option value=\u0026#34;premium\u0026#34; {% if selected_plan == \u0026#34;premium\u0026#34; %}selected{% endif %}\u0026gt; å°ˆæ¥­æ–¹æ¡ˆ \u0026lt;/option\u0026gt; \u0026lt;/select\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!-- æ”¯ä»˜æ–¹å¼ --\u0026gt; \u0026lt;div class=\u0026#34;mb-6\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;payment-method\u0026#34; class=\u0026#34;block mb-2 font-medium text-gray-900\u0026#34;\u0026gt;æ”¯ä»˜æ–¹å¼\u0026lt;/label\u0026gt; \u0026lt;select id=\u0026#34;payment_method\u0026#34; name=\u0026#34;payment_method\u0026#34; class=\u0026#34;w-full p-3 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\u0026#34; \u0026gt; \u0026lt;option value=\u0026#34;\u0026#34; disabled selected\u0026gt;è«‹é¸æ“‡\u0026lt;/option\u0026gt; \u0026lt;option value=\u0026#34;credit_card\u0026#34;\u0026gt;ä¿¡ç”¨å¡(20è¬ä»¥ä¸‹)\u0026lt;/option\u0026gt; \u0026lt;option value=\u0026#34;atm\u0026#34;\u0026gt;ATM è½‰å¸³(5è¬ä»¥ä¸‹)\u0026lt;/option\u0026gt; \u0026lt;option value=\u0026#34;linepay\u0026#34;\u0026gt;Line Pay\u0026lt;/option\u0026gt; {% comment %} \u0026lt;option value=\u0026#34;googlepay\u0026#34;\u0026gt;Google Pay\u0026lt;/option\u0026gt; {% endcomment %} \u0026lt;option value=\u0026#34;barcode\u0026#34;\u0026gt;è¶…å•†æ¢ç¢¼(2è¬ä»¥ä¸‹)\u0026lt;/option\u0026gt; \u0026lt;/select\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!-- æŒ‰éˆ•å€åŸŸ --\u0026gt; \u0026lt;div class=\u0026#34;flex justify-between mb-4\u0026#34;\u0026gt; \u0026lt;button type=\u0026#34;button\u0026#34; class=\u0026#34;px-4 py-2 font-semibold text-white bg-gray-400 rounded-lg hover:bg-gray-500 focus:outline-none focus:shadow-outline\u0026#34; onclick=\u0026#34;history.back();\u0026#34; \u0026gt; ä¸Šä¸€æ­¥ \u0026lt;/button\u0026gt; \u0026lt;button type=\u0026#34;submit\u0026#34; class=\u0026#34;px-4 py-2 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:shadow-outline\u0026#34; id=\u0026#34;nextButton\u0026#34; disabled \u0026gt; ä¸‹ä¸€æ­¥ \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/form\u0026gt; åœ¨ order/templates/order/payment_form.htmlï¼Œæ·»åŠ  payment_form.html æ¨¡æ¿ï¼Œå¿«é€Ÿå°‡ç”¨æˆ¶å°å‘ç¶ ç•Œæ”¯ä»˜é é¢ï¼š\n\u0026lt;form id=\u0026#34;ecpay_form\u0026#34; method=\u0026#34;post\u0026#34; action=\u0026#34;{{ ecpay_url }}\u0026#34;\u0026gt; {% for key, value in params.items %} \u0026lt;input type=\u0026#34;hidden\u0026#34; name=\u0026#34;{{ key }}\u0026#34; value=\u0026#34;{{ value }}\u0026#34; /\u0026gt; {% endfor %} \u0026lt;/form\u0026gt; \u0026lt;script\u0026gt; document.getElementById(\u0026#34;ecpay_form\u0026#34;).submit(); // è‡ªå‹•æäº¤è¡¨å–® \u0026lt;/script\u0026gt; 3.8 è¨­ç½®æ¨¡å‹ # åœ¨å¯¦ç¾åŠŸèƒ½ä¹‹å‰ï¼Œéœ€è¦ç‚º order å’Œ service å»ºç«‹è³‡æ–™æ¨¡å‹ã€‚ä»¥ä¸‹æ˜¯å…©å€‹æ‡‰ç”¨çš„ models.py å…§å®¹ï¼š\norder/models.py\nfrom django.db import models from django.contrib.auth.models import User from services.models import Service import uuid from django.core.validators import MaxValueValidator, MinValueValidator class Order(models.Model): STATUS_CHOICES = [ (\u0026#34;pending\u0026#34;, \u0026#34;Pending\u0026#34;), (\u0026#34;paid\u0026#34;, \u0026#34;Paid\u0026#34;), (\u0026#34;completed\u0026#34;, \u0026#34;Completed\u0026#34;), (\u0026#34;cancelled\u0026#34;, \u0026#34;Cancelled\u0026#34;), ] #ç¶ ç•Œæ”¯æ´å¤šç¨®æ”¯ä»˜æ–¹å¼ PAYMENT_METHOD_CHOICES = [ (\u0026#34;credit_card\u0026#34;, \u0026#34;Credit Card\u0026#34;),#é‡‘é¡(20è¬ä»¥ä¸‹) (\u0026#34;atm\u0026#34;, \u0026#34;ATM\u0026#34;), #é‡‘é¡(5è¬ä»¥ä¸‹) (\u0026#34;linepay\u0026#34;, \u0026#34;Line Pay\u0026#34;), #æ¸¬è©¦ç’°å¢ƒä¸æ”¯æ´ (\u0026#34;googlepay\u0026#34;, \u0026#34;Google Pay\u0026#34;), #æ¸¬è©¦ç’°å¢ƒä¸æ”¯æ´ (\u0026#34;barcode\u0026#34;, \u0026#34;Barcode\u0026#34;),#è¶…å•†æ¢ç¢¼é‡‘é¡(2è¬ä»¥ä¸‹) ] PLAN_CHOICES = [ (\u0026#34;standard\u0026#34;, \u0026#34;Standard\u0026#34;), (\u0026#34;premium\u0026#34;, \u0026#34;Premium\u0026#34;), ] # ç”¨æˆ¶å’Œæœå‹™é—œè¯ client_user = models.ForeignKey( User, on_delete=models.CASCADE, related_name=\u0026#34;orders_as_client\u0026#34;, verbose_name=\u0026#34;å®¢æˆ¶\u0026#34;, null=True, ) service = models.ForeignKey( Service, on_delete=models.SET_NULL, related_name=\u0026#34;orders\u0026#34;, verbose_name=\u0026#34;æœå‹™\u0026#34;, null=True, blank=True, ) # è¨‚å–®åŸºæœ¬è³‡è¨Š order_date = models.DateTimeField(auto_now_add=True, verbose_name=\u0026#34;è¨‚å–®æ—¥æœŸ\u0026#34;) total_price = models.PositiveIntegerField( verbose_name=\u0026#34;ç¸½é‡‘é¡\u0026#34;, validators=[MinValueValidator(1), MaxValueValidator(9999999999)], ) status = models.CharField( max_length=50, choices=STATUS_CHOICES, default=\u0026#34;pending\u0026#34;, verbose_name=\u0026#34;è¨‚å–®ç‹€æ…‹\u0026#34;, ) # æ”¯ä»˜ç›¸é—œæ¬„ä½ payment_method = models.CharField( max_length=50, choices=PAYMENT_METHOD_CHOICES, verbose_name=\u0026#34;ä»˜æ¬¾æ–¹å¼\u0026#34; ) merchant_trade_no = models.CharField( max_length=30, unique=True, null=True, blank=True, verbose_name=\u0026#34;å•†åº—è¨‚å–®ç·¨è™Ÿ\u0026#34; ) selected_plan = models.CharField( max_length=20, choices=[(\u0026#34;standard\u0026#34;, \u0026#34;Standard\u0026#34;), (\u0026#34;premium\u0026#34;, \u0026#34;Premium\u0026#34;)], null=False, blank=False, verbose_name=\u0026#34;é¸æ“‡æ–¹æ¡ˆ\u0026#34;, ) class Meta: verbose_name = \u0026#34;è¨‚å–®\u0026#34; verbose_name_plural = \u0026#34;è¨‚å–®\u0026#34; def save(self, *args, **kwargs):#é€™æ˜¯ Django æ¨¡å‹ä¸­çš„ save æ–¹æ³•ï¼Œç”¨æ–¼åœ¨å°‡ç‰©ä»¶ä¿å­˜åˆ°è³‡æ–™åº«æ™‚è§¸ç™¼ã€‚ if not self.merchant_trade_no: #æª¢æŸ¥ merchant_trade_no æ¬„ä½æ˜¯å¦ç‚ºç©ºï¼ˆå°šæœªè¨­ç½®ï¼‰ã€‚ self.merchant_trade_no = f\u0026#34;ORDER{uuid.uuid4().hex[:12].upper()}\u0026#34;#ç”Ÿæˆä¸€å€‹å”¯ä¸€çš„å•†åº—è¨‚å–®ç·¨è™Ÿ (merchant_trade_no)ã€‚ super().save(*args, **kwargs)#super()ï¼šèª¿ç”¨ Django æ¨¡å‹çš„åŸå§‹ save æ–¹æ³•ï¼Œç¢ºä¿è‡ªå®šç¾©é‚è¼¯åŸ·è¡Œå¾Œä»èƒ½æ­£å¸¸ä¿å­˜ã€‚ def __str__(self): service_title = ( self.service.title if self.service else \u0026#34;N/A\u0026#34; ) # å¦‚æœæ²’æœ‰æœå‹™ï¼Œé¡¯ç¤º N/A return f\u0026#34;Order {self.merchant_trade_no} - {self.client_user.username} - {service_title}\u0026#34; selfï¼šæŒ‡å‘ç•¶å‰æ¨¡å‹çš„å¯¦ä¾‹ã€‚ *args å’Œ **kwargsï¼šå…è¨±è©²æ–¹æ³•æ¥å—é¡å¤–çš„åƒæ•¸ï¼Œç”¨æ–¼å…¼å®¹ Django çš„å…§å»º save æ–¹æ³•çš„åƒæ•¸ã€‚ uuid.uuid4().hex[:12]ï¼šuuid.uuid4() ç‚ºç”Ÿæˆéš¨æ©Ÿçš„ UUIDï¼ˆå…¨çƒå”¯ä¸€æ¨™è­˜ï¼‰ï¼Œä¸¦å–å…¶å‰ 12 ä½ï¼ˆå­—æ¯å’Œæ•¸å­—çµ„æˆï¼‰ã€‚\n.hexï¼šå°‡ UUID è½‰æ›ç‚ºç´” 16 é€²ä½çš„å­—ç¬¦ä¸²æ ¼å¼ã€‚ f\u0026quot;ORDER{\u0026hellip;}\u0026quot;ï¼šä½¿ç”¨ Python çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ˆf-stringï¼‰åœ¨ç”Ÿæˆçš„ UUID å‰é¢åŠ ä¸Šå›ºå®šçš„å‰ç¶´ ORDERï¼Œè¡¨ç¤ºé€™æ˜¯è¨‚å–®ç›¸é—œçš„ä»£ç¢¼ã€‚ .upper()ï¼šå°‡ç”Ÿæˆçš„å­—ç¬¦ä¸²è½‰ç‚ºå¤§å¯«ï¼Œçµ±ä¸€æ ¼å¼ã€‚ MinValueValidator:\nç¢ºä¿è¼¸å…¥çš„å€¼å¤§æ–¼æˆ–ç­‰æ–¼æŒ‡å®šçš„æœ€å°å€¼ã€‚\nä¾‹å¦‚ï¼Œç”¨æ–¼ç¢ºä¿åƒ¹æ ¼æˆ–æ•¸é‡ä¸ä½æ–¼æŸå€‹å€¼ã€‚ MaxValueValidator:\nç¢ºä¿è¼¸å…¥çš„å€¼å°æ–¼æˆ–ç­‰æ–¼æŒ‡å®šçš„æœ€å¤§å€¼ã€‚\nä¾‹å¦‚ï¼Œç”¨æ–¼é™åˆ¶æ•¸å­—ä¸è¶…éæŸå€‹ä¸Šé™ã€‚ services/models.py\nfrom django.db import models from django.contrib.auth.models import User from categories.models import Category from utils.mixins import WebPImageModelMixin class Service(WebPImageModelMixin, models.Model): freelancer_user = models.ForeignKey( User, on_delete=models.CASCADE, related_name=\u0026#34;services\u0026#34;, null=True, ) category = models.ManyToManyField( Category, related_name=\u0026#34;services\u0026#34;, ) title = models.CharField(max_length=100) description = models.TextField() photo = models.ImageField(upload_to=\u0026#34;service_photos/\u0026#34;, blank=True, null=True) created_at = models.DateTimeField(auto_now_add=True) updated_at = models.DateTimeField(auto_now=True) # æ–°å¢ä¸€èˆ¬æ–¹æ¡ˆ standard_title = models.CharField(max_length=100) standard_description = models.TextField() standard_price = models.PositiveIntegerField() standard_delivery_time = models.PositiveIntegerField(null=True, blank=True) # æ–°å¢å°ˆæ¥­æ–¹æ¡ˆ premium_title = models.CharField(max_length=100, blank=True, null=True) premium_description = models.TextField(blank=True, null=True) premium_price = models.PositiveIntegerField(blank=True, null=True) premium_delivery_time = models.PositiveIntegerField(blank=True, null=True) rating = models.DecimalField( max_digits=2, decimal_places=1, null=True, blank=True, default=None, help_text=\u0026#34;Client rating for the service (e.g., 4.5 stars)\u0026#34;, ) def __str__(self): return self.title 3.9 é·ç§»è³‡æ–™åº« # åœ¨å®Œæˆä¸Šè¿°æ¨¡å‹çš„å®šç¾©å¾Œï¼ŒåŸ·è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆä¸¦æ‡‰ç”¨è³‡æ–™åº«é·ç§»æª”ï¼š\npython manage.py makemigrations python manage.py migrate å››ã€æ¸¬è©¦ç’°å¢ƒæé†’ # æ¸¬è©¦ç’°å¢ƒåƒæ•¸åƒ…é©ç”¨æ–¼é–‹ç™¼å’Œæ¸¬è©¦ã€‚ ç¢ºä¿åœ¨éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒå‰ï¼Œå°‡æ¸¬è©¦åƒæ•¸æ›¿æ›ç‚ºæ­£å¼ç’°å¢ƒåƒæ•¸ã€‚ æ¸¬è©¦äº¤æ˜“ä¸æœƒæ‰£æ¬¾ï¼Œä½†å¯ä»¥æ¨¡æ“¬å®Œæ•´æ”¯ä»˜æµç¨‹ã€‚ 4.1 åˆ‡æ›è‡³æ­£å¼ç’°å¢ƒ # åœ¨æ¸¬è©¦å®Œæˆå¾Œï¼Œè«‹ç¢ºä¿åˆ‡æ›è‡³æ­£å¼ç’°å¢ƒé€²è¡Œéƒ¨ç½²ï¼š\næ›´æ–°é‡‘æµåƒæ•¸ï¼š\nåœ¨ settings.py æˆ–ç’°å¢ƒè®Šæ•¸ä¸­æ›´æ”¹åƒæ•¸ç‚ºæ­£å¼ç’°å¢ƒçš„å€¼ï¼š MERCHANT_ID = \u0026#34;æ­£å¼å•†åº—ä»£è™Ÿ\u0026#34; HASH_KEY = \u0026#34;æ­£å¼ Hash Key\u0026#34; HASH_IV = \u0026#34;æ­£å¼ Hash IV\u0026#34; ECPAY_URL = \u0026#34;https://payment.ecpay.com.tw/Cashier/AioCheckOut/V5\u0026#34; å•Ÿç”¨ SSLï¼š ç¶ ç•Œè¦æ±‚æ­£å¼ç’°å¢ƒä½¿ç”¨ HTTPSï¼Œç¢ºä¿ä¼ºæœå™¨å·²å®‰è£ SSL æ†‘è­‰ã€‚ ç¢ºèªå›å‚³ URLï¼š åœ¨ç¶ ç•Œé‡‘æµå¹³å°ä¸Šï¼Œè¨­ç½®æ­£å¼çš„å›å‚³ URLï¼ˆReturnURL å’Œ OrderResultURLï¼‰ï¼Œç¢ºä¿é€šçŸ¥èƒ½æ­£ç¢ºåˆ°é”ã€‚ æ¸¬è©¦äº¤æ˜“ï¼š ä½¿ç”¨å°‘é‡é‡‘é¡é€²è¡Œæ¸¬è©¦äº¤æ˜“ï¼Œç¢ºèªæ‰€æœ‰æµç¨‹æ­£å¸¸é‹ä½œã€‚ 4.2 æ¸¬è©¦ç”¨ä¾‹ # æ¨¡æ“¬è¨‚å–®å‰µå»ºï¼š\nä½¿ç”¨ä»¥ä¸‹ URL æ¨¡æ“¬è¨‚å–®å‰µå»ºï¼š\nhttp://127.0.0.1:8000/order/create/?service_id=1\u0026amp;plan=standard æª¢æŸ¥é‡‘æµé€šçŸ¥ï¼š\nä½¿ç”¨ Postman æ¨¡æ“¬ç¶ ç•Œçš„å›å‚³é€šçŸ¥ï¼š è«‹æ±‚é¡å‹ï¼šPOST URL: http://127.0.0.1:8000/order/return/ è«‹æ±‚æ•¸æ“šï¼šåŒ…å« MerchantTradeNoã€RtnCode å’Œå…¶ä»–å¿…è¦åƒæ•¸ã€‚ é©—è­‰ç‹€æ…‹æ›´æ–°ï¼š\nåœ¨ Django ç®¡ç†å¾Œå°ç¢ºèªè¨‚å–®çš„ç‹€æ…‹æ˜¯å¦æ­£ç¢ºæ›´æ–°ç‚º Paidã€‚ äº”ã€å®‰å…¨æ€§æé†’ # 5.1 å®‰å…¨æ€§æ³¨æ„äº‹é … # ä¿è­·æ•æ„Ÿä¿¡æ¯ï¼š ç¢ºä¿ HashKey å’Œ HashIV åƒ…å­˜å„²æ–¼ä¼ºæœå™¨çš„ç’°å¢ƒè®Šæ•¸ä¸­ã€‚ é¿å…åœ¨ä»£ç¢¼åº«ä¸­ç›´æ¥ç¡¬ç·¨ç¢¼ã€‚ é¿å…æ¿«ç”¨ @csrf_exemptï¼š åƒ…åœ¨éœ€è¦è™•ç†ç¬¬ä¸‰æ–¹è«‹æ±‚ï¼ˆå¦‚é‡‘æµå›å‚³é€šçŸ¥ï¼‰æ™‚ä½¿ç”¨ã€‚ å…¶ä»–æƒ…æ³æ‡‰ä¿ç•™ CSRF ä¿è­·æ©Ÿåˆ¶ã€‚ åƒ…å…è¨±å¯ä¿¡ä¾†æºï¼ˆå¦‚ç¶ ç•Œä¼ºæœå™¨ï¼‰çš„è«‹æ±‚é€²å…¥ ecpay_return å’Œ ecpay_resultã€‚ ç¸½çµ(æ¸¬è©¦å¡è™Ÿ) # é€šéä¸Šè¿°æ­¥é©Ÿï¼Œå³å¯æˆåŠŸå®Œæˆåœ¨ Django ä¸­ä¸²æ¥ç¶ ç•Œé‡‘æµçš„å…¨éƒ¨æµç¨‹ï¼ä¹Ÿå¯ä»¥é€éæ¸¬è©¦ç’°å¢ƒè¼¸å…¥ç¶²å€http://127.0.0.1:8000/order/create/ç¢ºèªæ˜¯å¦æˆåŠŸã€‚\nè€Œæ¸¬è©¦ç’°å¢ƒä¸€èˆ¬ä¿¡ç”¨å¡æ¸¬è©¦å¡è™Ÿ :\n4311-9511-1111-1111 å®‰å…¨ç¢¼ : ä»»æ„è¼¸å…¥ä¸‰ç¢¼æ•¸å­— 4311-9522-2222-2222 å®‰å…¨ç¢¼ : ä»»æ„è¼¸å…¥ä¸‰ç¢¼æ•¸å­— æµ·å¤–ä¿¡ç”¨å¡æ¸¬è©¦å¡è™Ÿ :\n4000-2011-1111-1111 å®‰å…¨ç¢¼ : ä»»æ„è¼¸å…¥ä¸‰ç¢¼æ•¸å­— åƒè€ƒè³‡æºï¼š\nç¶ ç•Œæ¸¬è©¦è³‡è¨Š\n","date":"4 January 2025","externalUrl":null,"permalink":"/douoduublog/posts/django-%E4%B8%AD%E7%B6%A0%E7%95%8C%E9%87%91%E6%B5%81%E4%B8%B2%E6%8E%A5%E4%B9%8B%E8%A9%B3%E7%B4%B0%E5%AD%B8%E7%BF%92/","section":"æ–‡ç« ","summary":"\u003ch2 class=\"relative group\"\u003eå‰è¨€ \n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\n    \n    \u003cspan\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å®šä½é»\"\u003e#\u003c/a\u003e\n    \u003c/span\u003e        \n    \n\u003c/h2\u003e\n\u003cp\u003eé‡‘æµåŠŸèƒ½æ˜¯ç¾ä»£ç¶²ç«™å¿…ä¸å¯å°‘çš„å•†æ¥­åŒ–åŠŸèƒ½ä¹‹ä¸€ã€‚æœ¬æ–‡ä¸­ï¼Œå°‡æŒ‡å°å¦‚ä½•åœ¨ Django æ¡†æ¶ä¸­ç¶“ç”±ç¶ ç•Œé‡‘æµå®Œæˆæ”¯ä»˜åŠŸèƒ½çš„ä¸²æ¥ã€‚æœ€çµ‚å°‡å¯¦ç¾ä¸€å€‹åŒ…æ‹¬æœå‹™é¸æ“‡ã€è¨‚å–®ç®¡ç†å’Œæ”¯ä»˜æ¸…ç®—çš„å®Œæ•´æµç¨‹ã€‚\u003c/p\u003e","title":"Django ä¸­ç¶ ç•Œé‡‘æµä¸²æ¥ä¹‹è©³ç´°å­¸ç¿’","type":"posts"},{"content":"","date":"4 January 2025","externalUrl":null,"permalink":"/douoduublog/tags/%E6%94%AF%E4%BB%98%E6%95%B4%E5%90%88/","section":"Tags","summary":"","title":"æ”¯ä»˜æ•´åˆ","type":"tags"},{"content":"","date":"4 January 2025","externalUrl":null,"permalink":"/douoduublog/tags/%E7%B6%A0%E7%95%8C%E9%87%91%E6%B5%81/","section":"Tags","summary":"","title":"ç¶ ç•Œé‡‘æµ","type":"tags"},{"content":"","date":"2 January 2025","externalUrl":null,"permalink":"/douoduublog/tags/git/","section":"Tags","summary":"","title":"Git","type":"tags"},{"content":"","date":"2 January 2025","externalUrl":null,"permalink":"/douoduublog/tags/github/","section":"Tags","summary":"","title":"GitHub","type":"tags"},{"content":"å‰è¨€ # åœ¨åœ˜éšŠå”ä½œé–‹ç™¼ä¸­ï¼Œç®¡ç† Git çš„ issues å’Œåˆ†æ”¯æ˜¯ä¸€é …è‡³é—œé‡è¦çš„å·¥ä½œã€‚ç‚ºäº†è®“æµç¨‹æ›´æ¸…æ™°ï¼Œä»¥ä¸‹åˆ†ç‚ºäº”å¤§æ­¥é©Ÿï¼Œå¾é–‹ issue åˆ°å®Œæˆåˆä½µï¼Œå¹«åŠ©åœ˜éšŠæå‡æ•ˆç‡ã€‚\næµç¨‹æ¦‚è¦½ # ä»¥ä¸‹æ˜¯æ•´é«”æµç¨‹æ¦‚è¦½ï¼š\né–‹ issueï¼šè¨˜éŒ„å•é¡Œæˆ–åŠŸèƒ½éœ€æ±‚ã€‚ å»ºç«‹åˆ†æ”¯ï¼šç‚ºæ¯å€‹ issue å»ºç«‹ç¨ç«‹åˆ†æ”¯ã€‚ è™•ç†å•é¡Œï¼šä¿®æ”¹ç¨‹å¼ç¢¼ï¼Œé€²è¡Œæ¸¬è©¦å’Œæäº¤ã€‚ æäº¤ PRï¼šå°‡ä¿®æ”¹å…§å®¹æäº¤ï¼Œé€²è¡Œå¯©æŸ¥ã€‚ åˆä½µåˆ†æ”¯ï¼šå°‡ PR åˆä½µè‡³ä¸»åˆ†æ”¯ã€‚ ä¸€ã€é–‹ issue # åœ¨é–‹ç™¼æµç¨‹ä¸­ï¼Œæ¸…æ™°åœ°è¨˜éŒ„å•é¡Œæˆ–åŠŸèƒ½éœ€æ±‚æ˜¯ç¬¬ä¸€æ­¥ã€‚é€šé issue é–‹ç¥¨åŠŸèƒ½ï¼Œåœ˜éšŠå¯ä»¥æ˜ç¢ºé–‹ç™¼ç›®æ¨™ï¼Œæå‡å”ä½œæ•ˆç‡ã€‚\n1.1 å‘½åè¦ç¯„ # ç‚ºäº†çµ±ä¸€ issue çš„å‘½åæ–¹å¼ï¼Œå»ºè­°ä½¿ç”¨ä»¥ä¸‹æ ¼å¼ï¼š\né¡å‹ æ ¼å¼ç¯„ä¾‹ ç”¨é€” åŠŸèƒ½æ–°å¢ [feat] æ–°å¢ç”¨æˆ¶ç™»å…¥åŠŸèƒ½ è¡¨ç¤ºé–‹ç™¼æ–°åŠŸèƒ½ã€‚ å•é¡Œä¿®å¾© [fix] ä¿®å¾©æŒ‰éˆ•æ¨£å¼ç•°å¸¸ è¡¨ç¤ºä¿®å¾© Bug æˆ–ç¨‹å¼éŒ¯èª¤ã€‚ æ–‡ä»¶æ›´æ–° [docs] æ›´æ–° README æ–‡ä»¶ è¡¨ç¤ºæ–‡æª”ç›¸é—œçš„æ›´æ”¹ã€‚ é‡æ§‹ä»£ç¢¼ [refactor] å„ªåŒ–æ•¸æ“šè™•ç†é‚è¼¯ è¡¨ç¤ºå°ä»£ç¢¼é€²è¡Œé‡æ§‹ï¼Œä½†ä¸æ”¹è®ŠåŠŸèƒ½ã€‚ æ¸¬è©¦ç›¸é—œ [test] å¢åŠ ç™»å…¥åŠŸèƒ½æ¸¬è©¦æ¡ˆä¾‹ è¡¨ç¤ºæ·»åŠ æˆ–ä¿®æ”¹æ¸¬è©¦ã€‚ å…¶ä»–ä»»å‹™ [chore] æ›´æ–°ä¾è³´é …ç‰ˆæœ¬ è¡¨ç¤ºå…¶ä»–ä¾‹è¡Œä»»å‹™ï¼Œä¾‹å¦‚å·¥å…·é…ç½®æ›´æ–°ç­‰ã€‚ 1.2 æ­¥é©Ÿ # æè¿°å•é¡Œæˆ–åŠŸèƒ½éœ€æ±‚ï¼šè¼¸å…¥æ¸…æ™°çš„å•é¡Œæè¿°ï¼Œä¾‹å¦‚ã€Œä¿®æ­£æŒ‰éˆ•æ¨£å¼ã€æˆ–ã€Œæ–°å¢ç”¨æˆ¶é©—è­‰åŠŸèƒ½ã€ã€‚ é™„åŠ ç›¸é—œé€£çµï¼šä¾‹å¦‚è¨­è¨ˆç¨¿ã€éœ€æ±‚æ–‡æª”ç­‰ï¼Œä¾¿æ–¼è¿½è¹¤å’ŒæŸ¥çœ‹è©³æƒ…ã€‚ äºŒã€å»ºç«‹åˆ†æ”¯ # æ¯å€‹ issue éƒ½æ‡‰è©²å°æ‡‰ä¸€å€‹ç¨ç«‹çš„åˆ†æ”¯ï¼Œä»¥ä¾¿é€²è¡Œéš”é›¢é–‹ç™¼ï¼Œç¢ºä¿ä¸»åˆ†æ”¯çš„ç©©å®šæ€§ã€‚\n2.1 å»ºç«‹åˆ†æ”¯çš„å‘½ä»¤ # git fetch origin git checkout -b issues/\u0026lt;issueç·¨è™Ÿ\u0026gt; ç¯„ä¾‹ : # å‡è¨­å»ºç«‹ç·¨è™Ÿç‚º 14 çš„ issue åˆ†æ”¯ï¼š\ngit fetch origin git checkout -b issues/14 ä¸‰ã€è™•ç† issue æ™‚çš„ commit # åœ¨è™•ç†å•é¡Œçš„éç¨‹ä¸­ï¼Œéœ€è¦é€²è¡Œä»¥ä¸‹æ­¥é©Ÿï¼š\n3.1 ä¿®æ”¹ç¨‹å¼ç¢¼ # é‡å° issue çš„éœ€æ±‚é€²è¡Œä¿®æ”¹ï¼Œä¸¦ç¢ºä¿æœ¬åœ°é‹è¡Œé€šéã€‚\n3.2 æäº¤ Commit # ä½¿ç”¨è¦ç¯„åŒ–çš„ Commit è¨Šæ¯ï¼Œå¹«åŠ©åœ˜éšŠå¿«é€Ÿç†è§£æäº¤å…§å®¹ã€‚\nå¸¸ç”¨ Commit è¦ç¯„ : # å–®å­— ç”¨é€” feat æ–°å¢åŠŸèƒ½ (feature)ã€‚ fix ä¿®å¾©å•é¡Œæˆ– Bugã€‚ modify ä¿®æ”¹ç¾æœ‰å…§å®¹ï¼Œä¾‹å¦‚æ›´æ–°æ–‡ä»¶æˆ–èª¿æ•´åŠŸèƒ½ã€‚ test å¢åŠ æˆ–ä¿®æ”¹æ¸¬è©¦ã€‚ refactor é‡æ§‹ä»£ç¢¼ï¼Œä¸æ”¹è®ŠåŠŸèƒ½ã€‚ chore ä¾‹è¡Œä»»å‹™ï¼Œä¾‹å¦‚æ›´æ–°ä¾è³´é …æˆ–å·¥å…·é…ç½®ã€‚ docs æ–‡ä»¶ç›¸é—œï¼Œä¾‹å¦‚æ›´æ–° README æˆ–èªªæ˜æ–‡æª”ã€‚ ç¯„ä¾‹ Commit # git add . git commit -m \u0026#34;fix: ä¿®æ­£æŒ‰éˆ•æ¨£å¼å•é¡Œ\u0026#34; 3.3 åˆä½µæ›´æ–°å…§å®¹ # å¦‚æœéœ€è¦å°‡ä¿®æ”¹åˆä½µè‡³ä¸Šä¸€å€‹ Commitï¼Œå¯ä»¥ä½¿ç”¨ï¼š\ngit commit --amend --no-edit å››ã€æäº¤ PR # ç•¶å®Œæˆ issue çš„é–‹ç™¼å¾Œï¼Œéœ€è¦æäº¤ Pull Requestï¼Œé‚€è«‹åœ˜éšŠæˆå“¡é€²è¡Œç¨‹å¼ç¢¼å¯©æŸ¥ã€‚\n4.1 æäº¤ PR çš„æ­¥é©Ÿ # æäº¤ä¿®æ”¹åˆ°é ç«¯åˆ†æ”¯ï¼š git push -u origin issues/\u0026lt;issueç·¨è™Ÿ\u0026gt; åœ¨ GitHub å¹³å°å»ºç«‹ PRï¼šå¡«å¯«æ¸…æ™°çš„æè¿°ï¼Œä¸¦é™„ä¸Šç›¸é—œé€£çµæˆ–æ˜¯åœ–ç‰‡ï¼Œä»¥ä¾¿å‘ŠçŸ¥å…¶ä»–æˆå“¡ä½ è™•ç†çš„å…§å®¹ã€‚\né€šçŸ¥åœ˜éšŠæˆå“¡ï¼š\nåœ¨å”ä½œå·¥å…·ä¸­ @åœ˜éšŠæˆå“¡ï¼Œè«‹å¤§å®¶é€²è¡Œå¯©æŸ¥ã€‚\nç¯„ä¾‹é€šçŸ¥ï¼š\næˆ‘æäº¤äº† PRï¼Œè«‹å¤§å®¶æŸ¥çœ‹ï¼é€£çµï¼š[PR é€£çµ]\näº”ã€åˆä½µåˆ†æ”¯ # åœ¨ Pull Request é€šéå¯©æŸ¥å¾Œï¼Œå¯ä»¥å°‡åˆ†æ”¯åˆä½µåˆ°ä¸»åˆ†æ”¯ã€‚\n5.1 åˆä½µå‰æ“ä½œ # ç¢ºä¿ä¸»åˆ†æ”¯å…§å®¹æœ€æ–°ï¼š git pull origin main åˆä½µåˆ†æ”¯ï¼š git merge issues/\u0026lt;issueç·¨è™Ÿ\u0026gt; åˆªé™¤åˆ†æ”¯ï¼ˆå¯é¸ï¼‰ï¼š git branch -d issues/\u0026lt;issueç·¨è™Ÿ\u0026gt; 5.2 è§£æ±ºè¡çª # è‹¥åœ¨åˆä½µåˆ†æ”¯æ™‚é‡åˆ°è¡çªï¼Œå¯æŒ‰ç…§ä»¥ä¸‹æ­¥é©Ÿè™•ç†ï¼š\næŸ¥çœ‹è¡çªæ–‡ä»¶ï¼Œæ‰‹å‹•ä¿®æ”¹è¡çªå…§å®¹ã€‚ ä¿®æ”¹å®Œæˆå¾Œï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¨™è¨˜è¡çªå·²è§£æ±ºï¼š git add \u0026lt;æ–‡ä»¶å\u0026gt; å¦‚æœä½¿ç”¨ git rebaseï¼ŒåŸ·è¡Œä»¥ä¸‹å‘½ä»¤ç¹¼çºŒï¼š git rebase --continue å¦‚æœä½¿ç”¨ git mergeï¼Œè¡çªè§£æ±ºå¾Œåˆä½µæœƒè‡ªå‹•å®Œæˆã€‚ 5.3 æ¨é€åˆä½µå¾Œçš„æ›´æ–° # åˆä½µå®Œæˆå¾Œï¼Œè¨˜å¾—å°‡æœ€æ–°çš„å…§å®¹æ¨é€åˆ°é ç«¯ï¼š\ngit push origin main æˆ–æ¨é€åˆ°å…¶ä»–é ç«¯åˆ†æ”¯ï¼š\ngit push origin \u0026lt;åˆ†æ”¯åç¨±\u0026gt; ç¸½çµ # é€™ç¯‡æ–‡ç« å¾é–‹ issue åˆ°æäº¤ PRã€åˆä½µåˆ†æ”¯ï¼Œå®Œæ•´ä»‹ç´¹äº† Git åœ˜éšŠå”ä½œçš„åŸºæœ¬æµç¨‹ï¼Œä¸¦æä¾›äº†ç›¸é—œå‘½ä»¤èˆ‡ç¯„ä¾‹ï¼Œå¸Œæœ›èƒ½å¹«åŠ©ä½ æå‡å·¥ä½œæ•ˆç‡ï¼\n","date":"2 January 2025","externalUrl":null,"permalink":"/douoduublog/posts/%E9%AB%98%E6%95%88%E7%AE%A1%E7%90%86-git-issues-%E5%92%8C%E5%88%86%E6%94%AF%E5%BE%9E%E9%96%8B%E7%A5%A8%E5%88%B0-pr-%E7%9A%84%E5%AE%8C%E6%95%B4%E6%B5%81%E7%A8%8B/","section":"æ–‡ç« ","summary":"\u003ch2 class=\"relative group\"\u003eå‰è¨€ \n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\n    \n    \u003cspan\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å®šä½é»\"\u003e#\u003c/a\u003e\n    \u003c/span\u003e        \n    \n\u003c/h2\u003e\n\u003cp\u003eåœ¨åœ˜éšŠå”ä½œé–‹ç™¼ä¸­ï¼Œç®¡ç† Git çš„ issues å’Œåˆ†æ”¯æ˜¯ä¸€é …è‡³é—œé‡è¦çš„å·¥ä½œã€‚ç‚ºäº†è®“æµç¨‹æ›´æ¸…æ™°ï¼Œä»¥ä¸‹åˆ†ç‚ºäº”å¤§æ­¥é©Ÿï¼Œå¾é–‹ issue åˆ°å®Œæˆåˆä½µï¼Œå¹«åŠ©åœ˜éšŠæå‡æ•ˆç‡ã€‚\u003c/p\u003e","title":"é«˜æ•ˆç®¡ç† Git Issues å’Œåˆ†æ”¯ï¼šå¾é–‹ç¥¨åˆ° PR çš„å®Œæ•´æµç¨‹","type":"posts"},{"content":"","date":"1 January 2025","externalUrl":null,"permalink":"/douoduublog/tags/ngrok/","section":"Tags","summary":"","title":"Ngrok","type":"tags"},{"content":"å‰è¨€ # é€™ç¯‡æ•™å­¸é‡å°æ–°æ‰‹ï¼Œå°‡ä»¥ç°¡å–®æ˜“æ‡‚çš„æ–¹å¼ï¼Œæ•™æ‚¨å¦‚ä½•åœ¨ Mac çš„ VSCode çµ‚ç«¯æ©Ÿ ä¸­ï¼Œä½¿ç”¨ Ngrok ä¾†åˆ†äº« Django å°ˆæ¡ˆã€‚\nNgrok æ˜¯ä¸€å€‹éå¸¸å¯¦ç”¨çš„å·¥å…·ï¼Œå¯ä»¥å¿«é€Ÿå°‡æœ¬åœ°æœå‹™åˆ†äº«è‡³å¤–éƒ¨ç¶²çµ¡ï¼Œé©ç”¨æ–¼ API æ¸¬è©¦ã€Webhook å›èª¿æˆ–é ç«¯é–‹ç™¼ã€‚æœ¬ç¯‡ä¹Ÿæœƒæä¾›å¯èƒ½é‡åˆ°çš„å•é¡ŒåŠè§£æ±ºæ–¹æ³•ï¼Œè®“æ‚¨èƒ½é †åˆ©å®Œæˆæ“ä½œã€‚\nä¸€ã€ä»€éº¼æ˜¯ Ngrokï¼Ÿ # 1.1 Ngrok æ˜¯ä»€éº¼ï¼Ÿ # Ngrok æ˜¯ä¸€æ¬¾å¼·å¤§çš„å…§ç¶²ç©¿é€å·¥å…·ï¼Œå¯å°‡æœ¬åœ°é–‹ç™¼ç’°å¢ƒæ˜ å°„ç‚ºå¯å¾å¤–éƒ¨è¨ªå•çš„ç¶²å€ï¼Œç„¡éœ€é€²è¡Œç¹ç‘£çš„ä¼ºæœå™¨è¨­å®šã€‚å®ƒé©ç”¨æ–¼ï¼š\næ¸¬è©¦ APIï¼šç„¡éœ€å°‡ç¨‹å¼éƒ¨ç½²åˆ°ç·šä¸Šç’°å¢ƒï¼Œå³å¯ä¾›æ¸¬è©¦ã€‚ å±•ç¤ºæœ¬åœ°å°ˆæ¡ˆï¼šå¯å°‡é–‹ç™¼ä¸­çš„ç¶²ç«™åˆ†äº«çµ¦åœ˜éšŠæˆ–å®¢æˆ¶ã€‚ Webhook å›èª¿ï¼šç”¨æ–¼æ¥æ”¶ç¬¬ä¸‰æ–¹æœå‹™çš„è«‹æ±‚ï¼Œé€²è¡Œé–‹ç™¼èˆ‡èª¿è©¦ã€‚ 1.2 ä¸»è¦åŠŸèƒ½ç°¡ä»‹ # å…§ç¶²ç©¿é€ï¼šå¿«é€Ÿå°‡æœ¬åœ°æœå‹™è½‰æ›ç‚ºå¤–éƒ¨ç¶²å€ã€‚ å³æ™‚æµé‡ç›£æ§ï¼šæª¢è¦–è«‹æ±‚çš„è©³ç´°è³‡è¨Šï¼Œæ–¹ä¾¿é–‹ç™¼èª¿è©¦ã€‚ é«˜ç´šåŠŸèƒ½ï¼ˆä»˜è²»ç‰ˆï¼‰ï¼šæ”¯æ´è‡ªè¨‚åŸŸåã€TLS åŠ å¯†ç­‰é€²éšåŠŸèƒ½ã€‚ äºŒã€å®‰è£å’Œè¨­ç½® Ngrok # 2.1 å®‰è£ Ngrok # (a) å®‰è£ Homebrewï¼ˆå¦‚æœå°šæœªå®‰è£ï¼‰ # åœ¨ VSCode çš„çµ‚ç«¯æ©Ÿä¸­åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ä¾†å®‰è£ Homebrewï¼š\n/bin/bash -c \u0026#34;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\u0026#34; é©—è­‰ Homebrew æ˜¯å¦å®‰è£æˆåŠŸï¼š\nbrew --version (b) ä½¿ç”¨ Homebrew å®‰è£ Ngrok # å®‰è£ Ngrokï¼š\nbrew install ngrok é©—è­‰å®‰è£æ˜¯å¦æˆåŠŸï¼š\nngrok version 2.2 è¨»å†Šèˆ‡èªè­‰ Ngrok # (a) è¨»å†Šå¸³æˆ¶ # å‰å¾€ Ngrok å®˜ç¶² è¨»å†Šå…è²»å¸³æˆ¶ã€‚ (b) ç²å–èªè­‰ç¢¼ # ç™»å…¥å¾Œï¼Œåœ¨æ§åˆ¶å°æ‰¾åˆ°æ‚¨çš„ authtokenã€‚ (c) åœ¨çµ‚ç«¯æ©Ÿä¸­èªè­‰ # åœ¨ VSCode çµ‚ç«¯æ©ŸåŸ·è¡Œï¼š ngrok authtoken \u0026lt;æ‚¨çš„èªè­‰ç¢¼\u0026gt; èªè­‰æˆåŠŸå¾Œï¼ŒNgrok å³å¯æ­£å¸¸ä½¿ç”¨ã€‚\nä¸‰ã€å•Ÿå‹• Ngrokï¼ˆä»¥ Django ç‚ºä¾‹ï¼‰ # 3.1 å•Ÿå‹• Django é–‹ç™¼ä¼ºæœå™¨ # é€²å…¥ Django å°ˆæ¡ˆç›®éŒ„ï¼Œå•Ÿå‹•ä¼ºæœå™¨ï¼š\npython manage.py runserver æ­¤æ™‚ï¼Œä¼ºæœå™¨æœƒé‹è¡Œåœ¨ http://127.0.0.1:8000ã€‚\n3.2 å•Ÿå‹• Ngrok # åœ¨å¦ä¸€å€‹çµ‚ç«¯æ©Ÿè¦–çª—åŸ·è¡Œï¼š\nngrok http 8000 Ngrok å•Ÿå‹•å¾Œï¼Œæ‚¨æœƒçœ‹åˆ°é¡ä¼¼ä»¥ä¸‹çš„è¼¸å‡ºï¼š\nForwarding https://abc123.ngrok.io -\u0026gt; http://127.0.0.1:8000 3.3 è¨ªå•å°ˆæ¡ˆ # è¤‡è£½ https://abc123.ngrok.ioï¼Œåœ¨ç€è¦½å™¨ä¸­é–‹å•Ÿï¼Œå³å¯é€éå¤–éƒ¨ç¶²çµ¡è¨ªå• Django å°ˆæ¡ˆã€‚ åœ˜éšŠæˆ–å®¢æˆ¶å¯ç›´æ¥é€éè©²ç¶²å€é€²è¡Œæ¸¬è©¦ã€‚ å››ã€å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ³• # 4.1 å¸¸è¦‹å•é¡Œ # ç„¡æ³•åˆ†äº«ç¶²å€ï¼šè«‹ç¢ºä¿ Django ä¼ºæœå™¨å·²æˆåŠŸå•Ÿå‹•ï¼Œä¸¦ç¢ºèªåŸ è™Ÿé…ç½®æ­£ç¢ºã€‚ èªè­‰å¤±æ•—ï¼šè«‹ç¢ºèªè¼¸å…¥çš„ authtoken ç„¡èª¤ã€‚ 4.2 è§£æ±ºæ–¹æ³• # é‡å•Ÿæœå‹™ï¼šé‡æ–°å•Ÿå‹• Django é–‹ç™¼ä¼ºæœå™¨èˆ‡ Ngrokã€‚ å‡ç´šç‰ˆæœ¬ï¼šç¢ºä¿ Ngrok æ˜¯æœ€æ–°ç‰ˆæœ¬ã€‚ æª¢æŸ¥ç¶²è·¯ï¼šç¢ºä¿ç¶²è·¯ç©©å®šï¼Œé¿å… Ngrok ç„¡æ³•æ­£å¸¸é‹è¡Œã€‚ äº”ã€é€²éšåŠŸèƒ½ä»‹ç´¹ # 5.1 è‡ªè¨‚åŸŸåï¼ˆä»˜è²»åŠŸèƒ½ï¼‰ # è‹¥ä½¿ç”¨ä»˜è²»ç‰ˆ Ngrokï¼Œå¯è¨­å®šè‡ªè¨‚åŸŸåï¼š\nngrok http -hostname=custom.yourdomain.com 8000 5.2 å³æ™‚æµé‡ç›£æ§ # Ngrok æä¾›æœ¬åœ°ç›£æ§ä»‹é¢ï¼Œå…è¨±é–‹ç™¼è€…æª¢è¦–æ‰€æœ‰é€²å…¥éš§é“çš„è«‹æ±‚è©³æƒ…ï¼Œå¹«åŠ©åµéŒ¯èˆ‡åˆ†ææµé‡æ¨¡å¼ã€‚\nåœ¨ç€è¦½å™¨ä¸­è¼¸å…¥ï¼š http://127.0.0.1:4040 å¯æª¢è¦–è«‹æ±‚ Headersã€Payload ç­‰ç´°ç¯€ã€‚ å…­ã€Django ç›¸é—œè¨­å®šå»ºè­° # 6.1 å…è¨±å¤–éƒ¨é€£æ¥ # åœ¨ settings.py è¨­å®š ALLOWED_HOSTSï¼š\nALLOWED_HOSTS = [\u0026#39;127.0.0.1\u0026#39;, \u0026#39;.ngrok.io\u0026#39;] 6.2 èª¿æ•´ Debug æ¨¡å¼ # ç¢ºä¿ DEBUG = True ä»¥ä¾¿åœ¨é–‹ç™¼ç’°å¢ƒä¸­æ­£å¸¸ä½¿ç”¨ Ngrokï¼Œé¿å…è«‹æ±‚è¢« Django çš„å®‰å…¨è¨­å®šæ””æˆªï¼š\nDEBUG = True ä¸ƒã€Ngrok èˆ‡å…¶ä»–å·¥å…·æ¯”è¼ƒ # é™¤äº† Ngrokï¼Œé‚„æœ‰å…¶ä»–å…§ç¶²ç©¿é€å·¥å…·å¯ä¾›é¸æ“‡ï¼Œä»¥ä¸‹æ˜¯ä¸‰ç¨®å¸¸è¦‹å·¥å…·çš„ç°¡è¦æ¯”è¼ƒï¼š\nå·¥å…· å…è¨»å†Š è‡ªè¨‚åŸŸå é€£ç·šç©©å®šæ€§ é©ç”¨å ´æ™¯ LocalTunnel âœ… âŒ è¼ƒä½ çŸ­æœŸæ¸¬è©¦ APIã€ç°¡å–®å±•ç¤º Expose âŒ âœ… ä¸­ç­‰ éœ€è¦è‡ªè¨‚åŸŸåèˆ‡å…è²» SSL Ngrok âŒ âœ…ï¼ˆä»˜è²»ï¼‰ é«˜ é•·æœŸç©©å®šæ‡‰ç”¨ã€Webhook æ¸¬è©¦ é¸æ“‡å»ºè­°ï¼š\nçŸ­æœŸæ¸¬è©¦ï¼šä½¿ç”¨ LocalTunnelï¼Œå¿«é€Ÿå»ºç«‹è‡¨æ™‚æ¸¬è©¦ç’°å¢ƒã€‚ éœ€è¦è‡ªè¨‚åŸŸåï¼šé¸æ“‡ Exposeï¼Œå…è²»æ”¯æ´ SSLï¼Œé©åˆå±•ç¤ºæ‡‰ç”¨ã€‚ ç©©å®šæ€§èˆ‡é€²éšåŠŸèƒ½ï¼šNgrok æä¾›å¼·å¤§ç›£æ§èˆ‡ CI/CD æ•´åˆï¼Œé©åˆé•·æœŸå°ˆæ¡ˆã€‚ å…«ã€çµè«– # Ngrok æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼·å¤§çš„å…§ç¶²ç©¿é€å·¥å…·ï¼Œé©ç”¨æ–¼å„ç¨®é–‹ç™¼éœ€æ±‚ï¼Œç‰¹åˆ¥æ˜¯åœ¨ API æ¸¬è©¦ã€Webhook å›èª¿èˆ‡é ç«¯é–‹ç™¼ç­‰å ´æ™¯ã€‚é€éæœ¬æ–‡çš„æ•™å­¸ï¼Œä½ æ‡‰è©²å·²ç¶“æŒæ¡äº†å¦‚ä½• å®‰è£ã€èªè­‰ã€ä½¿ç”¨ Ngrokï¼Œä¸¦äº†è§£äº†å®ƒèˆ‡å…¶ä»–å·¥å…·çš„æ¯”è¼ƒã€‚\nå¦‚æœä½ çš„éœ€æ±‚åªæ˜¯ çŸ­æœŸæ¸¬è©¦æˆ–è‡¨æ™‚å±•ç¤ºï¼ŒLocalTunnel å¯èƒ½æ˜¯æ›´å¿«çš„é¸æ“‡ï¼›å¦‚æœéœ€è¦ ç©©å®šçš„é€£ç·šèˆ‡ç›£æ§åŠŸèƒ½ï¼ŒNgrok ä¾ç„¶æ˜¯æœ€ä½³æ–¹æ¡ˆã€‚\nå¸Œæœ›é€™ç¯‡æ•™å­¸èƒ½å¹«åŠ©ä½ æ›´é †åˆ©åœ°ä½¿ç”¨ Ngrokï¼Œæå‡é–‹ç™¼æ•ˆç‡ï¼ğŸš€\n","date":"1 January 2025","externalUrl":null,"permalink":"/douoduublog/posts/%E6%96%B0%E6%89%8B%E5%BF%85%E5%82%99ngrok-%E8%A9%B3%E7%9B%A1%E6%95%99%E5%AD%B8%E6%8C%87%E5%8D%97/","section":"æ–‡ç« ","summary":"\u003ch2 class=\"relative group\"\u003eå‰è¨€ \n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\n    \n    \u003cspan\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å®šä½é»\"\u003e#\u003c/a\u003e\n    \u003c/span\u003e        \n    \n\u003c/h2\u003e\n\u003cp\u003eé€™ç¯‡æ•™å­¸é‡å°æ–°æ‰‹ï¼Œå°‡ä»¥ç°¡å–®æ˜“æ‡‚çš„æ–¹å¼ï¼Œæ•™æ‚¨å¦‚ä½•åœ¨ \u003cstrong\u003eMac çš„ VSCode çµ‚ç«¯æ©Ÿ\u003c/strong\u003e ä¸­ï¼Œä½¿ç”¨ Ngrok ä¾†åˆ†äº« Django å°ˆæ¡ˆã€‚\u003c/p\u003e","title":"æ–°æ‰‹å¿…å‚™ï¼šNgrok è©³ç›¡æ•™å­¸æŒ‡å—","type":"posts"},{"content":"","date":"21 December 2024","externalUrl":null,"permalink":"/douoduublog/tags/line/","section":"Tags","summary":"","title":"Line","type":"tags"},{"content":"å‰è¨€ # åœ¨é€™ç¯‡æ–‡ç« ä¸­ï¼Œå°‡è©³ç´°ä»‹ç´¹å¦‚ä½•åœ¨ Django é …ç›®ä¸­å¯¦ç¾ LINE ç™»å…¥åŠŸèƒ½ã€‚æˆ‘å€‘æœƒä½¿ç”¨ django-allauth é€™å€‹å¼·å¤§çš„ç¬¬ä¸‰æ–¹åº«ï¼Œè®“é–‹ç™¼è€…å¯ä»¥è¼•é¬†é›†æˆå„ç¨®ç¤¾äº¤å¹³å°çš„ç™»å…¥åŠŸèƒ½ã€‚\nLINE æ˜¯ä¸€æ¬¾æµè¡Œçš„å³æ™‚é€šè¨Šè»Ÿé«”ï¼Œå®ƒçš„é–‹æ”¾å¹³å°ç‚ºé–‹ç™¼è€…æä¾›äº†æ–¹ä¾¿çš„ APIï¼Œè®“ç”¨æˆ¶å¯ä»¥ä½¿ç”¨ LINE è³¬è™Ÿå¿«é€Ÿç™»å…¥ç¶²ç«™æˆ–æ‡‰ç”¨ç¨‹å¼ã€‚å°æ–¼éœ€è¦å¿«é€Ÿæå‡ç”¨æˆ¶é«”é©—çš„ç¶²ç«™ä¾†èªªï¼Œç¤¾äº¤ç™»å…¥æ˜¯éå¸¸é‡è¦çš„åŠŸèƒ½ã€‚\næœ¬æ–‡çš„ç›®æ¨™æ˜¯å¹«åŠ©é–‹ç™¼è€…å¾é›¶åˆ°æœ‰ï¼Œå¯¦ç¾ä¸€å€‹æ”¯æŒ LINE ç™»å…¥çš„ Django é …ç›®ï¼Œä¸¦æ¶µè“‹å®Œæ•´çš„æµç¨‹èˆ‡å¯¦ç¾ç´°ç¯€ã€‚\næµç¨‹åœ– # [ç”¨æˆ¶é»æ“Šç™»å…¥æŒ‰éˆ•] â†“ [è·³è½‰åˆ° LINE æˆæ¬Šé é¢] â†“ [ç”¨æˆ¶æˆæ¬ŠæˆåŠŸ] â†“ [å›èª¿åˆ° Django URL ä¸¦è™•ç†æˆæ¬Šç¢¼] â†“ [å®Œæˆç™»å…¥ï¼Œè·³è½‰åˆ°æŒ‡å®šé é¢] ä¸€ã€ç’°å¢ƒæº–å‚™ # åœ¨é–‹å§‹ä¹‹å‰ï¼Œç¢ºä¿ä½ å·²ç¶“æº–å‚™å¥½ä»¥ä¸‹ç’°å¢ƒï¼š\n1 ã€å®‰è£ Python 3.6 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚\n2 ã€å®‰è£ä¸¦è¨­å®š Djangoï¼ˆæ¨è–¦ç‰ˆæœ¬ 3.2 æˆ–æ›´é«˜ï¼‰ã€‚\n3 ã€ç†Ÿæ‚‰åŸºæœ¬çš„ Django é…ç½®èˆ‡é–‹ç™¼æµç¨‹ã€‚\næ­¤å¤–ï¼Œç¢ºä¿ä½ å·²è¨»å†Š LINE Developers è³¬è™Ÿï¼Œå› ç‚ºç¨å¾Œæˆ‘å€‘éœ€è¦é…ç½® LINE çš„é–‹ç™¼è€…å¹³å°ã€‚\näºŒã€è¨»å†Š LINE é–‹ç™¼è€…è³¬è™Ÿä¸¦å‰µå»ºæ‡‰ç”¨ # 1ã€ ç™»éŒ„ LINE Developersã€‚\n2ã€ å‰µå»ºä¸€å€‹æ–°çš„ Channelï¼š\né»æ“Š Create a new providerï¼Œå¡«å¯«æ‡‰ç”¨åç¨±ã€‚\nåœ¨ Channels ä¸­é¸æ“‡ Create a Messaging API channel æˆ– Create a Web Appï¼ˆæ­¤è™•æˆ‘å€‘é¸ Web Appï¼‰ã€‚\n3ã€ ç²å– Channel ID èˆ‡ Channel Secretï¼š\nChannel IDï¼šç¨å¾Œé…ç½®ç‚º client_idã€‚\nChannel Secretï¼šç¨å¾Œé…ç½®ç‚º secretã€‚\n4ã€ é…ç½® LINE Developers ä¸­å¢åŠ å›èª¿ URLï¼š\nåœ¨ LINE é–‹ç™¼è€…å¹³å°çš„æ‡‰ç”¨è¨­ç½®ä¸­ï¼Œæ‰¾åˆ° Callback URLã€‚ https://yourdomain.com/accounts/line/login/callback/ å¦‚æœåœ¨æœ¬åœ°æ¸¬è©¦ï¼Œå¯ä»¥ä½¿ç”¨å·¥å…·å¦‚ ngrokï¼Œç”Ÿæˆè‡¨æ™‚çš„ HTTPS URLã€‚\næˆ–æ˜¯åƒæˆ‘ä½œç‚ºæ¸¬è©¦ç’°å¢ƒä½¿ç”¨:\nhttp://127.0.0.1:8000/accounts/line/login/callback/ 5ã€åœ¨æ ¹ç›®éŒ„å¢åŠ  URL\npath(\u0026#34;accounts/\u0026#34;, include(\u0026#34;allauth.urls\u0026#34;)) ä¸‰ã€å®‰è£å¿…è¦çš„ä¾è³´ # 3.1 å®‰è£ django-allauth # pip install django-allauth è‹¥æ˜¯ä½¿ç”¨ poetry ç’°å¢ƒï¼Œå‰‡è¼¸å…¥ï¼š\npoetry add django-allauth å››ã€é…ç½® Django # 4.1 æ·»åŠ æ‡‰ç”¨åˆ° INSTALLED_APPS # # åœ¨ settings.py ä¸­æ·»åŠ æ‡‰ç”¨ INSTALLED_APPS += [ \u0026#34;django.contrib.sites\u0026#34;, # æ”¯æŒå¤šç«™é»åŠŸèƒ½ï¼Œæ˜¯ django-allauth çš„ä¾è³´ \u0026#34;allauth\u0026#34;, # django-allauth ä¸»æ¡†æ¶ \u0026#34;allauth.account\u0026#34;, # æä¾›å¸³è™Ÿè¨»å†Šã€ç™»å…¥ç­‰åŠŸèƒ½ \u0026#34;allauth.socialaccount\u0026#34;, # æ”¯æŒç¤¾äº¤å¹³å°ç™»å…¥ \u0026#34;allauth.socialaccount.providers.line\u0026#34;, # LINE ç™»å…¥çš„æ”¯æŒ ] # è¨­ç½®ç«™é» IDï¼Œå°æ‡‰ Django sites æ¡†æ¶ä¸­çš„ä¸»ç«™é» SITE_ID = 1 django.contrib.sitesï¼šDjango çš„å¤šç«™é»æ¡†æ¶ï¼Œdjango-allauth å¿…éœ€ã€‚\nallauth.socialaccount.providers.lineï¼šå•Ÿç”¨ LINE ä½œç‚ºç™»å…¥æä¾›è€…ã€‚\n4.2 é…ç½® LINE æä¾›è€… # åœ¨ settings.py ä¸­ï¼Œæ·»åŠ  LINE çš„ç¤¾äº¤ç™»å…¥é…ç½®ï¼š\nfrom dotenv import load_dotenv import os # åŠ è¼‰ç’°å¢ƒè®Šé‡ï¼ˆä¾†è‡ª .env æ–‡ä»¶ï¼‰ load_dotenv() SOCIALACCOUNT_PROVIDERS = { \u0026#34;line\u0026#34;: { \u0026#34;APP\u0026#34;: { \u0026#34;client_id\u0026#34;: os.getenv(\u0026#34;LINE_CLIENT_ID\u0026#34;),# å¾ç’°å¢ƒè®Šé‡ä¸­è®€å– LINE Channel ID \u0026#34;secret\u0026#34;: os.getenv(\u0026#34;LINE_SECRET\u0026#34;),# å¾ç’°å¢ƒè®Šé‡ä¸­è®€å– LINE Channel Secret \u0026#34;key\u0026#34;: \u0026#34;\u0026#34;, }, \u0026#34;SCOPE\u0026#34;: [\u0026#34;profile\u0026#34;, \u0026#34;openid\u0026#34;, \u0026#34;email\u0026#34;],# è¦æ±‚çš„æ¬Šé™ç¯„åœï¼šç”¨æˆ¶è³‡æ–™ã€é–‹æ”¾èº«ä»½å’Œé›»å­éƒµä»¶ \u0026#34;AUTH_PARAMS\u0026#34;: {\u0026#34;response_type\u0026#34;: \u0026#34;code\u0026#34;}, # æˆæ¬Šé¡å‹ï¼šä½¿ç”¨æˆæ¬Šç¢¼ }, } å°‡ LINE æ†‘æ“šå­˜å„²åˆ° .env æ–‡ä»¶ä¸­ï¼š\nLINE_CLIENT_ID = ä½ çš„LINE Channel ID LINE_SECRET = ä½ çš„LINE Channel Secret 4.3 é…ç½®ç™»éŒ„èˆ‡è·³è½‰ # åœ¨ settings.py ä¸­ï¼Œé…ç½®ç™»å…¥å’Œè·³è½‰è·¯å¾‘ï¼š\n# é…ç½®ç™»å…¥å’Œè·³è½‰çš„ URL LOGIN_URL = \u0026#34;/users/login/\u0026#34; # ç”¨æˆ¶æœªç™»éŒ„æ™‚é‡å®šå‘çš„ç™»éŒ„é é¢ LOGIN_REDIRECT_URL = \u0026#34;/\u0026#34; # ç™»éŒ„æˆåŠŸå¾Œçš„é‡å®šå‘é é¢ ACCOUNT_SIGNUP_REDIRECT_URL = \u0026#34;/\u0026#34; # è¨»å†ŠæˆåŠŸå¾Œçš„é‡å®šå‘é é¢ SOCIALACCOUNT_LOGIN_ON_GET = True # é»æ“Šç™»å…¥æŒ‰éˆ•å¾Œç«‹å³è·³è½‰åˆ° LINE æˆæ¬Šé é¢ LOGIN_URL ï¼šæœªç™»éŒ„ç”¨æˆ¶è¢«é‡å®šå‘çš„è·¯å¾‘ã€‚\nLOGIN_REDIRECT_URL ï¼šç™»éŒ„æˆåŠŸå¾Œçš„è·³è½‰åœ°å€ã€‚\nSOCIALACCOUNT_LOGIN_ON_GET ï¼šç”¨æˆ¶é»æ“Šç™»å…¥å¾Œç›´æ¥è·³è½‰æˆæ¬Šé é¢ï¼Œç„¡éœ€é¡å¤–æ“ä½œã€‚\näº”ã€é‹è¡Œæ•¸æ“šåº«é·ç§» # å•Ÿç”¨ sites æ¡†æ¶å’Œç¤¾äº¤è³¬è™Ÿçš„æ•¸æ“šæ¨¡å‹ï¼š\npython manage.py migrate æ­¤å‘½ä»¤æ‡‰åœ¨çµ‚ç«¯ä¸­åŸ·è¡Œï¼Œç”¨æ–¼å‰µå»º django-allauth å’Œ django.contrib.sites æ‰€éœ€çš„æ•¸æ“šè¡¨ã€‚ ç¢ºä¿æ‰€æœ‰é…ç½®å’Œæ‡‰ç”¨å·²æ­£ç¢ºæ·»åŠ åˆ° INSTALLED_APPS ä¸­ã€‚ å…­ã€æ·»åŠ ç™»å…¥æŒ‰éˆ• # åœ¨ç¶²ç«™çš„æ¨¡æ¿æª”æ¡ˆä¸­ï¼Œä½¿ç”¨ django-allauth æä¾›çš„æ¨¡æ¿æ¨™ç±¤ç”Ÿæˆ LINE ç™»å…¥æŒ‰éˆ•ï¼š\n\u0026lt;!--templates/login.html--\u0026gt; \u0026lt;a href=\u0026#34;{% provider_login_url \u0026#39;line\u0026#39; %}\u0026#34;\u0026gt;Login with LINE\u0026lt;/a\u0026gt; é€™æ®µä»£ç¢¼ä½¿ç”¨äº† django-allauth çš„æ¨¡æ¿æ¨™ç±¤ï¼Œç”Ÿæˆ LINE ç™»å…¥çš„ URLã€‚ç•¶ç”¨æˆ¶é»æ“Šå¾Œï¼Œå°‡è¢«é‡å®šå‘åˆ° LINE çš„æˆæ¬Šé é¢ã€‚\nä¸ƒã€æ¸¬è©¦ç™»å…¥æµç¨‹ # 7.1 æ¸¬è©¦æˆæ¬Š # 1ã€å•Ÿå‹•æœ¬åœ°é–‹ç™¼ä¼ºæœå™¨ï¼š\npython manage.py runserver 2ã€æ‰“é–‹ç€è¦½å™¨ï¼Œè¨ªå• /users/login/ï¼Œé»æ“Š Login with LINEã€‚\n3ã€ä½ å°‡è¢«é‡å®šå‘åˆ° LINE çš„æˆæ¬Šé é¢ï¼Œå…è¨±è¨ªå•å¾Œè¿”å›ç¶²ç«™ã€‚\n7.2 ç²å–ç”¨æˆ¶æ•¸æ“š # å¦‚æœéœ€è¦ä½¿ç”¨æˆæ¬Šå¾Œçš„ç”¨æˆ¶è³‡æ–™ï¼Œå¯ä»¥é€šé SocialAccount æ¨¡å‹ç²å–ï¼š\n#views.py from allauth.socialaccount.models import SocialAccount # ç²å–ç•¶å‰ç™»éŒ„ç”¨æˆ¶çš„ LINE è³‡æ–™ def user_profile(request): user = request.user if user.is_authenticated: # æŸ¥è©¢ LINE çš„ SocialAccount è³‡æ–™ social_account = SocialAccount.objects.filter(user=user, provider=\u0026#39;line\u0026#39;).first() if social_account: line_profile = social_account.extra_data # åŒ…å« LINE ç”¨æˆ¶ä¿¡æ¯ return JsonResponse(line_profile) # è¿”å›ç”¨æˆ¶è³‡æ–™ä½œç‚º JSON éŸ¿æ‡‰ return HttpResponse(\u0026#34;Not logged in.\u0026#34;) # å¦‚æœæœªç™»éŒ„ï¼Œè¿”å›æç¤º SocialAccount æ¨¡å‹ç”¨æ–¼å­˜å„²ä¾†è‡ªç¤¾äº¤å¹³è‡ºçš„ç”¨æˆ¶æ•¸æ“šã€‚ è©²è¦–åœ–æœƒè¿”å›ç•¶å‰ç”¨æˆ¶çš„ LINE è³‡æ–™æˆ–æç¤ºæœªç™»éŒ„ã€‚ å…«ã€éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒ # åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­éƒ¨ç½²æ™‚ï¼Œéœ€æ³¨æ„ï¼š\n1ã€ ä½¿ç”¨ HTTPSï¼šLINE è¦æ±‚å›èª¿ URL å¿…é ˆæ˜¯ HTTPSã€‚\n2ã€ æ­£ç¢ºé…ç½®åŸŸåï¼šç¢ºä¿åœ¨ LINE é–‹ç™¼è€…å¹³å°çš„ Callback URL èˆ‡ä½ çš„ç«™é»åŸŸåä¸€è‡´ã€‚\n3ã€ éš±è—æ•æ„Ÿä¿¡æ¯ï¼šé€šé .env æ–‡ä»¶æˆ–ç’°å¢ƒè®Šé‡å­˜å„² client_id å’Œ secretã€‚\n8.1 åœ¨éƒ¨ç½²æ™‚çš„é…ç½®å…§å®¹ # ä»¥ä¸‹æ˜¯ä½¿ç”¨ zeabur éƒ¨ç½²æ™‚å¢åŠ çš„å…§å®¹\nåœ¨ settings.py ä¸­æ·»åŠ ï¼š\nLINE_CALLBACK_URL = os.getenv( \u0026#34;LINE_CALLBACK_URL\u0026#34;, \u0026#34;http://localhost:8000/accounts/line/login/callback/\u0026#34; ) SECURE_PROXY_SSL_HEADER = (\u0026#34;HTTP_X_FORWARDED_PROTO\u0026#34;, \u0026#34;https\u0026#34;) CSRF_TRUSTED_ORIGINS = [ \u0026#34;https://trico.zeabur.app\u0026#34;, \u0026#34;http://127.0.0.1:8000\u0026#34;, ] ALLOWED_HOSTS = [ \u0026#34;127.0.0.1\u0026#34;, \u0026#34;localhost\u0026#34;, \u0026#34;*\u0026#34;, ] åœ¨.envä¸­é…ç½®ï¼š\nLINE_CALLBACK_URL=https://trico.zeabur.app/accounts/line/login/callback/ åœ¨ LINE Developers çš„ Callback URL ä¸­åŠ å…¥ä»¥ä¸‹å…§å®¹ï¼Œä¸€å€‹æ˜¯ä½ çš„æ¸¬è©¦ç’°å¢ƒï¼Œä¸€å€‹æ˜¯ä½ éƒ¨ç½²çš„ç¶²å€\nhttp://127.0.0.1:8000/accounts/line/login/callback/ https://trico.zeabur.app/accounts/line/login/callback/ æ³¨æ„ï¼ï¼ï¼ ä¸å¯ä»¥åŠ é€—è™Ÿ ä¹ã€çµèª # é€™æ¨£æ‡‰è©²å·²ç¶“æˆåŠŸå¯¦ç¾äº† LINE ç™»å…¥åŠŸèƒ½ï¼\ndjango-allauth ä¸åƒ…æ”¯æŒ LINEï¼Œé‚„å¯ä»¥è¼•é¬†é›†æˆå…¶ä»–ç¤¾äº¤å¹³å°ï¼ˆå¦‚ç¶å®šå¤šå€‹è³¬è™Ÿã€ç”¨æˆ¶è³‡æ–™åŒæ­¥ï¼Œåƒæ˜¯ Googleã€Facebook ç­‰ï¼‰ã€‚\nå¯ä»¥é€²ä¸€æ­¥æ¢ç´¢å…¶ APIï¼Œå¯¦ç¾æ›´å¤šåŠŸèƒ½ï¼Œå¦‚ç”¨æˆ¶è³‡æ–™åŒæ­¥ã€ç¶å®šå¤šå€‹ç¤¾äº¤è³¬è™Ÿç­‰ï¼Œè®“ç¶²ç«™æ›´åŠ å¯¦ç”¨ã€‚\nåƒè€ƒè³‡æºï¼š\ndjango-allauth å®˜æ–¹æ–‡æª”\nLINE_Developers å¹³å°\n","date":"21 December 2024","externalUrl":null,"permalink":"/douoduublog/posts/%E5%A6%82%E4%BD%95%E5%9C%A8-django-%E4%B8%AD%E5%AF%A6%E7%8F%BE-line-%E7%99%BB%E5%85%A5%E5%8A%9F%E8%83%BD/","section":"æ–‡ç« ","summary":"\u003ch2 class=\"relative group\"\u003eå‰è¨€ \n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\n    \n    \u003cspan\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å®šä½é»\"\u003e#\u003c/a\u003e\n    \u003c/span\u003e        \n    \n\u003c/h2\u003e\n\u003cp\u003eåœ¨é€™ç¯‡æ–‡ç« ä¸­ï¼Œå°‡è©³ç´°ä»‹ç´¹å¦‚ä½•åœ¨ Django é …ç›®ä¸­å¯¦ç¾ LINE ç™»å…¥åŠŸèƒ½ã€‚æˆ‘å€‘æœƒä½¿ç”¨ django-allauth é€™å€‹å¼·å¤§çš„ç¬¬ä¸‰æ–¹åº«ï¼Œè®“é–‹ç™¼è€…å¯ä»¥è¼•é¬†é›†æˆå„ç¨®ç¤¾äº¤å¹³å°çš„ç™»å…¥åŠŸèƒ½ã€‚\u003c/p\u003e","title":"å¦‚ä½•åœ¨ Django ä¸­å¯¦ç¾ LINE ç™»å…¥åŠŸèƒ½","type":"posts"},{"content":"","date":"21 December 2024","externalUrl":null,"permalink":"/douoduublog/tags/%E7%AC%AC%E4%B8%89%E6%96%B9%E9%87%91%E6%B5%81/","section":"Tags","summary":"","title":"ç¬¬ä¸‰æ–¹é‡‘æµ","type":"tags"},{"content":"","date":"2 December 2024","externalUrl":null,"permalink":"/douoduublog/tags/vue.js/","section":"Tags","summary":"","title":"Vue.js","type":"tags"},{"content":"å‰è¨€ # æœ¬ç¯‡æ–‡ç« é©åˆ Vue.js åˆå­¸è€…ï¼Œå°‡å¸¶ä½ å¿«é€Ÿäº†è§£ Vue.js çš„åŸºç¤æŒ‡ä»¤ã€äº‹ä»¶è™•ç†ã€è¿´åœˆæ‡‰ç”¨ï¼Œä¸¦ç¤ºç¯„å¦‚ä½•æ­å»ºå°ˆæ¡ˆç’°å¢ƒã€‚é€éæœ¬ç¯‡æ•™å­¸ï¼Œä½ å°‡èƒ½å¤ å¯«å‡º Vue.js çš„åŸºç¤æ‡‰ç”¨ï¼Œä¸¦é€²ä¸€æ­¥ç†è§£ Vue çš„æ ¸å¿ƒæ¦‚å¿µã€‚\nä¸€ã€Vue.js åŸºæœ¬æ¦‚å¿µ # 1.1 Vue.js æŒ‡ä»¤èˆ‡éŸ¿æ‡‰å¼è³‡æ–™ # Vue æŒ‡ä»¤ (v- é–‹é ­)ï¼šVue ä½¿ç”¨ v- ä½œç‚ºæŒ‡ä»¤å‰ç¶´ï¼Œä¾‹å¦‚ v-modelã€v-bind ç­‰ã€‚ éŸ¿æ‡‰å¼è®Šæ•¸ (ref)ï¼šä½¿ç”¨ ref å®šç¾©è®Šæ•¸ï¼ŒVue æœƒè‡ªå‹•è¿½è¹¤å…¶è®Šæ›´ï¼Œä¸¦å³æ™‚æ›´æ–°ç•«é¢ã€‚ ä¸éœ€ç›´æ¥æ“ä½œ DOMï¼šVue è‡ªå‹•è™•ç† UI æ›´æ–°ï¼Œé–‹ç™¼è€…ç„¡éœ€ä½¿ç”¨ document.querySelector ä¾†æ‰‹å‹•æŠ“å– DOM å…ƒç´ ã€‚ 1.2 Vue.js åŸºæœ¬ç¯„ä¾‹ # ä»¥ä¸‹æ˜¯ Vue.js çš„ Hello World ç¯„ä¾‹ï¼Œä½¿ç”¨ ref å®šç¾©éŸ¿æ‡‰å¼è®Šæ•¸ msgï¼Œä¸¦è®“è¼¸å…¥æ¡†ç¶å®šåˆ°è®Šæ•¸ã€‚\né»æ“Šç·´ç¿’ç¶²å€\n\u0026lt;script setup\u0026gt; import { ref } from \u0026#34;vue\u0026#34;; const msg = ref(\u0026#34;Hello World!\u0026#34;); \u0026lt;/script\u0026gt; \u0026lt;template\u0026gt; \u0026lt;h1\u0026gt;{{ msg }}\u0026lt;/h1\u0026gt; \u0026lt;input v-model=\u0026#34;msg\u0026#34; /\u0026gt; \u0026lt;/template\u0026gt; äºŒã€äº‹ä»¶è™•ç† # 2.1 v-model (è¡¨å–®ç¶å®š) # v-model ç”¨æ–¼é›™å‘ç¶å®šè¼¸å…¥æ¡†èˆ‡è®Šæ•¸ï¼Œé©ç”¨æ–¼è¡¨å–®å…ƒç´ ï¼Œä¾‹å¦‚ inputã€textareaã€‚\n\u0026lt;input v-model=\u0026#34;msg\u0026#34; /\u0026gt; 2.2 v-on äº‹ä»¶ç¶å®š (ç¸®å¯« @) # Vue äº‹ä»¶è™•ç†å¯ä½¿ç”¨ v-on ç¶å®šï¼Œç¸®å¯«ç‚º @ã€‚\n\u0026lt;script setup\u0026gt; import { ref } from \u0026#34;vue\u0026#34;; const msg = ref(\u0026#34;Hello Vue!\u0026#34;); const updateMessage = (event) =\u0026gt; { msg.value = event.target.value; }; \u0026lt;/script\u0026gt; \u0026lt;template\u0026gt; \u0026lt;input @input=\u0026#34;updateMessage\u0026#34; /\u0026gt; \u0026lt;/template\u0026gt; 2.3 è¨­å®šæ¢ä»¶æ¨£å¼ # å¯é€é v-bind:class å‹•æ…‹è¨­å®š CSSï¼Œä»¥ä¸‹ç¯„ä¾‹ç•¶å­—æ•¸è¶…é 15 æ™‚ï¼Œæ–‡å­—è®Šç´…è‰²ã€‚\n\u0026lt;template\u0026gt; \u0026lt;h1 :class=\u0026#34;{ red: msg.length \u0026gt; 15 }\u0026#34;\u0026gt;{{ msg }}\u0026lt;/h1\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;style\u0026gt; .red { color: red; } \u0026lt;/style\u0026gt; ä¸‰ã€è¿´åœˆæ¸²æŸ“ # 3.1 v-for è¿´åœˆæ¸²æŸ“ # v-for å¯ç”¨æ–¼æ¸²æŸ“é™£åˆ—å…§å®¹ï¼Œä»¥ä¸‹ç¯„ä¾‹éæ­· products é™£åˆ—ã€‚\né»é¡Œç·´ç¿’ç¶²å€\n\u0026lt;script setup\u0026gt; const products = [ { title: \u0026#34;åŒ—æ­é¢¨ç°¡ç´„é¤æ¤…\u0026#34;, price: 1290 }, { title: \u0026#34;ç„¡ç·šè—ç‰™è€³æ©Ÿ\u0026#34;, price: 2490 }, ]; \u0026lt;/script\u0026gt; \u0026lt;template\u0026gt; \u0026lt;div v-for=\u0026#34;item in products\u0026#34; :key=\u0026#34;item.title\u0026#34;\u0026gt; \u0026lt;div\u0026gt;åç¨±: {{ item.title }}\u0026lt;/div\u0026gt; \u0026lt;div\u0026gt;åƒ¹æ ¼: {{ item.price }}\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; å››ã€Vue.js é–‹ç™¼ç’°å¢ƒæ­å»º # 4.1 å»ºç«‹ Vue.js å°ˆæ¡ˆ # åœ¨çµ‚ç«¯æ©ŸåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ä¾†åˆå§‹åŒ– Vue.js å°ˆæ¡ˆã€‚\nnpm init vue@latest my-vue-app cd my-vue-app npm install 4.2 å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ # npm run dev æˆåŠŸåŸ·è¡Œå¾Œï¼Œçµ‚ç«¯æ©Ÿå°‡é¡¯ç¤ºé–‹ç™¼ä¼ºæœå™¨çš„ç¶²å€ï¼Œä¾‹å¦‚ http://localhost:5173/ã€‚\näº”ã€Vue.js ä¸»æ‡‰ç”¨ç¨‹å¼ (main.js) # Vue æ‡‰ç”¨ç¨‹å¼çš„å…¥å£æª”æ¡ˆç‚º main.jsï¼ŒcreateApp è² è²¬åˆå§‹åŒ–æ‡‰ç”¨ã€‚\nimport { createApp } from \u0026#34;vue\u0026#34;; import App from \u0026#34;./App.vue\u0026#34;; createApp(App).mount(\u0026#34;#app\u0026#34;); å…­ã€çµè«– # é€éæœ¬ç¯‡æ•™å­¸ï¼Œä½ å·²ç¶“å­¸æœƒäº† Vue.js çš„ æŒ‡ä»¤ã€äº‹ä»¶è™•ç†ã€è¿´åœˆæ¸²æŸ“ï¼Œä¸¦æˆåŠŸæ­å»º Vue.js å°ˆæ¡ˆç’°å¢ƒã€‚Vue.js è®“é–‹ç™¼è€…èƒ½å¤ æ›´å°ˆæ³¨æ–¼æ‡‰ç”¨é‚è¼¯ï¼Œè€Œä¸å¿…ç›´æ¥æ“ä½œ DOMï¼Œè®“é–‹ç™¼æ›´ç›´è§€ä¸”é«˜æ•ˆã€‚\nå¦‚æœä½ å° Vue.js æœ‰èˆˆè¶£ï¼Œå»ºè­°ç¹¼çºŒå­¸ç¿’ å…ƒä»¶åŒ–é–‹ç™¼ã€Vue Routerã€Vuex (Pinia) ç­‰é€²éšä¸»é¡Œï¼Œé€²ä¸€æ­¥æå‡ä½ çš„é–‹ç™¼èƒ½åŠ›ï¼ğŸš€\n","date":"2 December 2024","externalUrl":null,"permalink":"/douoduublog/posts/vue.js-%E5%9F%BA%E7%A4%8E%E5%85%A5%E9%96%80%E6%8C%87%E5%8D%97/","section":"æ–‡ç« ","summary":"\u003ch2 class=\"relative group\"\u003eå‰è¨€ \n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\n    \n    \u003cspan\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å®šä½é»\"\u003e#\u003c/a\u003e\n    \u003c/span\u003e        \n    \n\u003c/h2\u003e\n\u003cp\u003eæœ¬ç¯‡æ–‡ç« é©åˆ Vue.js åˆå­¸è€…ï¼Œå°‡å¸¶ä½ å¿«é€Ÿäº†è§£ \u003cstrong\u003eVue.js çš„åŸºç¤æŒ‡ä»¤ã€äº‹ä»¶è™•ç†ã€è¿´åœˆæ‡‰ç”¨\u003c/strong\u003eï¼Œä¸¦ç¤ºç¯„å¦‚ä½•æ­å»ºå°ˆæ¡ˆç’°å¢ƒã€‚é€éæœ¬ç¯‡æ•™å­¸ï¼Œä½ å°‡èƒ½å¤ å¯«å‡º Vue.js çš„åŸºç¤æ‡‰ç”¨ï¼Œä¸¦é€²ä¸€æ­¥ç†è§£ Vue çš„æ ¸å¿ƒæ¦‚å¿µã€‚\u003c/p\u003e","title":"Vue.js åŸºç¤å…¥é–€æŒ‡å—","type":"posts"},{"content":"å‰è¨€ # Git æ˜¯ç›®å‰æœ€æµè¡Œçš„ç‰ˆæœ¬æ§åˆ¶ç³»çµ±ä¹‹ä¸€ï¼Œå¹«åŠ©é–‹ç™¼è€…ç®¡ç†å°ˆæ¡ˆè®Šæ›´ã€è¿½è¹¤æ­·å²ç´€éŒ„ï¼Œä¸¦èˆ‡åœ˜éšŠå”ä½œã€‚æœ¬ç¯‡æ–‡ç« å°‡æ•´ç† Git çš„å¸¸ç”¨æŒ‡ä»¤ï¼Œä¸¦æä¾› å¦‚ä½•ä¸Šå‚³åˆ° GitHub ä»¥åŠ ç·´ç¿’ Git æŒ‡ä»¤çš„å°éŠæˆ²ï¼Œé©åˆ Git åˆå­¸è€…å­¸ç¿’èˆ‡é€²éšä½¿ç”¨ã€‚\nåˆ†æ”¯åˆ‡éŒ¯æ›åå­—å°±å¥½äº†ï¼ï¼ï¼ï¼ï¼åˆ†æ”¯å°±æ˜¯å€‹è²¼ç´™è€Œå·² ä¸€ã€å®‰è£ VSCode æ“´å……åŠŸèƒ½ # åœ¨ VSCode ä¸­å¯ä»¥å®‰è£ Git Graph æ“´å……åŠŸèƒ½ï¼Œå¹«åŠ©ä½ åœ¨çµ‚ç«¯æ©Ÿåº•éƒ¨å¯è¦–åŒ–æ­·å²ç´€éŒ„ã€‚\näºŒã€Git å¸¸ç”¨æŒ‡ä»¤ # é€™äº›æŒ‡ä»¤å¯ä»¥å¹«åŠ©ä½ åœ¨ Git é€²è¡Œç‰ˆæœ¬æ§åˆ¶ã€ç®¡ç†åˆ†æ”¯åŠè§£æ±ºå•é¡Œã€‚\n# æŸ¥çœ‹ Git å…§å»ºæŒ‡ä»¤çš„ä½¿ç”¨æ–¹å¼ $ git help commit # åˆªé™¤æš«å­˜å€ä¸­çš„æª”æ¡ˆ $ git restore --staged \u0026lt;file\u0026gt; # æŸ¥çœ‹æ­·å²ç´€éŒ„ï¼ˆå¡ä½æ™‚å¯æŒ‰ Q é€€å‡ºï¼‰ $ git log # åˆ‡æ›åˆ°æŒ‡å®š commitï¼ˆè¼ƒèˆŠçš„æ–¹å¼ï¼Œå¯èƒ½æœƒå½±éŸ¿å…¶ä»–å…§å®¹ï¼‰ $ git checkout \u0026lt;commitç·¨è™Ÿ\u0026gt; # é‚„åŸè¢«åˆªé™¤çš„æª”æ¡ˆ $ git restore \u0026lt;file\u0026gt; # æŸ¥çœ‹ç•¶å‰åˆ†æ”¯ $ git branch # æ–°å¢åˆ†æ”¯ $ git branch \u0026lt;åˆ†æ”¯åç¨±\u0026gt; # æ¢å¾©è¢«åˆªé™¤çš„åˆ†æ”¯ï¼ˆéœ€æä¾› commit ç·¨è™Ÿï¼‰ $ git branch \u0026lt;åˆ†æ”¯åç¨±\u0026gt; \u0026lt;commitç·¨è™Ÿ\u0026gt; # åˆ‡æ›åˆ†æ”¯ $ git switch \u0026lt;åˆ†æ”¯åç¨±\u0026gt; # åˆä½µåˆ†æ”¯ $ git merge \u0026lt;åˆ†æ”¯åç¨±\u0026gt; # å¼·åˆ¶å»ºç«‹åˆä½µç´€éŒ„ $ git merge \u0026lt;åˆ†æ”¯åç¨±\u0026gt; --no-ff -m \u0026#39;merge\u0026#39; # æŸ¥çœ‹æª”æ¡ˆä¿®æ”¹æ­·å²ï¼ˆèª°å¯«çš„ï¼‰ $ git blame \u0026lt;æª”æ¡ˆåç¨±\u0026gt; # é‡æ–°æ•´ç†æäº¤æ­·å²ï¼ˆæœƒæ”¹è®Š commit è¨˜éŒ„ï¼‰ $ git rebase \u0026lt;åˆ†æ”¯åç¨±\u0026gt; 2.1 Merge vs. Rebaseï¼ˆåˆä½µèˆ‡é‡å¯«æäº¤æ­·å²ï¼‰ # Mergeï¼ˆåˆä½µï¼‰ï¼šé©åˆå¤šäººå”ä½œï¼Œæœƒä¿ç•™å®Œæ•´çš„ commit æ­·å²ï¼Œè®“æ‰€æœ‰æ›´æ”¹ç´€éŒ„å¯è¿½æº¯ã€‚ Rebaseï¼ˆé‡å¯«æ­·å²ï¼‰ï¼šé©åˆå€‹äººé–‹ç™¼ï¼Œæœƒå°‡ commit æ•´åˆåˆ°ä¸€æ¢ç·šä¸Šï¼Œä½¿æäº¤æ­·å²æ›´ä¹¾æ·¨æ•´æ½”ã€‚ ğŸ“Œ ä½•æ™‚ä½¿ç”¨ï¼Ÿ\nåœ˜éšŠé–‹ç™¼ï¼šä½¿ç”¨ Mergeï¼Œç¢ºä¿åœ˜éšŠæˆå“¡çš„ commit ç´€éŒ„å®Œæ•´ã€‚ å€‹äººé–‹ç™¼ï¼šä½¿ç”¨ Rebaseï¼Œç¢ºä¿æ­·å²ç´€éŒ„ä¹¾æ·¨ï¼Œä¸å½±éŸ¿ä¸»åˆ†æ”¯ã€‚ 2.2 è§£æ±ºåˆä½µè¡çª # ä½¿ç”¨ Merge æ™‚ç™¼ç”Ÿè¡çªï¼Œä¿®æ”¹æª”æ¡ˆå¾ŒåŸ·è¡Œï¼š git add . git commit -m \u0026#34;è§£æ±ºåˆä½µè¡çª\u0026#34; ä½¿ç”¨ Rebase æ™‚ç™¼ç”Ÿè¡çªï¼Œä¿®æ”¹æª”æ¡ˆå¾ŒåŸ·è¡Œï¼š git add \u0026lt;æª”æ¡ˆ\u0026gt; git rebase --continue ä¸‰ã€Git ç‰ˆæœ¬æ§åˆ¶èˆ‡é‡ç½® # # é‡ç½® commitï¼ˆé è¨­ mixedï¼‰ $ git reset \u0026lt;commitç·¨è™Ÿ\u0026gt; --mixed # å°‡è®Šæ›´ä¿ç•™åœ¨å·¥ä½œç›®éŒ„ $ git reset \u0026lt;commitç·¨è™Ÿ\u0026gt; --soft # ä¿ç•™è®Šæ›´æ–¼æš«å­˜å€ $ git reset \u0026lt;commitç·¨è™Ÿ\u0026gt; --hard # ç›´æ¥åˆªé™¤è®Šæ›´ # å›åˆ°ä¸Šä¸€å€‹ commitï¼ˆHEAD^ = å€’é€€ä¸€æ­¥ï¼ŒHEAD~2 = å€’é€€å…©æ­¥ï¼‰ $ git reset HEAD^ $ git reset HEAD~2 # æŸ¥çœ‹æœ€è¿‘çš„ commit ç§»å‹•ç´€éŒ„ $ git reflog # ç¡¬é‡ç½®å›æŒ‡å®š commit $ git reset \u0026lt;commitç·¨è™Ÿ\u0026gt; --hard # å–å¾—é ç«¯æœ€æ–°çš„è®Šæ›´ï¼Œä¸¦åˆä½µåˆ°æœ¬åœ°åˆ†æ”¯ $ git pull origin main # ç›¸ç•¶æ–¼ git fetch + git merge # è¤‡è£½é ç«¯å°ˆæ¡ˆ $ git clone \u0026lt;GitHubå€‰åº«ç¶²å€\u0026gt; å››ã€Git ç·´ç¿’å°éŠæˆ² # é€éäº’å‹•å¼å°éŠæˆ²ä¾†ç†Ÿæ‚‰ Git åˆ†æ”¯ç®¡ç†ï¼šGit ç·´ç¿’éŠæˆ²\näº”ã€GitHub æ“ä½œæŒ‡å— # 5.1 ä¸Šå‚³å°ˆæ¡ˆ # è‹¥è¦å°‡æœ¬åœ°å°ˆæ¡ˆä¸Šå‚³è‡³ GitHubï¼Œè«‹å…ˆåœ¨ GitHub å»ºç«‹æ–°å€‰åº«ï¼Œç„¶å¾ŒåŸ·è¡Œä»¥ä¸‹æ­¥é©Ÿï¼š\n# åˆå§‹åŒ– Git $ git init # æŸ¥çœ‹ç•¶å‰ç‹€æ…‹ $ git status # æ–°å¢æª”æ¡ˆè‡³æš«å­˜å€ï¼ˆ. ä»£è¡¨å…¨éƒ¨ï¼‰ $ git add . # æäº¤è®Šæ›´ $ git commit -m \u0026#34;First commit\u0026#34; # è¨­å®š main ç‚ºé è¨­åˆ†æ”¯ $ git branch -M main # é€£çµé ç«¯å€‰åº« $ git remote add origin \u0026lt;GitHub å€‰åº«ç¶²å€\u0026gt; # æ¨é€è‡³ GitHub $ git push -u origin main 5.2 æ›´æ–°å°ˆæ¡ˆå…§å®¹ # è‹¥è¦åœ¨ GitHub æ›´æ–°å°ˆæ¡ˆå…§å®¹ï¼Œè«‹ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼š\n$ git status # æª¢æŸ¥è®Šæ›´ $ git add . # åŠ å…¥è®Šæ›´ $ git commit -m \u0026#34;æ›´æ–°å…§å®¹\u0026#34; $ git push # æ¨é€åˆ° GitHub æ¨é€å¾Œï¼Œå¯åœ¨ GitHub å€‰åº«çš„ Actions ç¢ºèªä¸Šå‚³ç‹€æ…‹ï¼Œç­‰å¾…æ›´æ–°å®Œæˆå³å¯ã€‚\nå…­ã€ç¸½çµ # Git å¹«åŠ©ç®¡ç†ç¨‹å¼ç¢¼ç‰ˆæœ¬ï¼Œæå‡é–‹ç™¼æ•ˆç‡ã€‚ å­¸ç¿’ Git æŒ‡ä»¤èƒ½è®“ä½ æ›´å¥½åœ°æŒæ§å°ˆæ¡ˆï¼Œä¸¦æœ‰æ•ˆç®¡ç†åœ˜éšŠå”ä½œã€‚ é€é GitHubï¼Œå¯è¼•é¬†å„²å­˜ã€åˆ†äº«èˆ‡éƒ¨ç½²ä½ çš„ç¨‹å¼ç¢¼ã€‚ å¸Œæœ›é€™ç¯‡æ–‡ç« èƒ½å¹«åŠ©ä½ æ›´ç†Ÿæ‚‰ Gitï¼Œé–‹å§‹ä½ çš„ç‰ˆæœ¬æ§åˆ¶ä¹‹æ—…ï¼ğŸš€\n","date":"29 November 2024","externalUrl":null,"permalink":"/douoduublog/posts/%E9%97%9C%E6%96%BCgit%E7%9A%84%E5%B8%B8%E8%A6%8B%E6%8C%87%E4%BB%A4/","section":"æ–‡ç« ","summary":"\u003ch2 class=\"relative group\"\u003eå‰è¨€ \n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\n    \n    \u003cspan\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å®šä½é»\"\u003e#\u003c/a\u003e\n    \u003c/span\u003e        \n    \n\u003c/h2\u003e\n\u003cp\u003eGit æ˜¯ç›®å‰æœ€æµè¡Œçš„ç‰ˆæœ¬æ§åˆ¶ç³»çµ±ä¹‹ä¸€ï¼Œå¹«åŠ©é–‹ç™¼è€…ç®¡ç†å°ˆæ¡ˆè®Šæ›´ã€è¿½è¹¤æ­·å²ç´€éŒ„ï¼Œä¸¦èˆ‡åœ˜éšŠå”ä½œã€‚æœ¬ç¯‡æ–‡ç« å°‡æ•´ç† \u003cstrong\u003eGit çš„å¸¸ç”¨æŒ‡ä»¤\u003c/strong\u003eï¼Œä¸¦æä¾› \u003cstrong\u003eå¦‚ä½•ä¸Šå‚³åˆ° GitHub\u003c/strong\u003e ä»¥åŠ \u003cstrong\u003eç·´ç¿’ Git æŒ‡ä»¤çš„å°éŠæˆ²\u003c/strong\u003eï¼Œé©åˆ Git åˆå­¸è€…å­¸ç¿’èˆ‡é€²éšä½¿ç”¨ã€‚\u003c/p\u003e","title":"Git å¸¸è¦‹æŒ‡ä»¤æ•´ç†","type":"posts"},{"content":"","date":"23 November 2024","externalUrl":null,"permalink":"/douoduublog/tags/crud/","section":"Tags","summary":"","title":"CRUD","type":"tags"},{"content":"","date":"23 November 2024","externalUrl":null,"permalink":"/douoduublog/tags/restful-api/","section":"Tags","summary":"","title":"RESTful API","type":"tags"},{"content":"å‰è¨€ # RESTful API æ˜¯ä¸€ç¨®è¨­è¨ˆæ–¹å¼ï¼Œè®“ä¸åŒçš„æ‡‰ç”¨ç¨‹å¼èƒ½å¤ é€éç¶²è·¯äº’ç›¸æºé€šã€‚å®ƒä½¿ç”¨æ¨™æº–çš„ HTTP æ–¹æ³•ï¼ˆå¦‚ GETã€POSTã€PUTã€DELETEï¼‰ä¾†å­˜å–å’Œç®¡ç†è³‡æºï¼Œä½¿å¾—å‰ç«¯å’Œå¾Œç«¯å¯ä»¥æ›´å®¹æ˜“åœ°åˆ†å·¥åˆä½œã€‚\né€™ç¯‡æ–‡ç« å°‡ç°¡å–®ä»‹ç´¹ RESTful API çš„åŸºæœ¬æ¦‚å¿µã€è¨­è¨ˆåŸå‰‡ï¼Œä¸¦èªªæ˜å®ƒå¦‚ä½•èˆ‡ CRUDï¼ˆCreateã€Readã€Updateã€Deleteï¼‰æ“ä½œç›¸å°æ‡‰ï¼Œå¹«åŠ©æ–°æ‰‹æ›´å®¹æ˜“ç†è§£ä¸¦é–‹å§‹ä½¿ç”¨ RESTful APIã€‚\nä¸€ã€RESTful API ä»‹ç´¹ # RESTful API æ˜¯ä¸€ç¨®åŸºæ–¼ REST (Representational State Transfer) æ¶æ§‹é¢¨æ ¼çš„ Web API è¨­è¨ˆæ–¹å¼ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯é€éçµ±ä¸€çš„è³‡æºæ¥å£ï¼ˆURIï¼‰ä¾†æ“ä½œè³‡æºï¼Œä¸¦ä½¿ç”¨æ¨™æº–çš„ HTTP æ–¹æ³•ï¼ˆå¦‚ GETã€POSTã€PUTã€DELETEï¼‰é€²è¡Œé€šä¿¡ã€‚\nRESTful API è¢«å»£æ³›æ‡‰ç”¨æ–¼ å‰å¾Œç«¯åˆ†é›¢æ¶æ§‹ï¼Œä½¿å‰ç«¯ï¼ˆå¦‚ Web æˆ–æ‰‹æ©Ÿæ‡‰ç”¨ï¼‰èƒ½èˆ‡å¾Œç«¯æœå‹™é€éæ¨™æº–åŒ–æ¥å£é€²è¡Œäº¤äº’ã€‚\näºŒã€RESTful API çš„æ ¸å¿ƒæ¦‚å¿µ # RESTful API çš„è¨­è¨ˆéµå¾ªä¸€äº›æ ¸å¿ƒæ¦‚å¿µï¼Œè®“ API æ›´å®¹æ˜“ç†è§£å’Œä½¿ç”¨ï¼Œç¢ºä¿ API çµæ§‹æ¸…æ™°ã€æ˜“æ–¼ç¶­è­·ã€‚\nçµ±ä¸€çš„è³‡æºè·¯å¾‘ (URI)\næ¯å€‹è³‡æºï¼ˆå¦‚ã€Œç”¨æˆ¶ã€æˆ–ã€Œæ–‡ç« ã€ï¼‰éƒ½æœ‰å›ºå®šçš„ç¶²å€ï¼Œä¾‹å¦‚ï¼š GET /usersï¼šå–å¾—æ‰€æœ‰ç”¨æˆ¶ POST /usersï¼šæ–°å¢ç”¨æˆ¶ ä½¿ç”¨æ¨™æº–çš„ HTTP æ–¹æ³•ä¾†æ“ä½œè³‡æº\nRESTful API éµå¾ª HTTP æ¨™æº–ï¼Œé€éä¸åŒçš„æ–¹æ³•ä¾†å°è³‡æºé€²è¡Œæ“ä½œï¼š GETï¼šç²å–è³‡æºï¼Œå¦‚ GET /users ä¾†å–å¾—æ‰€æœ‰ç”¨æˆ¶ã€‚ POSTï¼šæ–°å¢è³‡æºï¼Œå¦‚ POST /users ä¾†æ–°å¢ç”¨æˆ¶ã€‚ PUTï¼šæ›´æ–°è³‡æºï¼Œå¦‚ PUT /users/1 ä¾†ä¿®æ”¹ ID ç‚º 1 çš„ç”¨æˆ¶ã€‚ DELETEï¼šåˆªé™¤è³‡æºï¼Œå¦‚ DELETE /users/1 ä¾†ç§»é™¤ ID ç‚º 1 çš„ç”¨æˆ¶ã€‚ é€™äº›æ–¹æ³•è®“ API æ›´å…·ä¸€è‡´æ€§ï¼Œä½¿é–‹ç™¼è€…èƒ½å¤ è¼•é¬†ç†è§£å’Œä½¿ç”¨ã€‚ RESTful API ä½¿ç”¨ GETã€POSTã€PUTã€DELETE ç­‰ HTTP æ–¹æ³•ä¾†æ“ä½œè³‡æºã€‚ è«‹æ±‚èˆ‡å›æ‡‰æ ¼å¼\nAPI ä¸€èˆ¬ä½¿ç”¨ JSON ä¾†å‚³éè³‡æ–™ï¼Œå› ç‚ºå®ƒç°¡å–®æ˜“è®€ã€‚ ç„¡ç‹€æ…‹æ€§ (Statelessness)\næ¯å€‹è«‹æ±‚éƒ½æ˜¯ç¨ç«‹çš„ï¼Œä¼ºæœå™¨ä¸æœƒè¨˜ä½ä¸Šä¸€å€‹è«‹æ±‚çš„ç‹€æ…‹ã€‚ å¯æ“´å±•èˆ‡éˆæ´»æ€§\nAPI è¨­è¨ˆæ‡‰è©²å…è¨±æœªä¾†æ“´å……ï¼Œä¾‹å¦‚ GET /users?limit=10 ä¾†é™åˆ¶å›å‚³çš„ç”¨æˆ¶æ•¸é‡ã€‚ é€™äº›æ¦‚å¿µæœ‰åŠ©æ–¼ RESTful API è®Šå¾—æ›´å…·å¯è®€æ€§ã€å¯æ“´å±•æ€§ï¼Œä¸¦è®“ä¸åŒç³»çµ±ä¹‹é–“çš„æºé€šè®Šå¾—æ›´åŠ é †æš¢ã€‚\nä¸‰ã€HTTP æ–¹æ³•èˆ‡è³‡æºæ“ä½œ # RESTful API é€šå¸¸ä½¿ç”¨ HTTP æ–¹æ³• ä¾†åŸ·è¡Œè³‡æºæ“ä½œï¼Œå°æ‡‰å¦‚ä¸‹ï¼š\nHTTP æ–¹æ³• æ“ä½œ ç”¨é€” GET è®€å– ç²å–å–®å€‹æˆ–å¤šå€‹è³‡æºã€‚ POST å‰µå»º åœ¨è³‡æºé›†åˆä¸‹æ–°å¢ä¸€å€‹è³‡æºã€‚ PUT æ›´æ–° ï¼ˆæ•´é«”æ›¿æ›ï¼‰ æ›´æ–°æ•´å€‹è³‡æºã€‚ PATCH æ›´æ–° ï¼ˆéƒ¨åˆ†æ›´æ–°ï¼‰ åƒ…æ›´æ–°è³‡æºçš„éƒ¨åˆ†å­—æ®µã€‚ DELETE åˆªé™¤ ç§»é™¤æŒ‡å®šè³‡æºã€‚ å››ã€HTTP ç‹€æ…‹ç¢¼ # RESTful API é€šé HTTP ç‹€æ…‹ç¢¼ ä¾†è¡¨ç¤ºè«‹æ±‚çµæœï¼š\nç‹€æ…‹ç¢¼ å«ç¾© 200 æˆåŠŸ (GETã€PUTã€DELETE æˆåŠŸ)ã€‚ 201 å‰µå»ºæˆåŠŸ (POST æˆåŠŸ)ã€‚ 204 ç„¡å…§å®¹ (DELETE æˆåŠŸä¸”ç„¡è¿”å›å…§å®¹)ã€‚ 400 å£è«‹æ±‚ (è«‹æ±‚æ ¼å¼éŒ¯èª¤)ã€‚ 401 æœªæˆæ¬Š (éœ€è¦èº«ä»½é©—è­‰)ã€‚ 404 æ‰¾ä¸åˆ°è³‡æºã€‚ 500 æœå‹™å™¨å…§éƒ¨éŒ¯èª¤ã€‚ äº”ã€CRUD èˆ‡æ•¸æ“šæ“ä½œ # CRUDï¼ˆCreateã€Readã€Updateã€Deleteï¼‰æ˜¯æ•¸æ“šæ“ä½œçš„åŸºæœ¬æ¦‚å¿µï¼Œå°æ‡‰æ–¼æ‡‰ç”¨å…§éƒ¨çš„æ•¸æ“šç®¡ç†ã€‚\næ“ä½œ SQL å°æ‡‰ ORM å°æ‡‰ï¼ˆå¦‚ Django ORMï¼‰ Create INSERT INTO .create() Read SELECT .all()ã€.filter() Update UPDATE .update() Delete DELETE .delete() å…­ã€RESTful API è¨­è¨ˆèˆ‡ CRUD å°æ‡‰ # HTTP æ–¹æ³• RESTful API åŠŸèƒ½ CRUD å‹•ä½œ ç¯„ä¾‹ POST æ–°å¢è³‡æº Create æ–°å¢ä¸€ç­†ç”¨æˆ¶æ•¸æ“š GET è®€å–è³‡æº Read ç²å–æ‰€æœ‰ç”¨æˆ¶æˆ–å–®å€‹ç”¨æˆ¶ PUT æ›´æ–°æ•´å€‹è³‡æº Update æ›´æ–°ç”¨æˆ¶è³‡æ–™ PATCH éƒ¨åˆ†æ›´æ–°è³‡æº Update æ›´æ–°éƒ¨åˆ†ç”¨æˆ¶è³‡æ–™ DELETE åˆªé™¤è³‡æº Delete åˆªé™¤ä¸€ç­†ç”¨æˆ¶æ•¸æ“š ä¸ƒã€CRUD èˆ‡ RESTful API çš„å€åˆ¥ # ç‰¹æ€§ CRUD RESTful API æ¦‚å¿µ é‡å°æ•¸æ“šçš„æ“ä½œæ–¹æ³• ä¸€ç¨® Web API è¨­è¨ˆé¢¨æ ¼ æŠ€è¡“ ä¸»è¦èˆ‡æ•¸æ“šåº«æ“ä½œç›¸é—œ åŸºæ–¼ HTTP å”è­°çš„è³‡æºæ“ä½œ æ‡‰ç”¨ ç”¨æ–¼å…§éƒ¨ç³»çµ±é‚è¼¯è™•ç† ç”¨æ–¼å®¢æˆ¶ç«¯èˆ‡ä¼ºæœå™¨ä¹‹é–“çš„é€šä¿¡ æ•¸æ“šå­˜å– ç›´æ¥å°æ¥æ•¸æ“šåº« é€é API ä¾†å­˜å–è³‡æº å…«ã€ç¸½çµ # CRUD æ˜¯æ‡‰ç”¨å…§éƒ¨ æ•¸æ“šç®¡ç† çš„åŸºæœ¬æ“ä½œã€‚ RESTful API æ˜¯ å°å¤–æä¾›æ¥å£ çš„è¨­è¨ˆé¢¨æ ¼ï¼ŒåŸºæ–¼ HTTP å”è­°ã€‚ å…©è€…é—œè¯ï¼šCRUD ç‚ºå…§éƒ¨é‚è¼¯ï¼ŒRESTful API å‰‡é€éæ¨™æº– HTTP æ–¹æ³•å°å¤–æš´éœ²è³‡æºã€‚ é€éç†è§£ CRUD å’Œ RESTful API çš„æ¦‚å¿µï¼Œé–‹ç™¼è€…èƒ½å¤ æ›´å¥½åœ°è¨­è¨ˆ Web æ‡‰ç”¨ç¨‹å¼ï¼Œä¸¦æå‡ API çš„å¯ç¶­è­·æ€§èˆ‡æ“´å±•æ€§ã€‚\nå¸Œæœ›é€™ç¯‡æ–‡ç« èƒ½å¹«åŠ©ä½ æ›´å¥½åœ°æŒæ¡ RESTful API èˆ‡ CRUD çš„é—œéµæ¦‚å¿µï¼ ğŸš€\n","date":"23 November 2024","externalUrl":null,"permalink":"/douoduublog/posts/restful-api%E8%88%87crud/","section":"æ–‡ç« ","summary":"\u003ch2 class=\"relative group\"\u003eå‰è¨€ \n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\n    \n    \u003cspan\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å®šä½é»\"\u003e#\u003c/a\u003e\n    \u003c/span\u003e        \n    \n\u003c/h2\u003e\n\u003cp\u003eRESTful API æ˜¯ä¸€ç¨®è¨­è¨ˆæ–¹å¼ï¼Œè®“ä¸åŒçš„æ‡‰ç”¨ç¨‹å¼èƒ½å¤ é€éç¶²è·¯äº’ç›¸æºé€šã€‚å®ƒä½¿ç”¨æ¨™æº–çš„ \u003cstrong\u003eHTTP æ–¹æ³•\u003c/strong\u003eï¼ˆå¦‚ GETã€POSTã€PUTã€DELETEï¼‰ä¾†å­˜å–å’Œç®¡ç†è³‡æºï¼Œä½¿å¾—å‰ç«¯å’Œå¾Œç«¯å¯ä»¥æ›´å®¹æ˜“åœ°åˆ†å·¥åˆä½œã€‚\u003c/p\u003e","title":"RESTful API èˆ‡ CRUD","type":"posts"},{"content":"","date":"23 November 2024","externalUrl":null,"permalink":"/douoduublog/tags/vscode/","section":"Tags","summary":"","title":"VSCode","type":"tags"},{"content":"å‰è¨€ # Visual Studio Codeï¼ˆVSCodeï¼‰æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼·å¤§ä¸”å»£å—é–‹ç™¼è€…å–œæ„›çš„ç¨‹å¼ç¢¼ç·¨è¼¯å™¨ã€‚é€éå¿«æ·éµï¼Œé–‹ç™¼è€…å¯ä»¥æ›´é«˜æ•ˆåœ°ç·¨è¼¯ç¨‹å¼ç¢¼ã€ç®¡ç†è¦–çª—èˆ‡æ§åˆ¶çµ‚ç«¯æ©Ÿï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚\næœ¬ç¯‡æ–‡ç« æ•´ç†äº† VSCode å¸¸ç”¨çš„å¿«æ·éµï¼Œå¹«åŠ©é–‹ç™¼è€…ç†Ÿæ‚‰åŸºæœ¬æ“ä½œï¼Œæå‡é–‹ç™¼é«”é©—ã€‚\nå®˜æ–¹å®Œæ•´å¿«æ·éµæ–‡ä»¶ï¼šVSCode å®˜æ–¹æ–‡ä»¶\nä¸€ã€å¸¸ç”¨å¿«æ·éµ # é€™äº›å¿«æ·éµå¯ç”¨æ–¼é–‹å•Ÿæª”æ¡ˆã€è¨­å®šç’°å¢ƒåŠç®¡ç† VSCode ä»‹é¢ã€‚\nCtrl+Shift+P æˆ– F1 # é–‹å•Ÿå‘½ä»¤é¢æ¿ï¼Œå¿«é€ŸåŸ·è¡ŒæŒ‡ä»¤ Ctrl+P æˆ– Ctrl+E # å¿«é€Ÿé–‹å•Ÿæœ€è¿‘ä½¿ç”¨çš„æª”æ¡ˆ Ctrl+Shift+N # é–‹å•Ÿæ–°çš„ VSCode è¦–çª— Ctrl+Shift+W # é—œé–‰ç›®å‰çš„ VSCode è¦–çª— Ctrl+, # é–‹å•Ÿè¨­å®šï¼ˆPreferencesï¼‰ Ctrl+K Ctrl+S # æ‰“é–‹éµç›¤å¿«æ·éµè¨­å®š Control+` (Backtick) # é–‹å•Ÿ/é—œé–‰çµ‚ç«¯æ©Ÿ äºŒã€ç·¨è¼¯å¿«æ·éµ # é€™äº›å¿«æ·éµå¯ä»¥å¹«åŠ©ä½ å¿«é€Ÿé€²è¡Œç¨‹å¼ç¢¼ç·¨è¼¯ï¼Œæé«˜ç·¨ç¢¼æ•ˆç‡ã€‚\nCtrl+X # å‰ªä¸‹ç•¶å‰è¡Œï¼ˆå³ä½¿æœªé¸å–å…§å®¹ï¼‰ Ctrl+C # è¤‡è£½ç•¶å‰è¡Œï¼ˆå³ä½¿æœªé¸å–å…§å®¹ï¼‰ Alt+ â†‘ / â†“ # ç§»å‹•ç•¶å‰è¡Œåˆ°ä¸Š/ä¸‹æ–¹ (Alt = Option on macOS) Shift+Alt+ â†‘ / â†“ # è¤‡è£½ç•¶å‰è¡Œåˆ°ä¸Š/ä¸‹æ–¹ Ctrl+Shift+K # åˆªé™¤ç•¶å‰è¡Œ Ctrl+Enter # åœ¨ç•¶å‰è¡Œä¸‹æ–¹æ’å…¥æ–°è¡Œ Ctrl+Shift+Enter # åœ¨ç•¶å‰è¡Œä¸Šæ–¹æ’å…¥æ–°è¡Œ Home / End # ç§»å‹•åˆ°è¡Œé¦–æˆ–è¡Œå°¾ Ctrl+Home / Ctrl+End # ç§»å‹•åˆ°æ–‡ä»¶çš„é ‚éƒ¨æˆ–åº•éƒ¨ Ctrl+â†‘ / â†“ # å‘ä¸Š/å‘ä¸‹æ»¾å‹•å–®è¡Œ Alt+PgUp / PgDn # å‘ä¸Š/å‘ä¸‹æ»¾å‹•ä¸€æ•´é  Ctrl+K Ctrl+0 # æ”¶åˆæ‰€æœ‰ç¨‹å¼ç¢¼å€å¡Š Ctrl+K Ctrl+J # å±•é–‹æ‰€æœ‰ç¨‹å¼ç¢¼å€å¡Š Ctrl+K Ctrl+C # è½‰æ›é¸å–å…§å®¹ç‚ºå–®è¡Œè¨»è§£ Ctrl+K Ctrl+U # è§£é™¤å–®è¡Œè¨»è§£ Ctrl+/ # åˆ‡æ›å–®è¡Œè¨»è§£ Shift+Alt+A # åˆ‡æ›å€åŸŸè¨»è§£ Alt+Z # åˆ‡æ›è‡ªå‹•æ›è¡Œæ¨¡å¼ Command+D # é¸å–ä¸‹ä¸€å€‹ç›¸åŒçš„å­—ä¸² ä¸‰ã€çµ‚ç«¯æ©Ÿï¼ˆConsoleï¼‰å¿«æ·éµ # é€™äº›å¿«æ·éµå¯ç”¨æ–¼ VSCode å…§å»ºçµ‚ç«¯æ©Ÿï¼ˆConsoleï¼‰é€²è¡Œå¿«é€Ÿæ“ä½œã€‚\nControl+W # åˆªé™¤ç•¶å‰æ¸¸æ¨™å‰çš„ä¸€å€‹å–®è© Control+U # åˆªé™¤ç•¶å‰è¡Œ Control+R # æœå°‹å‘½ä»¤æ­·å²ç´€éŒ„ Control+L # æ¸…é™¤çµ‚ç«¯æ©Ÿç•«é¢ å››ã€ç¸½çµ # ç†Ÿæ‚‰ä¸¦éˆæ´»é‹ç”¨é€™äº›å¿«æ·éµï¼Œå¯ä»¥å¤§å¹…æå‡ VSCode çš„æ“ä½œæ•ˆç‡ã€‚å»ºè­°æ–°æ‰‹å…ˆæŒæ¡åŸºæœ¬å¿«æ·éµï¼Œä¸¦åœ¨é–‹ç™¼éç¨‹ä¸­é€æ­¥é©æ‡‰æ›´å¤šé«˜æ•ˆæ“ä½œã€‚\nå¸Œæœ›é€™ç¯‡æ–‡ç« èƒ½å¹«åŠ©ä½ æ›´é«˜æ•ˆåœ°ä½¿ç”¨ VSCodeï¼ğŸš€\n","date":"23 November 2024","externalUrl":null,"permalink":"/douoduublog/posts/vscode-%E5%BF%AB%E6%8D%B7%E9%8D%B5%E5%A4%A7%E5%85%A8/","section":"æ–‡ç« ","summary":"\u003ch2 class=\"relative group\"\u003eå‰è¨€ \n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\n    \n    \u003cspan\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å®šä½é»\"\u003e#\u003c/a\u003e\n    \u003c/span\u003e        \n    \n\u003c/h2\u003e\n\u003cp\u003eVisual Studio Codeï¼ˆVSCodeï¼‰æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼·å¤§ä¸”å»£å—é–‹ç™¼è€…å–œæ„›çš„ç¨‹å¼ç¢¼ç·¨è¼¯å™¨ã€‚é€éå¿«æ·éµï¼Œé–‹ç™¼è€…å¯ä»¥æ›´é«˜æ•ˆåœ°ç·¨è¼¯ç¨‹å¼ç¢¼ã€ç®¡ç†è¦–çª—èˆ‡æ§åˆ¶çµ‚ç«¯æ©Ÿï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚\u003c/p\u003e","title":"VSCode å¿«æ·éµå¤§å…¨","type":"posts"},{"content":"å‰è¨€ # å®‰è£ Djangoã€MTV æ¨¡å¼ä¸­çš„ Template (T) èˆ‡ View (V) å¯¦ä½œç·´ç¿’ã€‚\næœ¬ç¯‡æ–‡ç« å°‡ä»‹ç´¹å¦‚ä½•ä½¿ç”¨ Django å»ºç«‹ä¸€å€‹ about é é¢ã€‚\né¦–å…ˆï¼Œå…ˆåˆ†äº«å®Œæ•´ï¼£ï¼²ï¼µï¼¤æµç¨‹!!!\næœ¬ç¯‡æ–‡ç« å°‡å¯¦ä½œ T (Template) å’Œ V (View) çš„éƒ¨åˆ†ã€‚ ä¸€ã€MVC èˆ‡ MTV æ¨¡å¼ç°¡ä»‹ # 1.1 MVCï¼ˆModel-View-Controllerï¼‰ # Mï¼ˆModelï¼Œæ¨¡å‹ï¼‰ï¼šè² è²¬èˆ‡è³‡æ–™åº«äº¤äº’ï¼ŒåŸ·è¡Œ CRUDï¼ˆæ–°å¢ã€è®€å–ã€æ›´æ–°ã€åˆªé™¤ï¼‰ã€‚ Vï¼ˆViewï¼Œè¦–åœ–ï¼‰ï¼šè² è²¬è™•ç†æ¥­å‹™é‚è¼¯ä¸¦æ¸²æŸ“é é¢ã€‚ Cï¼ˆControllerï¼Œæ§åˆ¶å™¨ï¼‰ï¼šè™•ç† Requestã€Responseï¼Œç®¡ç† Model èˆ‡ View ä¹‹é–“çš„äº¤äº’ã€‚ 1.2 MTVï¼ˆModel-Template-Viewï¼‰ # Django æ¡ç”¨ MTV æ¨¡å¼ï¼Œæ¦‚å¿µä¸Šé¡ä¼¼ MVCï¼Œä½†æœ‰æ‰€å€åˆ¥ï¼š\nMï¼ˆModelï¼‰ï¼šèˆ‡ MVC çš„ Model ç›¸åŒã€‚ Tï¼ˆTemplateï¼‰ï¼šè² è²¬å‰ç«¯é é¢ï¼ˆHTMLã€CSSã€JavaScriptï¼‰ã€‚ Vï¼ˆViewï¼‰ï¼šè² è²¬è™•ç†è«‹æ±‚ä¸¦å›å‚³é©ç•¶çš„æ¨¡æ¿é é¢ã€‚ Django çš„ Controller è§’è‰²ç”±æ¡†æ¶æœ¬èº«è™•ç†ã€‚ äºŒã€å®‰è£ Django ä¸¦å»ºç«‹å°ˆæ¡ˆ # 2.1 ä½¿ç”¨ Poetry å®‰è£ Django # å»ºè­°ä½¿ç”¨ Poetry ä¾†å»ºç«‹è™›æ“¬ç’°å¢ƒä¸¦å®‰è£ Djangoã€‚\npoetry new myproject cd myproject poetry add django æ³¨æ„ï¼šç¢ºä¿ app è³‡æ–™å¤¾ å¿…é ˆæ”¾åœ¨ å°ˆæ¡ˆæ ¹ç›®éŒ„ï¼Œä¸¦å¯«å…¥ settings.py çš„ INSTALLED_APPS å…§ã€‚\n2.2 å»ºç«‹ Django å°ˆæ¡ˆ # django-admin startproject pydev . æ³¨æ„ï¼šæœ€å¾Œçš„ . ä»£è¡¨å°‡å°ˆæ¡ˆåˆå§‹åŒ–åœ¨ç›®å‰ç›®éŒ„ã€‚\n2.3 è¨­å®šå°ˆæ¡ˆ URL # åœ¨ pydev/urls.py ä¸­æ–°å¢è·¯ç”±ï¼š\nfrom django.contrib import admin from django.urls import path, include urlpatterns = [ path(\u0026#34;admin/\u0026#34;, admin.site.urls), path(\u0026#34;\u0026#34;, include(\u0026#34;pages.urls\u0026#34;)), ] include(\u0026quot;pages.urls\u0026quot;) å…è¨±æˆ‘å€‘å°‡æ‡‰ç”¨ç¨‹å¼çš„ URL çµ„ç¹”åˆ°å–®ç¨çš„ urls.py æª”æ¡ˆã€‚\nä¸‰ã€å»ºç«‹ about é é¢ # 3.1 å»ºç«‹ pages æ‡‰ç”¨ç¨‹å¼ # python manage.py startapp pages åœ¨ pages/ å…§å»ºç«‹ ä»¥ä¸‹çµæ§‹ï¼š\npages/ â”‚â”€â”€ migrations/ â”‚â”€â”€ templates/ â”‚ â””â”€â”€ pages/ â”‚ â””â”€â”€ about.html â”‚â”€â”€ views.py â”‚â”€â”€ urls.py 3.2 è¨­å®š pages/urls.py # from django.urls import path from pages.views import about urlpatterns = [ path(\u0026#34;about/\u0026#34;, about), ] 3.3 è¨­å®š pages/views.py # from django.shortcuts import render def about(request): return render(request, \u0026#34;pages/about.html\u0026#34;) 3.4 å»ºç«‹ about.html # å»ºç«‹ pages/templates/pages/about.htmlï¼š\n{% extends \u0026#34;shared/layout.html\u0026#34; %} {% block content %} \u0026lt;h1\u0026gt;About\u0026lt;/h1\u0026gt; {% endblock %} 3.5 å»ºç«‹ layout.html # å»ºç«‹ templates/shared/layout.htmlï¼š\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34; /\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34; /\u0026gt; \u0026lt;title\u0026gt;My Django App\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; {% block content %}{% endblock %} \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; æ³¨æ„ï¼šå¿…é ˆç¢ºä¿ settings.py ä¸­ TEMPLATES è¨­å®šçš„ DIRS å…§åŒ…å« templates/ ç›®éŒ„ï¼Œå¦å‰‡ç„¡æ³•æ‰¾åˆ° layout.htmlã€‚\nTEMPLATES = [ { \u0026#34;BACKEND\u0026#34;: \u0026#34;django.template.backends.django.DjangoTemplates\u0026#34;, \u0026#34;DIRS\u0026#34;: [\u0026#34;templates\u0026#34;], \u0026#34;APP_DIRS\u0026#34;: True, \u0026#34;OPTIONS\u0026#34;: {...}, }, ] å››ã€å•Ÿå‹•ä¼ºæœå™¨ä¸¦æ¸¬è©¦ # python manage.py runserver æ‰“é–‹ç€è¦½å™¨ï¼Œè¨ªå• http://127.0.0.1:8000/about/ï¼Œæ‡‰è©²å¯ä»¥çœ‹åˆ° about é é¢ã€‚\näº”ã€Django è¨»è§£èªæ³• # {% comment %} é€™æ˜¯ä¸€å€‹ Django è¨»è§£ {% endcomment %} Django ä½¿ç”¨ Django Template Language (DTL)ï¼Œé›–ç„¶èªæ³•é¡ä¼¼ Jinja2ï¼Œä½†å¯¦éš›ä¸Šæ˜¯ Django ç¨æœ‰çš„æ¨¡æ¿èªè¨€ã€‚\nå…­ã€çµè«– # æœ¬ç¯‡æ–‡ç« ç¤ºç¯„äº† å¦‚ä½•ä½¿ç”¨ Django å»ºç«‹ä¸€å€‹ç°¡å–®çš„ about é é¢ï¼Œä¸¦ä»‹ç´¹äº† MTV æ¨¡å¼ä¸­çš„ Template (T) èˆ‡ View (V)ã€‚\né‡é»å›é¡§ï¼š\nä½¿ç”¨ Poetry å®‰è£ Django ä¸¦å»ºç«‹å°ˆæ¡ˆã€‚ å»ºç«‹ Django æ‡‰ç”¨ç¨‹å¼ pages ä¸¦æ–°å¢è·¯ç”±èˆ‡è¦–åœ–ã€‚ ä½¿ç”¨ render æ–¹æ³•å›å‚³ HTML æ¨¡æ¿ã€‚ è¨­å®š layout.html è®“å¤šå€‹é é¢å…±ç”¨æ¨¡æ¿çµæ§‹ã€‚ å¸Œæœ›é€™ç¯‡æ–‡ç« èƒ½å¹«åŠ©ä½ æ›´å¿«æŒæ¡ Django çš„åŸºæœ¬æ¦‚å¿µï¼ğŸš€\n","date":"22 November 2024","externalUrl":null,"permalink":"/douoduublog/posts/%E4%BD%BF%E7%94%A8django%E5%81%9A%E4%B8%80%E5%80%8B%E9%A0%81%E9%9D%A2/","section":"æ–‡ç« ","summary":"\u003ch2 class=\"relative group\"\u003eå‰è¨€ \n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\n    \n    \u003cspan\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å®šä½é»\"\u003e#\u003c/a\u003e\n    \u003c/span\u003e        \n    \n\u003c/h2\u003e\n\u003cp\u003eå®‰è£ Djangoã€MTV æ¨¡å¼ä¸­çš„ Template (T) èˆ‡ View (V) å¯¦ä½œç·´ç¿’ã€‚\u003c/p\u003e\n\u003cp\u003eæœ¬ç¯‡æ–‡ç« å°‡ä»‹ç´¹å¦‚ä½•ä½¿ç”¨ Django å»ºç«‹ä¸€å€‹ \u003ccode\u003eabout\u003c/code\u003e é é¢ã€‚\u003c/p\u003e","title":"ä½¿ç”¨ Django å»ºç«‹ä¸€å€‹é é¢","type":"posts"},{"content":"","date":"17 November 2024","externalUrl":null,"permalink":"/douoduublog/tags/%E7%92%B0%E5%A2%83%E5%AE%89%E8%A3%9D/","section":"Tags","summary":"","title":"ç’°å¢ƒå®‰è£","type":"tags"},{"content":" å‰è¨€ # åœ¨é€²å…¥ Python é ˜åŸŸä¹‹å‰ï¼Œå»ºè­°å…ˆå®‰è£ç›¸é—œå·¥å…·èˆ‡å¥—ä»¶ï¼Œé€™æ¨£å¯ä»¥é‚Šå­¸ç¿’é‚Šå¯¦ä½œï¼Œæé«˜å­¸ç¿’æ•ˆç‡ã€‚æœ¬ç¯‡æ–‡ç« å°‡ä»‹ç´¹ Python ç’°å¢ƒå®‰è£çš„å„ç¨®æ–¹å¼ï¼Œé©ç”¨æ–¼ macOS ä½¿ç”¨è€…ã€‚\nä¸€ã€å®‰è£ Python # é¦–å…ˆï¼Œéœ€è¦å¾ Python å®˜ç¶²ä¸‹è¼‰ä¸¦å®‰è£æœ€æ–°ç‰ˆæœ¬ï¼Œå®‰è£å®Œæˆå¾Œå¯é€²è¡Œä»¥ä¸‹æ­¥é©Ÿç¢ºèªå®‰è£æ˜¯å¦æˆåŠŸã€‚\n1.1 åœ¨çµ‚ç«¯æ©Ÿè¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼š # which python3 # æª¢æŸ¥ Python3 ä½ç½® python3 # é€²å…¥ Python äº’å‹•æ¨¡å¼ï¼ˆREPLï¼‰ exit() æˆ– æŒ‰ Control+D # é›¢é–‹ Python ç’°å¢ƒ äºŒã€äº†è§£ REPL ç’°å¢ƒ # REPLï¼ˆRead-Eval-Print-Loopï¼‰ æ˜¯ Python å…§å»ºçš„äº¤äº’å¼åŸ·è¡Œç’°å¢ƒã€‚\nåœ¨é€™å€‹ç’°å¢ƒåº•ä¸‹æœƒè®€å–è¼¸å…¥çš„æŒ‡ä»¤ï¼Œç„¶å¾Œè©•ä¼°æ˜¯å¦å¯åŸ·è¡Œã€‚\nå¦‚æœå¯ä»¥å°±æŠŠçµæœå°å‡ºä¾†ï¼Œä¸è¡Œå°±æœƒå‡ºç¾éŒ¯èª¤çš„è¨Šæ¯ã€‚\næœ€å¾Œä¸ç®¡èƒ½ä¸èƒ½åŸ·è¡Œï¼Œéƒ½æœƒé€²å…¥ä¸‹ä¸€å€‹æŒ‡ä»¤çš„è¿´åœˆã€‚\nè®€å–ï¼ˆReadï¼‰ï¼šè®€å–ä½¿ç”¨è€…è¼¸å…¥çš„æŒ‡ä»¤ã€‚ è©•ä¼°ï¼ˆEvalï¼‰ï¼šåŸ·è¡Œè¼¸å…¥çš„æŒ‡ä»¤ã€‚ è¼¸å‡ºï¼ˆPrintï¼‰ï¼šå°å‡ºåŸ·è¡Œçµæœã€‚ å¾ªç’°ï¼ˆLoopï¼‰ï¼šå›åˆ°ä¸‹ä¸€å€‹æŒ‡ä»¤è¼¸å…¥ã€‚ é©åˆé€²è¡Œ ç°¡å–®æ¸¬è©¦ æˆ– ç¨‹å¼é©—è­‰ã€‚ ä¸‰ã€å®‰è£ pyenv # pyenv æ˜¯ä»€éº¼ï¼špyenv æ˜¯ä¸€æ¬¾ç®¡ç† å¤šå€‹ Python ç‰ˆæœ¬ çš„å·¥å…·ï¼Œå¯ä»¥è¼•é¬†åˆ‡æ›ä¸åŒç‰ˆæœ¬ã€‚\n3.1 å®‰è£ pyenv # è«‹åƒè€ƒå®˜æ–¹æ–‡ä»¶ï¼špyenv å®˜æ–¹å®‰è£æŒ‡å—\n3.2 å¸¸ç”¨æŒ‡ä»¤ # åœ¨çµ‚ç«¯æ©Ÿè¼¸å…¥ä»¥ä¸‹å…§å®¹ï¼Œä¸¦åˆ†åˆ¥ç‚ºï¼š\nwhich pyenv # ç¢ºèª pyenv ä½ç½® pyenv #å‡ºç¾æŒ‡ä»¤ pyenv -v # æŸ¥çœ‹ pyenv ç‰ˆæœ¬ pyenv install --list # åˆ—å‡ºå¯å®‰è£çš„ Python ç‰ˆæœ¬ pyenv install 3.12.4 # å®‰è£æŒ‡å®šç‰ˆæœ¬ï¼Œå¯ä¸‹è¼‰æœ€æ–°çš„ pyenv global 3.12.4 # è¨­å®šé è¨­ Python ç‰ˆæœ¬ï¼Œæ­¤æ™‚å°±å¯ä»¥éš¨æ„æ‰“pythonä¸ç”¨åŠ 3 pyenv versions # åˆ—å‡ºå·²å®‰è£çš„ Python ç‰ˆæœ¬ pyenv shell 3.12.4 #è‹¥æ²’æ”¹æˆé è¨­å€¼ï¼Œå¯ä»¥ç”¨å«çš„å«å‡ºé€™å€‹ç‰ˆæœ¬ å››ã€å®‰è£ VS Code # å®‰è£å¾Œå¯é€éå¿«æ·éµæå‡é–‹ç™¼æ•ˆç‡ã€‚\n4.1 å¸¸ç”¨å¿«æ·éµ # Command+Shift+P # é–‹å•Ÿå‘½ä»¤é¢æ¿ Control+` # é–‹å•Ÿçµ‚ç«¯æ©Ÿ Command+D # é¸å–ä¸‹ä¸€å€‹ç›¸åŒé …ç›® Option+Shift+â†“ # è¤‡è£½æ•´è¡Œ Command+/ # è¨»è§£/å–æ¶ˆè¨»è§£ ç›´æ¥å†æ¸¸æ¨™é‚£è¡ŒæŒ‰è¤‡è£½ #å¯è²¼ä¸Šåˆ°ä»»ä¸€æ¸¸æ¨™è™• Option+æ¸¸æ¨™è™•ï¼‹ä¸Šä¸‹éµ #å¯ç§»å‹•æ•´è¡Œ äº”ã€åŸ·è¡Œç¬¬ä¸€å€‹ Python ç¨‹å¼ # 5.1 ä½¿ç”¨å…§å»ºçµ‚ç«¯æ©Ÿ # cd è³‡æ–™å¤¾åç¨± # åˆ‡æ›åˆ°ç›®æ¨™è³‡æ–™å¤¾ ls -al # æŸ¥çœ‹è³‡æ–™å¤¾å…§å®¹ python3 æª”æ¡ˆåç¨±.py # åŸ·è¡Œ Python ç¨‹å¼ï¼Œä¾‹å¦‚ï¼špython3 hi.py 5.2 åœ¨ VS Code åŸ·è¡Œ # pwd # ç¢ºèªç•¶å‰ç›®éŒ„ python3 æª”æ¡ˆåç¨±.py # åŸ·è¡Œ Python ç¨‹å¼ï¼Œä¾‹å¦‚ï¼špython3 hi.py å…­ã€å®‰è£ Python å¥—ä»¶ # 6.1 ä½¿ç”¨ pip å®‰è£å¥—ä»¶ # å…ˆåˆ° PyPI çš„ç¶²ç«™ï¼Œä¾‹å¦‚è¦ä¸‹è¼‰ request å¥—ä»¶ï¼Œæœå°‹ requestã€‚\nè¤‡è£½æŒ‡ä»¤åˆ° Vscode çš„çµ‚ç«¯æ©Ÿå®‰è£ã€‚\npip install requests # å®‰è£ requests å¥—ä»¶ pip uninstall requests # å¸è¼‰ requests (ä½†ä¸æœƒå…¨éƒ¨åˆªæ‰ï¼Œæœƒæœ‰æ··é›œçš„å¥—ä»¶ç•™å­˜ï¼Œé€ æˆç©ºé–“æµªè²») pip list # æŸ¥çœ‹å·²å®‰è£çš„å¥—ä»¶ ä¸ƒã€å»ºç«‹è™›æ“¬ç’°å¢ƒï¼ˆvenvï¼‰ # ç›®çš„ï¼šä¸æœƒå½±éŸ¿å…¶ä»–å°ˆæ¡ˆï¼Œå› ç‚ºåŒæ¨£å¥—ä»¶åªèƒ½å®‰è£ä¸€å€‹ç‰ˆæœ¬ï¼Œæ‰€ä»¥æ²’åŠ æœƒè¦†è“‹ã€‚\n7.1 å»ºç«‹è™›æ“¬ç’°å¢ƒ # ä»¥ä¸‹å…§å®¹-m æ˜¯æŒ‡è¼‰å…¥ï¼Œvenv æ˜¯å…§å»ºè™›æ“¬æ¨¡çµ„ï¼Œmyenv æ˜¯è‡ªå·±å–çš„è™›æ“¬ç’°å¢ƒåå­—\npython -m venv myenv # å»ºç«‹åç‚º myenv çš„è™›æ“¬ç’°å¢ƒ python -m venv myenv --prompt=\u0026#34;hello\u0026#34; #å¦‚åŒä¸Šè¿°ï¼Œä¸éé€™è¡Œ--prompt=\u0026#34;è‡ªå·±å–åå­—\u0026#34;ï¼Œç‚ºVscodeé–‹å•Ÿçµ‚ç«¯æ©Ÿæ™‚ã€Œåç¨±ã€æœƒè®Šhello 7.2 å•Ÿå‹•è™›æ“¬ç’°å¢ƒ # å·¦å´æ¬„ä½æœƒå‡ºç¾ä¸€å€‹ myenv è³‡æ–™å¤¾ï¼Œè£¡é¢æœ‰ä¸€äº›è³‡æ–™å¤¾ï¼Œåœ¨ä½¿ç”¨è™›æ“¬ç’°å¢ƒæ™‚ï¼Œä¸å¤ªç®¡å®ƒã€‚ä½†å•Ÿå‹•è™›æ“¬ç’°å¢ƒï¼Œè£¡é¢æœ‰ä¸€å€‹ bin è³‡æ–™å¤¾ï¼Œåº•ä¸‹æœ‰ activateï¼ŒåŸ·è¡Œè¼¸å…¥ã€‚\nsource myenv/bin/activate # å•Ÿå‹•è™›æ“¬ç’°å¢ƒ 7.3 åœ¨è™›æ“¬ç’°å¢ƒå…§å®‰è£å¥—ä»¶ # pip install django # å®‰è£ Django pip list #è‹¥è¦çœ‹å…§å®¹ï¼Œé ˜åŸŸå±•é–‹ï¼Œè¼¸å…¥ä»¥ä¸Š pip freeze \u0026gt; requirements.txt # ç”¢ç”Ÿå¥—ä»¶æ¸…å–® pip install -r requirements.txt # ä¾æ“šå¥—ä»¶æ¸…å–®å®‰è£ 7.4 åœç”¨è™›æ“¬ç’°å¢ƒ # deactivate # é›¢é–‹è™›æ“¬ç’°å¢ƒ å…«ã€ä½¿ç”¨ Poetry é€²è¡Œå¥—ä»¶ç®¡ç† # Poetry æ˜¯ä¸€æ¬¾ç¾ä»£åŒ–çš„ Python å¥—ä»¶ç®¡ç†å·¥å…·ï¼Œæä¾› å®‰è£ã€ç‰ˆæœ¬æ§åˆ¶ã€æ‰“åŒ…èˆ‡ç™¼å¸ƒ ç­‰åŠŸèƒ½ã€‚\n8.1 å®‰è£ Poetry # pip install poetry # å®‰è£ Poetry 8.2 åˆå§‹åŒ–æˆ–å®‰è£ Poetry å°ˆæ¡ˆ # 8.2.1 å»ºç«‹æ–°å°ˆæ¡ˆ # å¦‚æœæ˜¯å…¨æ–°çš„å°ˆæ¡ˆï¼Œå¯ä»¥ä½¿ç”¨ poetry new ä¾†å»ºç«‹å°ˆæ¡ˆç›®éŒ„ï¼Œä¸¦è‡ªå‹•ç”Ÿæˆ pyproject.tomlï¼š\npoetry new myproject # å»ºç«‹æ–°å°ˆæ¡ˆ cd myproject # é€²å…¥å°ˆæ¡ˆç›®éŒ„ pwd #ç¢ºèªè¼¸å…¥ä½ç½®æ²’éŒ¯ 8.2.2 åœ¨ç¾æœ‰å°ˆæ¡ˆåˆå§‹åŒ– Poetry # å¦‚æœä½ å·²ç¶“æœ‰ä¸€å€‹è³‡æ–™å¤¾ï¼Œä¸¦å¸Œæœ›ä½¿ç”¨ Poetry ä¾†ç®¡ç†å®ƒï¼Œè«‹åŸ·è¡Œï¼š\ncd existing_project # é€²å…¥ç¾æœ‰å°ˆæ¡ˆç›®éŒ„ poetry init # åˆå§‹åŒ– Poetryï¼Œå»ºç«‹ pyproject.toml 8.2.3 å®‰è£å°ˆæ¡ˆä¾è³´ # ç•¶ pyproject.toml æª”æ¡ˆå·²ç¶“å­˜åœ¨æ™‚ï¼ˆç„¡è«–æ˜¯é€é poetry new æˆ– poetry init å»ºç«‹ï¼‰ï¼Œä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ä¾†å®‰è£æ‰€æœ‰ä¾è³´ï¼š\npoetry install # æ ¹æ“š pyproject.toml å®‰è£æ‰€æœ‰ä¾è³´ï¼Œå‰µä¸€å€‹.venvè³‡æ–™å¤¾ 8.3 ä½¿ç”¨ Poetry ç®¡ç†å¥—ä»¶ # poetry shell #å…ˆåˆ‡æ›åˆ°è™›æ“¬ç›®éŒ„è£¡é¢ï¼Œåœ¨poetryåŸ·è¡Œ poetry add requests # å®‰è£å¥—ä»¶ï¼Œä¾‹å¦‚å¥—ä»¶åç¨±ç‚ºrequests poetry remove requests # ç§»é™¤ requests å¥—ä»¶ï¼Œæˆ–æ˜¯å¯ä»¥åˆªæ‰è³‡æ–™å¤¾ pip list #çœ‹å…§å®¹ poetry show #å¯ä»¥çœ‹è£çš„å¥—ä»¶åŠç‰ˆæœ¬è³‡è¨Šï¼ˆè¼ƒè©³ç´°ï¼‰ poetry show --tree # æŸ¥çœ‹ä¾è³´æ¨¹ç‹€çµæ§‹ poetry add pre-commit --group dev #è£åˆ°ä¸åŒç¾¤çµ„è£¡ä½ˆç½®æ™‚ä½¿ç”¨ poetry env info #çœ‹poetryä½ç½®è£åˆ°å“ª poetry env remove ä½ç½® #åˆªé™¤æŒ‡å®šä½ç½®è™›æ“¬ç’°å¢ƒ poetry cofing --list #æª¢æŸ¥å…§å®¹ ä¹ã€èªæ„åŒ–ç‰ˆæœ¬æ§åˆ¶ # åœ¨ pyproject.toml å…§ä½¿ç”¨ èªæ„åŒ–ç‰ˆæœ¬è¦å‰‡ ä¾†ç®¡ç†ä¾è³´ã€‚\n\u0026#34;^5.0.3\u0026#34; # ^æ˜¯ä¸­é–“æ•¸å­—0æœ‰è·³å‹•ï¼Œæœƒè‡ªå‹•æŠ“åˆ°æ–°ç‰ˆæœ¬ï¼Œæ˜¯éƒ¨åˆ†æ›´å‹•ï¼Œå‡ç´šä¸­é–“çš„ç‰ˆæœ¬ \u0026#34;~5.0.3\u0026#34; # å…è¨±ä¿®æ­£ç‰ˆæœ¬æ›´æ–°ï¼Œä½†ä¸è®Šæ›´æ¬¡è¦ç‰ˆæœ¬ï¼Œ~æ˜¯3æœ‰è·³å‹•ï¼Œåªè£é€™å€‹å¾Œé¢çš„ï¼Œç®—æ˜¯å°åœ°æ–¹æ›´å‹• \u0026#34;\u0026gt;=5.0.3\u0026#34; # å®‰è£ 5.0.3 ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œåªè¦å¤§æ–¼ç­‰æ–¼é€™å€‹ç‰ˆæœ¬å°±å®‰è£ \u0026#34;==5.0.3\u0026#34; # åƒ…å®‰è£ 5.0.3ï¼Œä¸å‡ç´šï¼Œé€™å€‹å°±å¥½ï¼ çµè«– # æœ¬ç¯‡æ–‡ç« ä»‹ç´¹äº† Python ç’°å¢ƒå®‰è£ã€å¥—ä»¶ç®¡ç†ã€è™›æ“¬ç’°å¢ƒèˆ‡ VS Code ä½¿ç”¨æŠ€å·§ï¼Œé€™äº›æ¦‚å¿µæ˜¯å­¸ç¿’ Python åŠ Django ç­‰æ¡†æ¶çš„é‡è¦åŸºç¤ã€‚\nå­¸ç¿’é‡é»å›é¡§ï¼š\npyenv å¯ç”¨æ–¼ç®¡ç†å¤šç‰ˆæœ¬ Pythonã€‚ venv å’Œ Poetry è®“å°ˆæ¡ˆç’°å¢ƒæ›´ç¨ç«‹ã€‚ pip å’Œ Poetry å¹«åŠ©ç®¡ç† Python å¥—ä»¶ã€‚ VS Code æä¾›ä¾¿åˆ©çš„é–‹ç™¼å·¥å…·èˆ‡å¿«æ·éµã€‚ å¸Œæœ›é€™ç¯‡æ–‡ç« èƒ½å¹«åŠ©ä½ é †åˆ©é–‹å§‹ Python é–‹ç™¼æ—…ç¨‹ï¼\n","date":"17 November 2024","externalUrl":null,"permalink":"/douoduublog/posts/%E7%92%B0%E5%A2%83%E5%AE%89%E8%A3%9D-%E8%B8%8F%E5%85%A5python%E7%AC%AC%E4%B8%80%E6%AD%A5/","section":"æ–‡ç« ","summary":"\u003chr\u003e\n\n\n\u003ch2 class=\"relative group\"\u003eå‰è¨€ \n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\n    \n    \u003cspan\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å®šä½é»\"\u003e#\u003c/a\u003e\n    \u003c/span\u003e        \n    \n\u003c/h2\u003e\n\u003cp\u003eåœ¨é€²å…¥ Python é ˜åŸŸä¹‹å‰ï¼Œå»ºè­°å…ˆå®‰è£ç›¸é—œå·¥å…·èˆ‡å¥—ä»¶ï¼Œé€™æ¨£å¯ä»¥é‚Šå­¸ç¿’é‚Šå¯¦ä½œï¼Œæé«˜å­¸ç¿’æ•ˆç‡ã€‚æœ¬ç¯‡æ–‡ç« å°‡ä»‹ç´¹ Python ç’°å¢ƒå®‰è£çš„å„ç¨®æ–¹å¼ï¼Œé©ç”¨æ–¼ \u003cstrong\u003emacOS ä½¿ç”¨è€…\u003c/strong\u003eã€‚\u003c/p\u003e","title":"ç’°å¢ƒå®‰è£ - è¸å…¥ Python ç¬¬ä¸€æ­¥","type":"posts"},{"content":"hiï¼æˆ‘æ˜¯å°ç‘œ # æ­¡è¿ä¾†åˆ°æˆ‘çš„éƒ¨è½æ ¼â—â€¢á´—â€¢â— é€™é‚Šä¸»è¦åˆ†äº«ä¸€äº›æ”å½±ã€æ—…éŠã€ç¶²é å­¸ç¿’ç­‰å…§å®¹ï¼ ä»¥ä¸‹æ˜¯æˆ‘çš„ç°¡ä»‹\nè‡ªæˆ‘ä»‹ç´¹ # æˆ‘æ˜¯å€‹å¹³é¢æ¥æ¡ˆæ”å½±å¸«ï¼Œæ›¾ä»»è‹—æ —ç¸£æ”¿åºœæ–‡åŒ–è§€å…‰å±€ç‰¹ç´„æ”å½±å¸«ï¼Œæˆ‘æ‹æ”éå­¸ç”Ÿå„é¡æœè£è¨­è¨ˆåŠæ£šå…§æ‹æ”ã€å©šç¦®æ”å½±ã€å•†å“æ”å½±ã€æ™‚è£èµ°ç§€ï¼Œä¸¦ä¸”ç¶“å¸¸åœ¨å°åŒ—æ™‚è£é€±å‡ºæ²’ï¼Œå–œå¥½æ‹æ”æ™‚å°šã€æœè£é¡å‹ï¼Œç›®å‰æœ‰èªè­˜çš„åœ˜éšŠæ˜¯æ‹æ”å‹•æ…‹å½±ç‰‡ï¼Œæœ‰æ‹éå»£å‘Šã€MVã€çŸ­å½±éŸ³ç­‰ï¼Œç¶“é©—è±å¯Œï¼Œæ­¡è¿è¯ç¹«ï¼\nå¦å¤–ï¼Œæˆ‘æ›¾ç¶“æ˜¯å€‹é«˜éµç«™å‹™å“¡ï¼Œå› ç‚ºå°ç§‘æŠ€æ¥­å……æ»¿å¥½å¥‡è€Œé›¢é–‹ã€‚æœ‰åˆ°è£œç¿’ç­å­¸ç¿’å…¨ç«¯ç¨‹å¼è¨­è¨ˆï¼Œæ‰€ä»¥é€™é‚Šä¹Ÿæœƒåˆ†äº«ä¸€äº›èœé³¥å­¸ç¿’çš„å…§å®¹ï¼Œä¸»è¦æ˜¯æˆ‘æœ¬èº«æ˜¯å€‹ç†±æ„›åˆ†äº«äº‹ç‰©çš„äººï¼Œæ‰€ä»¥å‰µäº†é€™å€‹ Blog åˆ†äº«ï¼è‹¥æœ‰ä»»ä½•å•é¡Œæ­¡è¿è¯ç¹«ã€‚\nä¸€ã€æ”å½±æœå‹™ # å¹³é¢æ”å½± # å©šç¦®æ”å½± é£Ÿç‰©æ”å½± å•†å“æ”å½± å‹•æ…‹æ”å½± # å©šç¦®éŒ„å½± ï¼­ï¼¶ å»£å‘Šæ‹æ” çŸ­å½±éŸ³æ‹æ” äºŒã€è»Ÿé«”å­¸ç¿’ # å‰ç«¯ # Html/Css JavaScript HTMX Tailwind Vue å¾Œç«¯ # Python Django C# .NET å…¶ä»– # PostgreSQL Git ç‰ˆæœ¬æ§åˆ¶ GitHub è¯ç¹«æ–¹å¼ # Email : selinafs880504@gmail.com é›»è©± : 0978-076262 GitHub : é€£çµ YouTube : é€£çµ ","date":"17 November 2024","externalUrl":null,"permalink":"/douoduublog/about/","section":"å°ç‘œçš„éƒ¨è½æ ¼","summary":"\u003ch1 class=\"relative group\"\u003ehiï¼æˆ‘æ˜¯å°ç‘œ \n    \u003cdiv id=\"hi%E6%88%91%E6%98%AF%E5%B0%8F%E7%91%9C\" class=\"anchor\"\u003e\u003c/div\u003e\n    \n    \u003cspan\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\n            style=\"text-decoration-line: none !important;\" href=\"#hi%E6%88%91%E6%98%AF%E5%B0%8F%E7%91%9C\" aria-label=\"å®šä½é»\"\u003e#\u003c/a\u003e\n    \u003c/span\u003e        \n    \n\u003c/h1\u003e\n\u003cimg src=\"img/å°é­š.jpg\" alt=\"me\" width=\"500px\"\u003e\n\u003ch3 style=\"color:#91B493\"\u003e\u003cstrong\u003eæ­¡è¿ä¾†åˆ°æˆ‘çš„éƒ¨è½æ ¼â—â€¢á´—â€¢â— \u003c/strong\u003e\u003c/h3\u003e\né€™é‚Šä¸»è¦åˆ†äº«ä¸€äº›æ”å½±ã€æ—…éŠã€ç¶²é å­¸ç¿’ç­‰å…§å®¹ï¼\n\u003cp style=\"color:#9B90C2 ; text-decoration:underline;\" \u003e\u003ca href=\"#me\"\u003e\u003cem\u003eä»¥ä¸‹æ˜¯æˆ‘çš„ç°¡ä»‹\u003c/em\u003e\u003c/a\u003e\u003c/p\u003e","title":"about this blog","type":"page"},{"content":"","externalUrl":null,"permalink":"/douoduublog/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"}]